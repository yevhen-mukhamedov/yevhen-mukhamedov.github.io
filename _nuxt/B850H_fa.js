import{_ as me}from"./BKAhWZth.js";import{V as pe,$ as he,W as fe,_ as ge,a0 as ye,aA as ve,a1 as be,i as v,j as M,k as we,l as ke,bg as U,o as a,c as o,a as d,d as S,X as e,f as N,a4 as Te,u as I,x as K,n as E,t as c,b as m,bh as Ce,F as k,r as z,K as L,aD as xe,aa as $e,au as Se,bi as Ne,aE as G,bj as Ie,bk as Ee,a5 as Le,ah as Pe,ai as Ve,a6 as Ae}from"./JoFQSik9.js";import{_ as Be}from"./K-WBeQ-v.js";import{_ as De}from"./BQxgWOyN.js";import{_ as Oe}from"./Cf_ozb67.js";import{u as Fe}from"./R1J_LkVd.js";import{g as H}from"./BZw8aVXh.js";const je={1:"live-games",2:"games-id",3:"virtual-sport-id",4:"tv-games-id",5:"poker-id",6:"sportbook-id",7:"special-games-id",8:"table-games-id"},Re=b=>(Pe("data-v-8fddff60"),b=b(),Ve(),b),Me={class:"ng-leader-board"},Ue={class:"board"},Ke={key:1,class:"board-wrapper ng-flex-center"},ze={class:"board-table"},Ge={class:"tw-flex tw-items-center"},He={key:0,class:"ng-flex-center"},We={key:1,class:"ng-flex-center"},Xe={key:2,class:"ng-flex-center"},Ye={key:3,class:"ng-flex-center"},qe={class:"tw-flex tw-justify-end"},Je=["onClick"],Qe=["src"],Ze={class:"tw-text-ellipsis tw-overflow-hidden tw-whitespace-nowrap"},et={key:0,class:"ng-flex-center"},tt=["onClick"],st=["data-tooltip"],at=["onClick"],ot={key:1,class:"ng-flex-center"},nt={key:0},rt={key:1},ct={key:2,class:"tw-flex tw-justify-end"},it=["src"],lt={key:3,class:"ng-flex-center"},dt=["onClick"],ut=["src"],_t=Re(()=>d("div",{class:"board-shadow"},null,-1)),W=12,mt=pe({__name:"LeaderBoard",emits:["profile-active","bet-active"],setup(b,{emit:X}){const Y=X,q=he(),P=fe(),{platformCommasFormat:T}=Fe(),C=["6ed534e6-fe06-428f-b15f-e769cbbfe1c4","45cab422-ae18-45d9-acde-e0ddead0091a"],{t:n}=ge(),{$echo:V}=$e(),{public:{PLATFORM_ID:A}}=Se(),J=ye(),Q=ve(),{setAnotherUser:Z,setBetInfo:ee,openModal:B}=Q,{isLessContainerTablet:i,isLeaderboardAlternativeTime:te}=be(J),g=[{key:"casino",label:n("casino_bets"),icon:"casino"},{key:"high-rollers",label:n("high-rollers_bets"),icon:"crash"},{key:"rare-wins",label:n("rare-wins_bets"),icon:"special"}],x=v(!0),u=v(g[0].key),D=v(new Date),p=v({casino:[],"high-rollers":[],"rare-wins":[]}),O=v(void 0),F=M({get:()=>g.find(({key:t})=>t===u.value)??g[0],set:t=>{u.value=t}}),se=M(()=>({second:n("seconds_s"),minute:n("minutes_m"),hour:n("hours_h"),day:n("days_d")})),ae=t=>{u.value=t},oe=async()=>{x.value=!0;try{const{data:t}=await Ne.casino.getNewTransactions();p.value=t,O.value=window.setInterval(()=>{D.value=new Date},1e3)}catch(t){console.error("Error in LeaderBoard.vue -> getNewTransactions:",t)}finally{x.value=!1}},ne=t=>"/img/categories/"+t.game_category.toLowerCase().replace(/\s+|-/g,"_")+".svg",re=t=>{let l;const _=je[t.type_id],f={id:t.game_id};_?l=P({name:`${_}`,params:f}):l=P({name:"games-id",params:f}),q.push({path:l})},j=t=>{Z(t),B(G.PROFILE_STATISTIC)},ce=t=>{ee(t),B(G.BET_INFO),Y("bet-active",t)},R=t=>+t.payout>=+t.bet_amount,ie=()=>{V.channel(`${U.transactionsCompany}.${A}`).listen(Ie.leaderBoard,t=>{const[l]=Object.keys(t);if(t.casino){const _=t[l],{id:f,category:w}=_;if(!f)return;let y=-1;const h=p.value[w];y=h.findIndex(r=>r.id===f),y!==-1?Object.keys(_).forEach(r=>{h[y][r]=_[r]}):(h.length<10||h.pop(),h.unshift(_)),p.value[w].sort((r,s)=>new Date(s.time).getTime()-new Date(r.time).getTime())}else p.value[l]=t[l]})},le=t=>Ee(t,D.value,se.value),de=t=>t&&t.length>W,ue=t=>`${R(t)||+t.payout==0?"":"-"}${T(C,t.payout)}`;return we(()=>{oe(),ie()}),ke(()=>{V.leaveChannel(`${U.transactionsCompany}.${A}`),clearInterval(O.value)}),(t,l)=>{const _=me,f=Be,w=De,y=Le,h=Oe;return a(),o("div",Me,[d("div",Ue,[S(t.$slots,"tabs",{activeTab:e(u),activeTabSetter:ae,tabs:g},()=>[e(i)?(a(),N(_,{key:0,"model-value":e(F),"item-list":g,"displayed-option":"label","returned-option":"key","additional-label":e(n)("leaderboard"),"default-option":e(F),"onUpdate:modelValue":l[0]||(l[0]=r=>u.value=r)},null,8,["model-value","additional-label","default-option"])):(a(),N(f,{key:1,modelValue:e(u),"onUpdate:modelValue":l[1]||(l[1]=r=>Te(u)?u.value=r:null),tabs:g,type:"primary"},null,8,["modelValue"]))],!0),e(p)[e(u)].length?(a(),o("div",Ke,[I(h,{loading:e(x),class:"tw-w-full"},{default:K(()=>[d("div",ze,[S(t.$slots,"header",{},()=>[d("div",{class:E(["fg-main-14-thin board-header",{"tw-grid-cols-2":e(i),"tw-grid-cols-6":!e(i)}])},[d("div",Ge,c(e(n)("game")),1),e(i)?m("",!0):(a(),o("div",He,c(e(n)("user")),1)),e(i)?m("",!0):(a(),o("div",We,c(e(n)("time")),1)),e(i)?m("",!0):(a(),o("div",Xe,c(e(n)("bet_amount")),1)),e(i)?m("",!0):(a(),o("div",Ye,c(e(n)("multiplier")),1)),d("div",qe,c(e(n)("payout")),1)],2)],!0),S(t.$slots,"body",{items:e(p)[e(u)]},()=>[I(Ce,{name:"list",tag:"div",class:"board-body"},{default:K(()=>[(a(!0),o(k,null,z(Object.keys(e(p)),r=>(a(),o(k,{key:`${r}-transactions-array`},[r===e(u)?(a(),o(k,{key:0},[e(p)[r].length>0?(a(!0),o(k,{key:0},z(e(p)[r],(s,_e)=>(a(),o("div",{key:`${s.game}-${s.nickname}-${_e}`,class:E(["fg-main-14-thin board-row",{"tw-grid-cols-2":e(i),"tw-grid-cols-6":!e(i)}])},[d("div",{class:"tw-flex tw-items-center tw-cursor-pointer",onClick:$=>re(s)},[d("img",{alt:"category-icon",class:"board-row-icon",width:"16",height:"16",src:s.category_icon||ne(s)},null,8,Qe),d("span",Ze,c(s.game),1)],8,Je),e(i)?m("",!0):(a(),o("div",et,[de(s.username)?(a(),o("span",{key:0,class:"tw-cursor-pointer",onClick:$=>j(s)},c(s.username.substring(0,W)+"..."),9,tt)):s.username===""?(a(),o("span",{key:1,class:"board-row-name--anonymous ng-flex-center","data-tooltip":e(n)("enabled_privacy")},[I(y,{size:20,name:"anonymous"}),L(" "+c(e(n)("anonymous")),1)],8,st)):(a(),o("span",{key:2,class:"tw-cursor-pointer",onClick:$=>j(s)},c(s.username),9,at))])),e(i)?m("",!0):(a(),o("div",ot,[e(te)?(a(),o("span",nt,c(le(s.time)),1)):(a(),o("span",rt,c(e(xe)(s.time,{day:void 0,month:void 0,year:void 0})),1))])),e(i)?m("",!0):(a(),o("div",ct,[L(c(e(T)(C,s.bet_amount))+" ",1),d("img",{alt:"currency-icon",class:"tw-ml-[5px]",width:"17",height:"17",src:e(H)(s.currency)},null,8,it)])),e(i)?m("",!0):(a(),o("div",lt," x"+c(e(T)(C,s.multiplier.toFixed(2))),1)),d("div",{class:E(["board-row-currency",`board-row-currency--${R(s)?"more":"less"}`]),onClick:$=>ce(s)},[L(c(ue(s))+" ",1),d("img",{alt:"currency-icon",class:"tw-ml-[5px]",width:"17",height:"17",src:e(H)(s.currency)},null,8,ut)],10,dt)],2))),128)):m("",!0)],64)):m("",!0)],64))),128))]),_:1})],!0)])]),_:3},8,["loading"]),_t])):(a(),N(w,{key:0,"class-list":"tw-mt-4"}))])])}}}),wt=Ae(mt,[["__scopeId","data-v-8fddff60"]]);export{wt as _};
