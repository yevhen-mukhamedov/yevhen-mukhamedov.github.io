var la=Object.defineProperty;var ha=(n,t,e)=>t in n?la(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var fe=(n,t,e)=>(ha(n,typeof t!="symbol"?t+"":t,e),e);import{_ as da,a as pa}from"./DIzpOUXX.js";import{_ as ga}from"./Cf_ozb67.js";import{_ as ma}from"./sQNTZNBq.js";import{j as pn,aS as mr,bM as ya,U as wa,bN as ba,bO as va,b8 as $e,b9 as Ti,bP as zs,V as xa,a0 as Sa,ab as Ba,aA as Ea,a1 as _a,i as Je,k as ka,l as Aa,o as Wr,f as Ia,x as ri,X as Dt,c as on,u as an,t as sr,b as ds,a as gr,K as ps,n as Ma}from"./JoFQSik9.js";import{u as Ra}from"./CXetEtI4.js";import{E as $s,P as Ta}from"./D9zo_Myw.js";import"./BdUp3nNt.js";import"./BKAhWZth.js";import"./BM2BYuY2.js";import"./D8aEg3BZ.js";import"./BZw8aVXh.js";import"./BK14r1T1.js";import"./C87lQMtF.js";import"./D-sCvmnZ.js";import"./B92FZ1g3.js";import"./RGGkZJYr.js";import"./DXxiuGCq.js";import"./BMBJnSAB.js";import"./CjsFN-o8.js";import"./1-N0yLDQ.js";import"./K-WBeQ-v.js";import"./56Y_7FHu.js";import"./R1J_LkVd.js";import"./L3qbADmP.js";import"./Cel6GgYv.js";import"./LijCuOwn.js";import"./BrvGPcun.js";import"./ClZaf3ID.js";import"./DTX8-FfK.js";import"./DdIClELx.js";import"./Bcnv4IFf.js";import"./DJse-9-j.js";import"./D0zd4JXZ.js";import"./Bxl7epld.js";import"./3N86B1rU.js";import"./CXQSc-M8.js";import"./DG4EeLIg.js";import"./B3BteicU.js";import"./DiZsDeCV.js";import"./BQxgWOyN.js";import"./D8kn6U6N.js";import"./ElL4sWVy.js";import"./CkHyjaJP.js";import"./Bi6GOjoi.js";import"./R92wxnHx.js";function La(n,t,e){const[r={},s]=typeof t=="string"?[{},t]:[t,e],i=pn(()=>mr(n)),o=r.key||ya([s,typeof i.value=="string"?i.value:"",...Ca(r)]);if(!o||typeof o!="string")throw new TypeError("[nuxt] [useFetch] key must be a string: "+o);if(!n)throw new Error("[nuxt] [useFetch] request is missing.");const c=o===s?"$f"+o:o;if(!r.baseURL&&typeof i.value=="string"&&i.value[0]==="/"&&i.value[1]==="/")throw new Error('[nuxt] [useFetch] the request URL must not start with "//".');const{server:d,lazy:S,default:E,transform:A,pick:P,watch:M,immediate:T,getCachedData:k,deep:R,dedupe:F,...D}=r,O=wa({...ba,...D,cache:typeof r.cache=="boolean"?void 0:r.cache}),W={server:d,lazy:S,default:E,transform:A,pick:P,immediate:T,getCachedData:k,deep:R,dedupe:F,watch:M===!1?[]:[O,i,...M||[]]};let q;return Ra(c,()=>{var vt;(vt=q==null?void 0:q.abort)==null||vt.call(q),q=typeof AbortController<"u"?new AbortController:{};const K=mr(r.timeout);return K&&setTimeout(()=>q.abort(),K),(r.$fetch||globalThis.$fetch)(i.value,{signal:q.signal,...O})},W)}function Ca(n){var e;const t=[((e=mr(n.method))==null?void 0:e.toUpperCase())||"GET",mr(n.baseURL)];for(const r of[n.params||n.query]){const s=mr(r);if(!s)continue;const i={};for(const[o,c]of Object.entries(s))i[mr(o)]=mr(c);t.push(i)}return t}var Li={exports:{}};Li.exports;(function(n){(function(t,e){function r(B,a){if(!B)throw new Error(a||"Assertion failed")}function s(B,a){B.super_=a;var h=function(){};h.prototype=a.prototype,B.prototype=new h,B.prototype.constructor=B}function i(B,a,h){if(i.isBN(B))return B;this.negative=0,this.words=null,this.length=0,this.red=null,B!==null&&((a==="le"||a==="be")&&(h=a,a=10),this._init(B||0,a||10,h||"be"))}typeof t=="object"?t.exports=i:e.BN=i,i.BN=i,i.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=va.Buffer}catch{}i.isBN=function(a){return a instanceof i?!0:a!==null&&typeof a=="object"&&a.constructor.wordSize===i.wordSize&&Array.isArray(a.words)},i.max=function(a,h){return a.cmp(h)>0?a:h},i.min=function(a,h){return a.cmp(h)<0?a:h},i.prototype._init=function(a,h,g){if(typeof a=="number")return this._initNumber(a,h,g);if(typeof a=="object")return this._initArray(a,h,g);h==="hex"&&(h=16),r(h===(h|0)&&h>=2&&h<=36),a=a.toString().replace(/\s+/g,"");var v=0;a[0]==="-"&&(v++,this.negative=1),v<a.length&&(h===16?this._parseHex(a,v,g):(this._parseBase(a,h,v),g==="le"&&this._initArray(this.toArray(),h,g)))},i.prototype._initNumber=function(a,h,g){a<0&&(this.negative=1,a=-a),a<67108864?(this.words=[a&67108863],this.length=1):a<4503599627370496?(this.words=[a&67108863,a/67108864&67108863],this.length=2):(r(a<9007199254740992),this.words=[a&67108863,a/67108864&67108863,1],this.length=3),g==="le"&&this._initArray(this.toArray(),h,g)},i.prototype._initArray=function(a,h,g){if(r(typeof a.length=="number"),a.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(a.length/3),this.words=new Array(this.length);for(var v=0;v<this.length;v++)this.words[v]=0;var y,w,_=0;if(g==="be")for(v=a.length-1,y=0;v>=0;v-=3)w=a[v]|a[v-1]<<8|a[v-2]<<16,this.words[y]|=w<<_&67108863,this.words[y+1]=w>>>26-_&67108863,_+=24,_>=26&&(_-=26,y++);else if(g==="le")for(v=0,y=0;v<a.length;v+=3)w=a[v]|a[v+1]<<8|a[v+2]<<16,this.words[y]|=w<<_&67108863,this.words[y+1]=w>>>26-_&67108863,_+=24,_>=26&&(_-=26,y++);return this._strip()};function c(B,a){var h=B.charCodeAt(a);if(h>=48&&h<=57)return h-48;if(h>=65&&h<=70)return h-55;if(h>=97&&h<=102)return h-87;r(!1,"Invalid character in "+B)}function d(B,a,h){var g=c(B,h);return h-1>=a&&(g|=c(B,h-1)<<4),g}i.prototype._parseHex=function(a,h,g){this.length=Math.ceil((a.length-h)/6),this.words=new Array(this.length);for(var v=0;v<this.length;v++)this.words[v]=0;var y=0,w=0,_;if(g==="be")for(v=a.length-1;v>=h;v-=2)_=d(a,h,v)<<y,this.words[w]|=_&67108863,y>=18?(y-=18,w+=1,this.words[w]|=_>>>26):y+=8;else{var m=a.length-h;for(v=m%2===0?h+1:h;v<a.length;v+=2)_=d(a,h,v)<<y,this.words[w]|=_&67108863,y>=18?(y-=18,w+=1,this.words[w]|=_>>>26):y+=8}this._strip()};function S(B,a,h,g){for(var v=0,y=0,w=Math.min(B.length,h),_=a;_<w;_++){var m=B.charCodeAt(_)-48;v*=g,m>=49?y=m-49+10:m>=17?y=m-17+10:y=m,r(m>=0&&y<g,"Invalid character"),v+=y}return v}i.prototype._parseBase=function(a,h,g){this.words=[0],this.length=1;for(var v=0,y=1;y<=67108863;y*=h)v++;v--,y=y/h|0;for(var w=a.length-g,_=w%v,m=Math.min(w,w-_)+g,f=0,x=g;x<m;x+=v)f=S(a,x,x+v,h),this.imuln(y),this.words[0]+f<67108864?this.words[0]+=f:this._iaddn(f);if(_!==0){var H=1;for(f=S(a,x,a.length,h),x=0;x<_;x++)H*=h;this.imuln(H),this.words[0]+f<67108864?this.words[0]+=f:this._iaddn(f)}this._strip()},i.prototype.copy=function(a){a.words=new Array(this.length);for(var h=0;h<this.length;h++)a.words[h]=this.words[h];a.length=this.length,a.negative=this.negative,a.red=this.red};function E(B,a){B.words=a.words,B.length=a.length,B.negative=a.negative,B.red=a.red}if(i.prototype._move=function(a){E(a,this)},i.prototype.clone=function(){var a=new i(null);return this.copy(a),a},i.prototype._expand=function(a){for(;this.length<a;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=A}catch{i.prototype.inspect=A}else i.prototype.inspect=A;function A(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var P=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],M=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],T=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(a,h){a=a||10,h=h|0||1;var g;if(a===16||a==="hex"){g="";for(var v=0,y=0,w=0;w<this.length;w++){var _=this.words[w],m=((_<<v|y)&16777215).toString(16);y=_>>>24-v&16777215,v+=2,v>=26&&(v-=26,w--),y!==0||w!==this.length-1?g=P[6-m.length]+m+g:g=m+g}for(y!==0&&(g=y.toString(16)+g);g.length%h!==0;)g="0"+g;return this.negative!==0&&(g="-"+g),g}if(a===(a|0)&&a>=2&&a<=36){var f=M[a],x=T[a];g="";var H=this.clone();for(H.negative=0;!H.isZero();){var V=H.modrn(x).toString(a);H=H.idivn(x),H.isZero()?g=V+g:g=P[f-V.length]+V+g}for(this.isZero()&&(g="0"+g);g.length%h!==0;)g="0"+g;return this.negative!==0&&(g="-"+g),g}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var a=this.words[0];return this.length===2?a+=this.words[1]*67108864:this.length===3&&this.words[2]===1?a+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-a:a},i.prototype.toJSON=function(){return this.toString(16,2)},o&&(i.prototype.toBuffer=function(a,h){return this.toArrayLike(o,a,h)}),i.prototype.toArray=function(a,h){return this.toArrayLike(Array,a,h)};var k=function(a,h){return a.allocUnsafe?a.allocUnsafe(h):new a(h)};i.prototype.toArrayLike=function(a,h,g){this._strip();var v=this.byteLength(),y=g||Math.max(1,v);r(v<=y,"byte array longer than desired length"),r(y>0,"Requested array length <= 0");var w=k(a,y),_=h==="le"?"LE":"BE";return this["_toArrayLike"+_](w,v),w},i.prototype._toArrayLikeLE=function(a,h){for(var g=0,v=0,y=0,w=0;y<this.length;y++){var _=this.words[y]<<w|v;a[g++]=_&255,g<a.length&&(a[g++]=_>>8&255),g<a.length&&(a[g++]=_>>16&255),w===6?(g<a.length&&(a[g++]=_>>24&255),v=0,w=0):(v=_>>>24,w+=2)}if(g<a.length)for(a[g++]=v;g<a.length;)a[g++]=0},i.prototype._toArrayLikeBE=function(a,h){for(var g=a.length-1,v=0,y=0,w=0;y<this.length;y++){var _=this.words[y]<<w|v;a[g--]=_&255,g>=0&&(a[g--]=_>>8&255),g>=0&&(a[g--]=_>>16&255),w===6?(g>=0&&(a[g--]=_>>24&255),v=0,w=0):(v=_>>>24,w+=2)}if(g>=0)for(a[g--]=v;g>=0;)a[g--]=0},Math.clz32?i.prototype._countBits=function(a){return 32-Math.clz32(a)}:i.prototype._countBits=function(a){var h=a,g=0;return h>=4096&&(g+=13,h>>>=13),h>=64&&(g+=7,h>>>=7),h>=8&&(g+=4,h>>>=4),h>=2&&(g+=2,h>>>=2),g+h},i.prototype._zeroBits=function(a){if(a===0)return 26;var h=a,g=0;return h&8191||(g+=13,h>>>=13),h&127||(g+=7,h>>>=7),h&15||(g+=4,h>>>=4),h&3||(g+=2,h>>>=2),h&1||g++,g},i.prototype.bitLength=function(){var a=this.words[this.length-1],h=this._countBits(a);return(this.length-1)*26+h};function R(B){for(var a=new Array(B.bitLength()),h=0;h<a.length;h++){var g=h/26|0,v=h%26;a[h]=B.words[g]>>>v&1}return a}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var a=0,h=0;h<this.length;h++){var g=this._zeroBits(this.words[h]);if(a+=g,g!==26)break}return a},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(a){return this.negative!==0?this.abs().inotn(a).iaddn(1):this.clone()},i.prototype.fromTwos=function(a){return this.testn(a-1)?this.notn(a).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(a){for(;this.length<a.length;)this.words[this.length++]=0;for(var h=0;h<a.length;h++)this.words[h]=this.words[h]|a.words[h];return this._strip()},i.prototype.ior=function(a){return r((this.negative|a.negative)===0),this.iuor(a)},i.prototype.or=function(a){return this.length>a.length?this.clone().ior(a):a.clone().ior(this)},i.prototype.uor=function(a){return this.length>a.length?this.clone().iuor(a):a.clone().iuor(this)},i.prototype.iuand=function(a){var h;this.length>a.length?h=a:h=this;for(var g=0;g<h.length;g++)this.words[g]=this.words[g]&a.words[g];return this.length=h.length,this._strip()},i.prototype.iand=function(a){return r((this.negative|a.negative)===0),this.iuand(a)},i.prototype.and=function(a){return this.length>a.length?this.clone().iand(a):a.clone().iand(this)},i.prototype.uand=function(a){return this.length>a.length?this.clone().iuand(a):a.clone().iuand(this)},i.prototype.iuxor=function(a){var h,g;this.length>a.length?(h=this,g=a):(h=a,g=this);for(var v=0;v<g.length;v++)this.words[v]=h.words[v]^g.words[v];if(this!==h)for(;v<h.length;v++)this.words[v]=h.words[v];return this.length=h.length,this._strip()},i.prototype.ixor=function(a){return r((this.negative|a.negative)===0),this.iuxor(a)},i.prototype.xor=function(a){return this.length>a.length?this.clone().ixor(a):a.clone().ixor(this)},i.prototype.uxor=function(a){return this.length>a.length?this.clone().iuxor(a):a.clone().iuxor(this)},i.prototype.inotn=function(a){r(typeof a=="number"&&a>=0);var h=Math.ceil(a/26)|0,g=a%26;this._expand(h),g>0&&h--;for(var v=0;v<h;v++)this.words[v]=~this.words[v]&67108863;return g>0&&(this.words[v]=~this.words[v]&67108863>>26-g),this._strip()},i.prototype.notn=function(a){return this.clone().inotn(a)},i.prototype.setn=function(a,h){r(typeof a=="number"&&a>=0);var g=a/26|0,v=a%26;return this._expand(g+1),h?this.words[g]=this.words[g]|1<<v:this.words[g]=this.words[g]&~(1<<v),this._strip()},i.prototype.iadd=function(a){var h;if(this.negative!==0&&a.negative===0)return this.negative=0,h=this.isub(a),this.negative^=1,this._normSign();if(this.negative===0&&a.negative!==0)return a.negative=0,h=this.isub(a),a.negative=1,h._normSign();var g,v;this.length>a.length?(g=this,v=a):(g=a,v=this);for(var y=0,w=0;w<v.length;w++)h=(g.words[w]|0)+(v.words[w]|0)+y,this.words[w]=h&67108863,y=h>>>26;for(;y!==0&&w<g.length;w++)h=(g.words[w]|0)+y,this.words[w]=h&67108863,y=h>>>26;if(this.length=g.length,y!==0)this.words[this.length]=y,this.length++;else if(g!==this)for(;w<g.length;w++)this.words[w]=g.words[w];return this},i.prototype.add=function(a){var h;return a.negative!==0&&this.negative===0?(a.negative=0,h=this.sub(a),a.negative^=1,h):a.negative===0&&this.negative!==0?(this.negative=0,h=a.sub(this),this.negative=1,h):this.length>a.length?this.clone().iadd(a):a.clone().iadd(this)},i.prototype.isub=function(a){if(a.negative!==0){a.negative=0;var h=this.iadd(a);return a.negative=1,h._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(a),this.negative=1,this._normSign();var g=this.cmp(a);if(g===0)return this.negative=0,this.length=1,this.words[0]=0,this;var v,y;g>0?(v=this,y=a):(v=a,y=this);for(var w=0,_=0;_<y.length;_++)h=(v.words[_]|0)-(y.words[_]|0)+w,w=h>>26,this.words[_]=h&67108863;for(;w!==0&&_<v.length;_++)h=(v.words[_]|0)+w,w=h>>26,this.words[_]=h&67108863;if(w===0&&_<v.length&&v!==this)for(;_<v.length;_++)this.words[_]=v.words[_];return this.length=Math.max(this.length,_),v!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(a){return this.clone().isub(a)};function F(B,a,h){h.negative=a.negative^B.negative;var g=B.length+a.length|0;h.length=g,g=g-1|0;var v=B.words[0]|0,y=a.words[0]|0,w=v*y,_=w&67108863,m=w/67108864|0;h.words[0]=_;for(var f=1;f<g;f++){for(var x=m>>>26,H=m&67108863,V=Math.min(f,a.length-1),G=Math.max(0,f-B.length+1);G<=V;G++){var it=f-G|0;v=B.words[it]|0,y=a.words[G]|0,w=v*y+H,x+=w/67108864|0,H=w&67108863}h.words[f]=H|0,m=x|0}return m!==0?h.words[f]=m|0:h.length--,h._strip()}var D=function(a,h,g){var v=a.words,y=h.words,w=g.words,_=0,m,f,x,H=v[0]|0,V=H&8191,G=H>>>13,it=v[1]|0,rt=it&8191,ot=it>>>13,Pt=v[2]|0,pt=Pt&8191,yt=Pt>>>13,Bt=v[3]|0,wt=Bt&8191,_t=Bt>>>13,Ke=v[4]|0,At=Ke&8191,Ut=Ke>>>13,Rr=v[5]|0,Tt=Rr&8191,It=Rr>>>13,ye=v[6]|0,Mt=ye&8191,Rt=ye>>>13,Ee=v[7]|0,Lt=Ee&8191,p=Ee>>>13,u=v[8]|0,l=u&8191,b=u>>>13,I=v[9]|0,L=I&8191,N=I>>>13,ht=y[0]|0,lt=ht&8191,ut=ht>>>13,Ct=y[1]|0,ct=Ct&8191,Kt=Ct>>>13,ss=y[2]|0,Wt=ss&8191,Vt=ss>>>13,os=y[3]|0,Gt=os&8191,jt=os>>>13,as=y[4]|0,Zt=as&8191,Yt=as>>>13,cs=y[5]|0,Xt=cs&8191,Jt=cs>>>13,us=y[6]|0,Qt=us&8191,te=us>>>13,fs=y[7]|0,ee=fs&8191,re=fs>>>13,ls=y[8]|0,ne=ls&8191,ie=ls>>>13,hs=y[9]|0,se=hs&8191,oe=hs>>>13;g.negative=a.negative^h.negative,g.length=19,m=Math.imul(V,lt),f=Math.imul(V,ut),f=f+Math.imul(G,lt)|0,x=Math.imul(G,ut);var Pn=(_+m|0)+((f&8191)<<13)|0;_=(x+(f>>>13)|0)+(Pn>>>26)|0,Pn&=67108863,m=Math.imul(rt,lt),f=Math.imul(rt,ut),f=f+Math.imul(ot,lt)|0,x=Math.imul(ot,ut),m=m+Math.imul(V,ct)|0,f=f+Math.imul(V,Kt)|0,f=f+Math.imul(G,ct)|0,x=x+Math.imul(G,Kt)|0;var On=(_+m|0)+((f&8191)<<13)|0;_=(x+(f>>>13)|0)+(On>>>26)|0,On&=67108863,m=Math.imul(pt,lt),f=Math.imul(pt,ut),f=f+Math.imul(yt,lt)|0,x=Math.imul(yt,ut),m=m+Math.imul(rt,ct)|0,f=f+Math.imul(rt,Kt)|0,f=f+Math.imul(ot,ct)|0,x=x+Math.imul(ot,Kt)|0,m=m+Math.imul(V,Wt)|0,f=f+Math.imul(V,Vt)|0,f=f+Math.imul(G,Wt)|0,x=x+Math.imul(G,Vt)|0;var qn=(_+m|0)+((f&8191)<<13)|0;_=(x+(f>>>13)|0)+(qn>>>26)|0,qn&=67108863,m=Math.imul(wt,lt),f=Math.imul(wt,ut),f=f+Math.imul(_t,lt)|0,x=Math.imul(_t,ut),m=m+Math.imul(pt,ct)|0,f=f+Math.imul(pt,Kt)|0,f=f+Math.imul(yt,ct)|0,x=x+Math.imul(yt,Kt)|0,m=m+Math.imul(rt,Wt)|0,f=f+Math.imul(rt,Vt)|0,f=f+Math.imul(ot,Wt)|0,x=x+Math.imul(ot,Vt)|0,m=m+Math.imul(V,Gt)|0,f=f+Math.imul(V,jt)|0,f=f+Math.imul(G,Gt)|0,x=x+Math.imul(G,jt)|0;var Dn=(_+m|0)+((f&8191)<<13)|0;_=(x+(f>>>13)|0)+(Dn>>>26)|0,Dn&=67108863,m=Math.imul(At,lt),f=Math.imul(At,ut),f=f+Math.imul(Ut,lt)|0,x=Math.imul(Ut,ut),m=m+Math.imul(wt,ct)|0,f=f+Math.imul(wt,Kt)|0,f=f+Math.imul(_t,ct)|0,x=x+Math.imul(_t,Kt)|0,m=m+Math.imul(pt,Wt)|0,f=f+Math.imul(pt,Vt)|0,f=f+Math.imul(yt,Wt)|0,x=x+Math.imul(yt,Vt)|0,m=m+Math.imul(rt,Gt)|0,f=f+Math.imul(rt,jt)|0,f=f+Math.imul(ot,Gt)|0,x=x+Math.imul(ot,jt)|0,m=m+Math.imul(V,Zt)|0,f=f+Math.imul(V,Yt)|0,f=f+Math.imul(G,Zt)|0,x=x+Math.imul(G,Yt)|0;var zn=(_+m|0)+((f&8191)<<13)|0;_=(x+(f>>>13)|0)+(zn>>>26)|0,zn&=67108863,m=Math.imul(Tt,lt),f=Math.imul(Tt,ut),f=f+Math.imul(It,lt)|0,x=Math.imul(It,ut),m=m+Math.imul(At,ct)|0,f=f+Math.imul(At,Kt)|0,f=f+Math.imul(Ut,ct)|0,x=x+Math.imul(Ut,Kt)|0,m=m+Math.imul(wt,Wt)|0,f=f+Math.imul(wt,Vt)|0,f=f+Math.imul(_t,Wt)|0,x=x+Math.imul(_t,Vt)|0,m=m+Math.imul(pt,Gt)|0,f=f+Math.imul(pt,jt)|0,f=f+Math.imul(yt,Gt)|0,x=x+Math.imul(yt,jt)|0,m=m+Math.imul(rt,Zt)|0,f=f+Math.imul(rt,Yt)|0,f=f+Math.imul(ot,Zt)|0,x=x+Math.imul(ot,Yt)|0,m=m+Math.imul(V,Xt)|0,f=f+Math.imul(V,Jt)|0,f=f+Math.imul(G,Xt)|0,x=x+Math.imul(G,Jt)|0;var $n=(_+m|0)+((f&8191)<<13)|0;_=(x+(f>>>13)|0)+($n>>>26)|0,$n&=67108863,m=Math.imul(Mt,lt),f=Math.imul(Mt,ut),f=f+Math.imul(Rt,lt)|0,x=Math.imul(Rt,ut),m=m+Math.imul(Tt,ct)|0,f=f+Math.imul(Tt,Kt)|0,f=f+Math.imul(It,ct)|0,x=x+Math.imul(It,Kt)|0,m=m+Math.imul(At,Wt)|0,f=f+Math.imul(At,Vt)|0,f=f+Math.imul(Ut,Wt)|0,x=x+Math.imul(Ut,Vt)|0,m=m+Math.imul(wt,Gt)|0,f=f+Math.imul(wt,jt)|0,f=f+Math.imul(_t,Gt)|0,x=x+Math.imul(_t,jt)|0,m=m+Math.imul(pt,Zt)|0,f=f+Math.imul(pt,Yt)|0,f=f+Math.imul(yt,Zt)|0,x=x+Math.imul(yt,Yt)|0,m=m+Math.imul(rt,Xt)|0,f=f+Math.imul(rt,Jt)|0,f=f+Math.imul(ot,Xt)|0,x=x+Math.imul(ot,Jt)|0,m=m+Math.imul(V,Qt)|0,f=f+Math.imul(V,te)|0,f=f+Math.imul(G,Qt)|0,x=x+Math.imul(G,te)|0;var Hn=(_+m|0)+((f&8191)<<13)|0;_=(x+(f>>>13)|0)+(Hn>>>26)|0,Hn&=67108863,m=Math.imul(Lt,lt),f=Math.imul(Lt,ut),f=f+Math.imul(p,lt)|0,x=Math.imul(p,ut),m=m+Math.imul(Mt,ct)|0,f=f+Math.imul(Mt,Kt)|0,f=f+Math.imul(Rt,ct)|0,x=x+Math.imul(Rt,Kt)|0,m=m+Math.imul(Tt,Wt)|0,f=f+Math.imul(Tt,Vt)|0,f=f+Math.imul(It,Wt)|0,x=x+Math.imul(It,Vt)|0,m=m+Math.imul(At,Gt)|0,f=f+Math.imul(At,jt)|0,f=f+Math.imul(Ut,Gt)|0,x=x+Math.imul(Ut,jt)|0,m=m+Math.imul(wt,Zt)|0,f=f+Math.imul(wt,Yt)|0,f=f+Math.imul(_t,Zt)|0,x=x+Math.imul(_t,Yt)|0,m=m+Math.imul(pt,Xt)|0,f=f+Math.imul(pt,Jt)|0,f=f+Math.imul(yt,Xt)|0,x=x+Math.imul(yt,Jt)|0,m=m+Math.imul(rt,Qt)|0,f=f+Math.imul(rt,te)|0,f=f+Math.imul(ot,Qt)|0,x=x+Math.imul(ot,te)|0,m=m+Math.imul(V,ee)|0,f=f+Math.imul(V,re)|0,f=f+Math.imul(G,ee)|0,x=x+Math.imul(G,re)|0;var Kn=(_+m|0)+((f&8191)<<13)|0;_=(x+(f>>>13)|0)+(Kn>>>26)|0,Kn&=67108863,m=Math.imul(l,lt),f=Math.imul(l,ut),f=f+Math.imul(b,lt)|0,x=Math.imul(b,ut),m=m+Math.imul(Lt,ct)|0,f=f+Math.imul(Lt,Kt)|0,f=f+Math.imul(p,ct)|0,x=x+Math.imul(p,Kt)|0,m=m+Math.imul(Mt,Wt)|0,f=f+Math.imul(Mt,Vt)|0,f=f+Math.imul(Rt,Wt)|0,x=x+Math.imul(Rt,Vt)|0,m=m+Math.imul(Tt,Gt)|0,f=f+Math.imul(Tt,jt)|0,f=f+Math.imul(It,Gt)|0,x=x+Math.imul(It,jt)|0,m=m+Math.imul(At,Zt)|0,f=f+Math.imul(At,Yt)|0,f=f+Math.imul(Ut,Zt)|0,x=x+Math.imul(Ut,Yt)|0,m=m+Math.imul(wt,Xt)|0,f=f+Math.imul(wt,Jt)|0,f=f+Math.imul(_t,Xt)|0,x=x+Math.imul(_t,Jt)|0,m=m+Math.imul(pt,Qt)|0,f=f+Math.imul(pt,te)|0,f=f+Math.imul(yt,Qt)|0,x=x+Math.imul(yt,te)|0,m=m+Math.imul(rt,ee)|0,f=f+Math.imul(rt,re)|0,f=f+Math.imul(ot,ee)|0,x=x+Math.imul(ot,re)|0,m=m+Math.imul(V,ne)|0,f=f+Math.imul(V,ie)|0,f=f+Math.imul(G,ne)|0,x=x+Math.imul(G,ie)|0;var Wn=(_+m|0)+((f&8191)<<13)|0;_=(x+(f>>>13)|0)+(Wn>>>26)|0,Wn&=67108863,m=Math.imul(L,lt),f=Math.imul(L,ut),f=f+Math.imul(N,lt)|0,x=Math.imul(N,ut),m=m+Math.imul(l,ct)|0,f=f+Math.imul(l,Kt)|0,f=f+Math.imul(b,ct)|0,x=x+Math.imul(b,Kt)|0,m=m+Math.imul(Lt,Wt)|0,f=f+Math.imul(Lt,Vt)|0,f=f+Math.imul(p,Wt)|0,x=x+Math.imul(p,Vt)|0,m=m+Math.imul(Mt,Gt)|0,f=f+Math.imul(Mt,jt)|0,f=f+Math.imul(Rt,Gt)|0,x=x+Math.imul(Rt,jt)|0,m=m+Math.imul(Tt,Zt)|0,f=f+Math.imul(Tt,Yt)|0,f=f+Math.imul(It,Zt)|0,x=x+Math.imul(It,Yt)|0,m=m+Math.imul(At,Xt)|0,f=f+Math.imul(At,Jt)|0,f=f+Math.imul(Ut,Xt)|0,x=x+Math.imul(Ut,Jt)|0,m=m+Math.imul(wt,Qt)|0,f=f+Math.imul(wt,te)|0,f=f+Math.imul(_t,Qt)|0,x=x+Math.imul(_t,te)|0,m=m+Math.imul(pt,ee)|0,f=f+Math.imul(pt,re)|0,f=f+Math.imul(yt,ee)|0,x=x+Math.imul(yt,re)|0,m=m+Math.imul(rt,ne)|0,f=f+Math.imul(rt,ie)|0,f=f+Math.imul(ot,ne)|0,x=x+Math.imul(ot,ie)|0,m=m+Math.imul(V,se)|0,f=f+Math.imul(V,oe)|0,f=f+Math.imul(G,se)|0,x=x+Math.imul(G,oe)|0;var Vn=(_+m|0)+((f&8191)<<13)|0;_=(x+(f>>>13)|0)+(Vn>>>26)|0,Vn&=67108863,m=Math.imul(L,ct),f=Math.imul(L,Kt),f=f+Math.imul(N,ct)|0,x=Math.imul(N,Kt),m=m+Math.imul(l,Wt)|0,f=f+Math.imul(l,Vt)|0,f=f+Math.imul(b,Wt)|0,x=x+Math.imul(b,Vt)|0,m=m+Math.imul(Lt,Gt)|0,f=f+Math.imul(Lt,jt)|0,f=f+Math.imul(p,Gt)|0,x=x+Math.imul(p,jt)|0,m=m+Math.imul(Mt,Zt)|0,f=f+Math.imul(Mt,Yt)|0,f=f+Math.imul(Rt,Zt)|0,x=x+Math.imul(Rt,Yt)|0,m=m+Math.imul(Tt,Xt)|0,f=f+Math.imul(Tt,Jt)|0,f=f+Math.imul(It,Xt)|0,x=x+Math.imul(It,Jt)|0,m=m+Math.imul(At,Qt)|0,f=f+Math.imul(At,te)|0,f=f+Math.imul(Ut,Qt)|0,x=x+Math.imul(Ut,te)|0,m=m+Math.imul(wt,ee)|0,f=f+Math.imul(wt,re)|0,f=f+Math.imul(_t,ee)|0,x=x+Math.imul(_t,re)|0,m=m+Math.imul(pt,ne)|0,f=f+Math.imul(pt,ie)|0,f=f+Math.imul(yt,ne)|0,x=x+Math.imul(yt,ie)|0,m=m+Math.imul(rt,se)|0,f=f+Math.imul(rt,oe)|0,f=f+Math.imul(ot,se)|0,x=x+Math.imul(ot,oe)|0;var Gn=(_+m|0)+((f&8191)<<13)|0;_=(x+(f>>>13)|0)+(Gn>>>26)|0,Gn&=67108863,m=Math.imul(L,Wt),f=Math.imul(L,Vt),f=f+Math.imul(N,Wt)|0,x=Math.imul(N,Vt),m=m+Math.imul(l,Gt)|0,f=f+Math.imul(l,jt)|0,f=f+Math.imul(b,Gt)|0,x=x+Math.imul(b,jt)|0,m=m+Math.imul(Lt,Zt)|0,f=f+Math.imul(Lt,Yt)|0,f=f+Math.imul(p,Zt)|0,x=x+Math.imul(p,Yt)|0,m=m+Math.imul(Mt,Xt)|0,f=f+Math.imul(Mt,Jt)|0,f=f+Math.imul(Rt,Xt)|0,x=x+Math.imul(Rt,Jt)|0,m=m+Math.imul(Tt,Qt)|0,f=f+Math.imul(Tt,te)|0,f=f+Math.imul(It,Qt)|0,x=x+Math.imul(It,te)|0,m=m+Math.imul(At,ee)|0,f=f+Math.imul(At,re)|0,f=f+Math.imul(Ut,ee)|0,x=x+Math.imul(Ut,re)|0,m=m+Math.imul(wt,ne)|0,f=f+Math.imul(wt,ie)|0,f=f+Math.imul(_t,ne)|0,x=x+Math.imul(_t,ie)|0,m=m+Math.imul(pt,se)|0,f=f+Math.imul(pt,oe)|0,f=f+Math.imul(yt,se)|0,x=x+Math.imul(yt,oe)|0;var jn=(_+m|0)+((f&8191)<<13)|0;_=(x+(f>>>13)|0)+(jn>>>26)|0,jn&=67108863,m=Math.imul(L,Gt),f=Math.imul(L,jt),f=f+Math.imul(N,Gt)|0,x=Math.imul(N,jt),m=m+Math.imul(l,Zt)|0,f=f+Math.imul(l,Yt)|0,f=f+Math.imul(b,Zt)|0,x=x+Math.imul(b,Yt)|0,m=m+Math.imul(Lt,Xt)|0,f=f+Math.imul(Lt,Jt)|0,f=f+Math.imul(p,Xt)|0,x=x+Math.imul(p,Jt)|0,m=m+Math.imul(Mt,Qt)|0,f=f+Math.imul(Mt,te)|0,f=f+Math.imul(Rt,Qt)|0,x=x+Math.imul(Rt,te)|0,m=m+Math.imul(Tt,ee)|0,f=f+Math.imul(Tt,re)|0,f=f+Math.imul(It,ee)|0,x=x+Math.imul(It,re)|0,m=m+Math.imul(At,ne)|0,f=f+Math.imul(At,ie)|0,f=f+Math.imul(Ut,ne)|0,x=x+Math.imul(Ut,ie)|0,m=m+Math.imul(wt,se)|0,f=f+Math.imul(wt,oe)|0,f=f+Math.imul(_t,se)|0,x=x+Math.imul(_t,oe)|0;var Zn=(_+m|0)+((f&8191)<<13)|0;_=(x+(f>>>13)|0)+(Zn>>>26)|0,Zn&=67108863,m=Math.imul(L,Zt),f=Math.imul(L,Yt),f=f+Math.imul(N,Zt)|0,x=Math.imul(N,Yt),m=m+Math.imul(l,Xt)|0,f=f+Math.imul(l,Jt)|0,f=f+Math.imul(b,Xt)|0,x=x+Math.imul(b,Jt)|0,m=m+Math.imul(Lt,Qt)|0,f=f+Math.imul(Lt,te)|0,f=f+Math.imul(p,Qt)|0,x=x+Math.imul(p,te)|0,m=m+Math.imul(Mt,ee)|0,f=f+Math.imul(Mt,re)|0,f=f+Math.imul(Rt,ee)|0,x=x+Math.imul(Rt,re)|0,m=m+Math.imul(Tt,ne)|0,f=f+Math.imul(Tt,ie)|0,f=f+Math.imul(It,ne)|0,x=x+Math.imul(It,ie)|0,m=m+Math.imul(At,se)|0,f=f+Math.imul(At,oe)|0,f=f+Math.imul(Ut,se)|0,x=x+Math.imul(Ut,oe)|0;var Yn=(_+m|0)+((f&8191)<<13)|0;_=(x+(f>>>13)|0)+(Yn>>>26)|0,Yn&=67108863,m=Math.imul(L,Xt),f=Math.imul(L,Jt),f=f+Math.imul(N,Xt)|0,x=Math.imul(N,Jt),m=m+Math.imul(l,Qt)|0,f=f+Math.imul(l,te)|0,f=f+Math.imul(b,Qt)|0,x=x+Math.imul(b,te)|0,m=m+Math.imul(Lt,ee)|0,f=f+Math.imul(Lt,re)|0,f=f+Math.imul(p,ee)|0,x=x+Math.imul(p,re)|0,m=m+Math.imul(Mt,ne)|0,f=f+Math.imul(Mt,ie)|0,f=f+Math.imul(Rt,ne)|0,x=x+Math.imul(Rt,ie)|0,m=m+Math.imul(Tt,se)|0,f=f+Math.imul(Tt,oe)|0,f=f+Math.imul(It,se)|0,x=x+Math.imul(It,oe)|0;var Xn=(_+m|0)+((f&8191)<<13)|0;_=(x+(f>>>13)|0)+(Xn>>>26)|0,Xn&=67108863,m=Math.imul(L,Qt),f=Math.imul(L,te),f=f+Math.imul(N,Qt)|0,x=Math.imul(N,te),m=m+Math.imul(l,ee)|0,f=f+Math.imul(l,re)|0,f=f+Math.imul(b,ee)|0,x=x+Math.imul(b,re)|0,m=m+Math.imul(Lt,ne)|0,f=f+Math.imul(Lt,ie)|0,f=f+Math.imul(p,ne)|0,x=x+Math.imul(p,ie)|0,m=m+Math.imul(Mt,se)|0,f=f+Math.imul(Mt,oe)|0,f=f+Math.imul(Rt,se)|0,x=x+Math.imul(Rt,oe)|0;var Jn=(_+m|0)+((f&8191)<<13)|0;_=(x+(f>>>13)|0)+(Jn>>>26)|0,Jn&=67108863,m=Math.imul(L,ee),f=Math.imul(L,re),f=f+Math.imul(N,ee)|0,x=Math.imul(N,re),m=m+Math.imul(l,ne)|0,f=f+Math.imul(l,ie)|0,f=f+Math.imul(b,ne)|0,x=x+Math.imul(b,ie)|0,m=m+Math.imul(Lt,se)|0,f=f+Math.imul(Lt,oe)|0,f=f+Math.imul(p,se)|0,x=x+Math.imul(p,oe)|0;var Qn=(_+m|0)+((f&8191)<<13)|0;_=(x+(f>>>13)|0)+(Qn>>>26)|0,Qn&=67108863,m=Math.imul(L,ne),f=Math.imul(L,ie),f=f+Math.imul(N,ne)|0,x=Math.imul(N,ie),m=m+Math.imul(l,se)|0,f=f+Math.imul(l,oe)|0,f=f+Math.imul(b,se)|0,x=x+Math.imul(b,oe)|0;var ti=(_+m|0)+((f&8191)<<13)|0;_=(x+(f>>>13)|0)+(ti>>>26)|0,ti&=67108863,m=Math.imul(L,se),f=Math.imul(L,oe),f=f+Math.imul(N,se)|0,x=Math.imul(N,oe);var ei=(_+m|0)+((f&8191)<<13)|0;return _=(x+(f>>>13)|0)+(ei>>>26)|0,ei&=67108863,w[0]=Pn,w[1]=On,w[2]=qn,w[3]=Dn,w[4]=zn,w[5]=$n,w[6]=Hn,w[7]=Kn,w[8]=Wn,w[9]=Vn,w[10]=Gn,w[11]=jn,w[12]=Zn,w[13]=Yn,w[14]=Xn,w[15]=Jn,w[16]=Qn,w[17]=ti,w[18]=ei,_!==0&&(w[19]=_,g.length++),g};Math.imul||(D=F);function O(B,a,h){h.negative=a.negative^B.negative,h.length=B.length+a.length;for(var g=0,v=0,y=0;y<h.length-1;y++){var w=v;v=0;for(var _=g&67108863,m=Math.min(y,a.length-1),f=Math.max(0,y-B.length+1);f<=m;f++){var x=y-f,H=B.words[x]|0,V=a.words[f]|0,G=H*V,it=G&67108863;w=w+(G/67108864|0)|0,it=it+_|0,_=it&67108863,w=w+(it>>>26)|0,v+=w>>>26,w&=67108863}h.words[y]=_,g=w,w=v}return g!==0?h.words[y]=g:h.length--,h._strip()}function W(B,a,h){return O(B,a,h)}i.prototype.mulTo=function(a,h){var g,v=this.length+a.length;return this.length===10&&a.length===10?g=D(this,a,h):v<63?g=F(this,a,h):v<1024?g=O(this,a,h):g=W(this,a,h),g},i.prototype.mul=function(a){var h=new i(null);return h.words=new Array(this.length+a.length),this.mulTo(a,h)},i.prototype.mulf=function(a){var h=new i(null);return h.words=new Array(this.length+a.length),W(this,a,h)},i.prototype.imul=function(a){return this.clone().mulTo(a,this)},i.prototype.imuln=function(a){var h=a<0;h&&(a=-a),r(typeof a=="number"),r(a<67108864);for(var g=0,v=0;v<this.length;v++){var y=(this.words[v]|0)*a,w=(y&67108863)+(g&67108863);g>>=26,g+=y/67108864|0,g+=w>>>26,this.words[v]=w&67108863}return g!==0&&(this.words[v]=g,this.length++),h?this.ineg():this},i.prototype.muln=function(a){return this.clone().imuln(a)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(a){var h=R(a);if(h.length===0)return new i(1);for(var g=this,v=0;v<h.length&&h[v]===0;v++,g=g.sqr());if(++v<h.length)for(var y=g.sqr();v<h.length;v++,y=y.sqr())h[v]!==0&&(g=g.mul(y));return g},i.prototype.iushln=function(a){r(typeof a=="number"&&a>=0);var h=a%26,g=(a-h)/26,v=67108863>>>26-h<<26-h,y;if(h!==0){var w=0;for(y=0;y<this.length;y++){var _=this.words[y]&v,m=(this.words[y]|0)-_<<h;this.words[y]=m|w,w=_>>>26-h}w&&(this.words[y]=w,this.length++)}if(g!==0){for(y=this.length-1;y>=0;y--)this.words[y+g]=this.words[y];for(y=0;y<g;y++)this.words[y]=0;this.length+=g}return this._strip()},i.prototype.ishln=function(a){return r(this.negative===0),this.iushln(a)},i.prototype.iushrn=function(a,h,g){r(typeof a=="number"&&a>=0);var v;h?v=(h-h%26)/26:v=0;var y=a%26,w=Math.min((a-y)/26,this.length),_=67108863^67108863>>>y<<y,m=g;if(v-=w,v=Math.max(0,v),m){for(var f=0;f<w;f++)m.words[f]=this.words[f];m.length=w}if(w!==0)if(this.length>w)for(this.length-=w,f=0;f<this.length;f++)this.words[f]=this.words[f+w];else this.words[0]=0,this.length=1;var x=0;for(f=this.length-1;f>=0&&(x!==0||f>=v);f--){var H=this.words[f]|0;this.words[f]=x<<26-y|H>>>y,x=H&_}return m&&x!==0&&(m.words[m.length++]=x),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(a,h,g){return r(this.negative===0),this.iushrn(a,h,g)},i.prototype.shln=function(a){return this.clone().ishln(a)},i.prototype.ushln=function(a){return this.clone().iushln(a)},i.prototype.shrn=function(a){return this.clone().ishrn(a)},i.prototype.ushrn=function(a){return this.clone().iushrn(a)},i.prototype.testn=function(a){r(typeof a=="number"&&a>=0);var h=a%26,g=(a-h)/26,v=1<<h;if(this.length<=g)return!1;var y=this.words[g];return!!(y&v)},i.prototype.imaskn=function(a){r(typeof a=="number"&&a>=0);var h=a%26,g=(a-h)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=g)return this;if(h!==0&&g++,this.length=Math.min(g,this.length),h!==0){var v=67108863^67108863>>>h<<h;this.words[this.length-1]&=v}return this._strip()},i.prototype.maskn=function(a){return this.clone().imaskn(a)},i.prototype.iaddn=function(a){return r(typeof a=="number"),r(a<67108864),a<0?this.isubn(-a):this.negative!==0?this.length===1&&(this.words[0]|0)<=a?(this.words[0]=a-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(a),this.negative=1,this):this._iaddn(a)},i.prototype._iaddn=function(a){this.words[0]+=a;for(var h=0;h<this.length&&this.words[h]>=67108864;h++)this.words[h]-=67108864,h===this.length-1?this.words[h+1]=1:this.words[h+1]++;return this.length=Math.max(this.length,h+1),this},i.prototype.isubn=function(a){if(r(typeof a=="number"),r(a<67108864),a<0)return this.iaddn(-a);if(this.negative!==0)return this.negative=0,this.iaddn(a),this.negative=1,this;if(this.words[0]-=a,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var h=0;h<this.length&&this.words[h]<0;h++)this.words[h]+=67108864,this.words[h+1]-=1;return this._strip()},i.prototype.addn=function(a){return this.clone().iaddn(a)},i.prototype.subn=function(a){return this.clone().isubn(a)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(a,h,g){var v=a.length+g,y;this._expand(v);var w,_=0;for(y=0;y<a.length;y++){w=(this.words[y+g]|0)+_;var m=(a.words[y]|0)*h;w-=m&67108863,_=(w>>26)-(m/67108864|0),this.words[y+g]=w&67108863}for(;y<this.length-g;y++)w=(this.words[y+g]|0)+_,_=w>>26,this.words[y+g]=w&67108863;if(_===0)return this._strip();for(r(_===-1),_=0,y=0;y<this.length;y++)w=-(this.words[y]|0)+_,_=w>>26,this.words[y]=w&67108863;return this.negative=1,this._strip()},i.prototype._wordDiv=function(a,h){var g=this.length-a.length,v=this.clone(),y=a,w=y.words[y.length-1]|0,_=this._countBits(w);g=26-_,g!==0&&(y=y.ushln(g),v.iushln(g),w=y.words[y.length-1]|0);var m=v.length-y.length,f;if(h!=="mod"){f=new i(null),f.length=m+1,f.words=new Array(f.length);for(var x=0;x<f.length;x++)f.words[x]=0}var H=v.clone()._ishlnsubmul(y,1,m);H.negative===0&&(v=H,f&&(f.words[m]=1));for(var V=m-1;V>=0;V--){var G=(v.words[y.length+V]|0)*67108864+(v.words[y.length+V-1]|0);for(G=Math.min(G/w|0,67108863),v._ishlnsubmul(y,G,V);v.negative!==0;)G--,v.negative=0,v._ishlnsubmul(y,1,V),v.isZero()||(v.negative^=1);f&&(f.words[V]=G)}return f&&f._strip(),v._strip(),h!=="div"&&g!==0&&v.iushrn(g),{div:f||null,mod:v}},i.prototype.divmod=function(a,h,g){if(r(!a.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var v,y,w;return this.negative!==0&&a.negative===0?(w=this.neg().divmod(a,h),h!=="mod"&&(v=w.div.neg()),h!=="div"&&(y=w.mod.neg(),g&&y.negative!==0&&y.iadd(a)),{div:v,mod:y}):this.negative===0&&a.negative!==0?(w=this.divmod(a.neg(),h),h!=="mod"&&(v=w.div.neg()),{div:v,mod:w.mod}):this.negative&a.negative?(w=this.neg().divmod(a.neg(),h),h!=="div"&&(y=w.mod.neg(),g&&y.negative!==0&&y.isub(a)),{div:w.div,mod:y}):a.length>this.length||this.cmp(a)<0?{div:new i(0),mod:this}:a.length===1?h==="div"?{div:this.divn(a.words[0]),mod:null}:h==="mod"?{div:null,mod:new i(this.modrn(a.words[0]))}:{div:this.divn(a.words[0]),mod:new i(this.modrn(a.words[0]))}:this._wordDiv(a,h)},i.prototype.div=function(a){return this.divmod(a,"div",!1).div},i.prototype.mod=function(a){return this.divmod(a,"mod",!1).mod},i.prototype.umod=function(a){return this.divmod(a,"mod",!0).mod},i.prototype.divRound=function(a){var h=this.divmod(a);if(h.mod.isZero())return h.div;var g=h.div.negative!==0?h.mod.isub(a):h.mod,v=a.ushrn(1),y=a.andln(1),w=g.cmp(v);return w<0||y===1&&w===0?h.div:h.div.negative!==0?h.div.isubn(1):h.div.iaddn(1)},i.prototype.modrn=function(a){var h=a<0;h&&(a=-a),r(a<=67108863);for(var g=(1<<26)%a,v=0,y=this.length-1;y>=0;y--)v=(g*v+(this.words[y]|0))%a;return h?-v:v},i.prototype.modn=function(a){return this.modrn(a)},i.prototype.idivn=function(a){var h=a<0;h&&(a=-a),r(a<=67108863);for(var g=0,v=this.length-1;v>=0;v--){var y=(this.words[v]|0)+g*67108864;this.words[v]=y/a|0,g=y%a}return this._strip(),h?this.ineg():this},i.prototype.divn=function(a){return this.clone().idivn(a)},i.prototype.egcd=function(a){r(a.negative===0),r(!a.isZero());var h=this,g=a.clone();h.negative!==0?h=h.umod(a):h=h.clone();for(var v=new i(1),y=new i(0),w=new i(0),_=new i(1),m=0;h.isEven()&&g.isEven();)h.iushrn(1),g.iushrn(1),++m;for(var f=g.clone(),x=h.clone();!h.isZero();){for(var H=0,V=1;!(h.words[0]&V)&&H<26;++H,V<<=1);if(H>0)for(h.iushrn(H);H-- >0;)(v.isOdd()||y.isOdd())&&(v.iadd(f),y.isub(x)),v.iushrn(1),y.iushrn(1);for(var G=0,it=1;!(g.words[0]&it)&&G<26;++G,it<<=1);if(G>0)for(g.iushrn(G);G-- >0;)(w.isOdd()||_.isOdd())&&(w.iadd(f),_.isub(x)),w.iushrn(1),_.iushrn(1);h.cmp(g)>=0?(h.isub(g),v.isub(w),y.isub(_)):(g.isub(h),w.isub(v),_.isub(y))}return{a:w,b:_,gcd:g.iushln(m)}},i.prototype._invmp=function(a){r(a.negative===0),r(!a.isZero());var h=this,g=a.clone();h.negative!==0?h=h.umod(a):h=h.clone();for(var v=new i(1),y=new i(0),w=g.clone();h.cmpn(1)>0&&g.cmpn(1)>0;){for(var _=0,m=1;!(h.words[0]&m)&&_<26;++_,m<<=1);if(_>0)for(h.iushrn(_);_-- >0;)v.isOdd()&&v.iadd(w),v.iushrn(1);for(var f=0,x=1;!(g.words[0]&x)&&f<26;++f,x<<=1);if(f>0)for(g.iushrn(f);f-- >0;)y.isOdd()&&y.iadd(w),y.iushrn(1);h.cmp(g)>=0?(h.isub(g),v.isub(y)):(g.isub(h),y.isub(v))}var H;return h.cmpn(1)===0?H=v:H=y,H.cmpn(0)<0&&H.iadd(a),H},i.prototype.gcd=function(a){if(this.isZero())return a.abs();if(a.isZero())return this.abs();var h=this.clone(),g=a.clone();h.negative=0,g.negative=0;for(var v=0;h.isEven()&&g.isEven();v++)h.iushrn(1),g.iushrn(1);do{for(;h.isEven();)h.iushrn(1);for(;g.isEven();)g.iushrn(1);var y=h.cmp(g);if(y<0){var w=h;h=g,g=w}else if(y===0||g.cmpn(1)===0)break;h.isub(g)}while(!0);return g.iushln(v)},i.prototype.invm=function(a){return this.egcd(a).a.umod(a)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(a){return this.words[0]&a},i.prototype.bincn=function(a){r(typeof a=="number");var h=a%26,g=(a-h)/26,v=1<<h;if(this.length<=g)return this._expand(g+1),this.words[g]|=v,this;for(var y=v,w=g;y!==0&&w<this.length;w++){var _=this.words[w]|0;_+=y,y=_>>>26,_&=67108863,this.words[w]=_}return y!==0&&(this.words[w]=y,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(a){var h=a<0;if(this.negative!==0&&!h)return-1;if(this.negative===0&&h)return 1;this._strip();var g;if(this.length>1)g=1;else{h&&(a=-a),r(a<=67108863,"Number is too big");var v=this.words[0]|0;g=v===a?0:v<a?-1:1}return this.negative!==0?-g|0:g},i.prototype.cmp=function(a){if(this.negative!==0&&a.negative===0)return-1;if(this.negative===0&&a.negative!==0)return 1;var h=this.ucmp(a);return this.negative!==0?-h|0:h},i.prototype.ucmp=function(a){if(this.length>a.length)return 1;if(this.length<a.length)return-1;for(var h=0,g=this.length-1;g>=0;g--){var v=this.words[g]|0,y=a.words[g]|0;if(v!==y){v<y?h=-1:v>y&&(h=1);break}}return h},i.prototype.gtn=function(a){return this.cmpn(a)===1},i.prototype.gt=function(a){return this.cmp(a)===1},i.prototype.gten=function(a){return this.cmpn(a)>=0},i.prototype.gte=function(a){return this.cmp(a)>=0},i.prototype.ltn=function(a){return this.cmpn(a)===-1},i.prototype.lt=function(a){return this.cmp(a)===-1},i.prototype.lten=function(a){return this.cmpn(a)<=0},i.prototype.lte=function(a){return this.cmp(a)<=0},i.prototype.eqn=function(a){return this.cmpn(a)===0},i.prototype.eq=function(a){return this.cmp(a)===0},i.red=function(a){return new Q(a)},i.prototype.toRed=function(a){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),a.convertTo(this)._forceRed(a)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(a){return this.red=a,this},i.prototype.forceRed=function(a){return r(!this.red,"Already a number in reduction context"),this._forceRed(a)},i.prototype.redAdd=function(a){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,a)},i.prototype.redIAdd=function(a){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,a)},i.prototype.redSub=function(a){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,a)},i.prototype.redISub=function(a){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,a)},i.prototype.redShl=function(a){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,a)},i.prototype.redMul=function(a){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.mul(this,a)},i.prototype.redIMul=function(a){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.imul(this,a)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(a){return r(this.red&&!a.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,a)};var q={k256:null,p224:null,p192:null,p25519:null};function z(B,a){this.name=B,this.p=new i(a,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}z.prototype._tmp=function(){var a=new i(null);return a.words=new Array(Math.ceil(this.n/13)),a},z.prototype.ireduce=function(a){var h=a,g;do this.split(h,this.tmp),h=this.imulK(h),h=h.iadd(this.tmp),g=h.bitLength();while(g>this.n);var v=g<this.n?-1:h.ucmp(this.p);return v===0?(h.words[0]=0,h.length=1):v>0?h.isub(this.p):h.strip!==void 0?h.strip():h._strip(),h},z.prototype.split=function(a,h){a.iushrn(this.n,0,h)},z.prototype.imulK=function(a){return a.imul(this.k)};function K(){z.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(K,z),K.prototype.split=function(a,h){for(var g=4194303,v=Math.min(a.length,9),y=0;y<v;y++)h.words[y]=a.words[y];if(h.length=v,a.length<=9){a.words[0]=0,a.length=1;return}var w=a.words[9];for(h.words[h.length++]=w&g,y=10;y<a.length;y++){var _=a.words[y]|0;a.words[y-10]=(_&g)<<4|w>>>22,w=_}w>>>=22,a.words[y-10]=w,w===0&&a.length>10?a.length-=10:a.length-=9},K.prototype.imulK=function(a){a.words[a.length]=0,a.words[a.length+1]=0,a.length+=2;for(var h=0,g=0;g<a.length;g++){var v=a.words[g]|0;h+=v*977,a.words[g]=h&67108863,h=v*64+(h/67108864|0)}return a.words[a.length-1]===0&&(a.length--,a.words[a.length-1]===0&&a.length--),a};function J(){z.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s(J,z);function vt(){z.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s(vt,z);function dt(){z.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s(dt,z),dt.prototype.imulK=function(a){for(var h=0,g=0;g<a.length;g++){var v=(a.words[g]|0)*19+h,y=v&67108863;v>>>=26,a.words[g]=y,h=v}return h!==0&&(a.words[a.length++]=h),a},i._prime=function(a){if(q[a])return q[a];var h;if(a==="k256")h=new K;else if(a==="p224")h=new J;else if(a==="p192")h=new vt;else if(a==="p25519")h=new dt;else throw new Error("Unknown prime "+a);return q[a]=h,h};function Q(B){if(typeof B=="string"){var a=i._prime(B);this.m=a.p,this.prime=a}else r(B.gtn(1),"modulus must be greater than 1"),this.m=B,this.prime=null}Q.prototype._verify1=function(a){r(a.negative===0,"red works only with positives"),r(a.red,"red works only with red numbers")},Q.prototype._verify2=function(a,h){r((a.negative|h.negative)===0,"red works only with positives"),r(a.red&&a.red===h.red,"red works only with red numbers")},Q.prototype.imod=function(a){return this.prime?this.prime.ireduce(a)._forceRed(this):(E(a,a.umod(this.m)._forceRed(this)),a)},Q.prototype.neg=function(a){return a.isZero()?a.clone():this.m.sub(a)._forceRed(this)},Q.prototype.add=function(a,h){this._verify2(a,h);var g=a.add(h);return g.cmp(this.m)>=0&&g.isub(this.m),g._forceRed(this)},Q.prototype.iadd=function(a,h){this._verify2(a,h);var g=a.iadd(h);return g.cmp(this.m)>=0&&g.isub(this.m),g},Q.prototype.sub=function(a,h){this._verify2(a,h);var g=a.sub(h);return g.cmpn(0)<0&&g.iadd(this.m),g._forceRed(this)},Q.prototype.isub=function(a,h){this._verify2(a,h);var g=a.isub(h);return g.cmpn(0)<0&&g.iadd(this.m),g},Q.prototype.shl=function(a,h){return this._verify1(a),this.imod(a.ushln(h))},Q.prototype.imul=function(a,h){return this._verify2(a,h),this.imod(a.imul(h))},Q.prototype.mul=function(a,h){return this._verify2(a,h),this.imod(a.mul(h))},Q.prototype.isqr=function(a){return this.imul(a,a.clone())},Q.prototype.sqr=function(a){return this.mul(a,a)},Q.prototype.sqrt=function(a){if(a.isZero())return a.clone();var h=this.m.andln(3);if(r(h%2===1),h===3){var g=this.m.add(new i(1)).iushrn(2);return this.pow(a,g)}for(var v=this.m.subn(1),y=0;!v.isZero()&&v.andln(1)===0;)y++,v.iushrn(1);r(!v.isZero());var w=new i(1).toRed(this),_=w.redNeg(),m=this.m.subn(1).iushrn(1),f=this.m.bitLength();for(f=new i(2*f*f).toRed(this);this.pow(f,m).cmp(_)!==0;)f.redIAdd(_);for(var x=this.pow(f,v),H=this.pow(a,v.addn(1).iushrn(1)),V=this.pow(a,v),G=y;V.cmp(w)!==0;){for(var it=V,rt=0;it.cmp(w)!==0;rt++)it=it.redSqr();r(rt<G);var ot=this.pow(x,new i(1).iushln(G-rt-1));H=H.redMul(ot),x=ot.redSqr(),V=V.redMul(x),G=rt}return H},Q.prototype.invm=function(a){var h=a._invmp(this.m);return h.negative!==0?(h.negative=0,this.imod(h).redNeg()):this.imod(h)},Q.prototype.pow=function(a,h){if(h.isZero())return new i(1).toRed(this);if(h.cmpn(1)===0)return a.clone();var g=4,v=new Array(1<<g);v[0]=new i(1).toRed(this),v[1]=a;for(var y=2;y<v.length;y++)v[y]=this.mul(v[y-1],a);var w=v[0],_=0,m=0,f=h.bitLength()%26;for(f===0&&(f=26),y=h.length-1;y>=0;y--){for(var x=h.words[y],H=f-1;H>=0;H--){var V=x>>H&1;if(w!==v[0]&&(w=this.sqr(w)),V===0&&_===0){m=0;continue}_<<=1,_|=V,m++,!(m!==g&&(y!==0||H!==0))&&(w=this.mul(w,v[_]),m=0,_=0)}f=26}return w},Q.prototype.convertTo=function(a){var h=a.umod(this.m);return h===a?h.clone():h},Q.prototype.convertFrom=function(a){var h=a.clone();return h.red=null,h},i.mont=function(a){return new xt(a)};function xt(B){Q.call(this,B),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s(xt,Q),xt.prototype.convertTo=function(a){return this.imod(a.ushln(this.shift))},xt.prototype.convertFrom=function(a){var h=this.imod(a.mul(this.rinv));return h.red=null,h},xt.prototype.imul=function(a,h){if(a.isZero()||h.isZero())return a.words[0]=0,a.length=1,a;var g=a.imul(h),v=g.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),y=g.isub(v).iushrn(this.shift),w=y;return y.cmp(this.m)>=0?w=y.isub(this.m):y.cmpn(0)<0&&(w=y.iadd(this.m)),w._forceRed(this)},xt.prototype.mul=function(a,h){if(a.isZero()||h.isZero())return new i(0)._forceRed(this);var g=a.mul(h),v=g.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),y=g.isub(v).iushrn(this.shift),w=y;return y.cmp(this.m)>=0?w=y.isub(this.m):y.cmpn(0)<0&&(w=y.iadd(this.m)),w._forceRed(this)},xt.prototype.invm=function(a){var h=this.imod(a._invmp(this.m).mul(this.r2));return h._forceRed(this)}})(n,$e)})(Li);var Hs=Li.exports;const gs=Ti(Hs);var bi={exports:{}},ft={},_n={};_n.byteLength=Na;_n.toByteArray=Oa;_n.fromByteArray=za;var Ve=[],Le=[],Ua=typeof Uint8Array<"u"?Uint8Array:Array,ni="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Tr=0,Fa=ni.length;Tr<Fa;++Tr)Ve[Tr]=ni[Tr],Le[ni.charCodeAt(Tr)]=Tr;Le[45]=62;Le[95]=63;function Ks(n){var t=n.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var e=n.indexOf("=");e===-1&&(e=t);var r=e===t?0:4-e%4;return[e,r]}function Na(n){var t=Ks(n),e=t[0],r=t[1];return(e+r)*3/4-r}function Pa(n,t,e){return(t+e)*3/4-e}function Oa(n){var t,e=Ks(n),r=e[0],s=e[1],i=new Ua(Pa(n,r,s)),o=0,c=s>0?r-4:r,d;for(d=0;d<c;d+=4)t=Le[n.charCodeAt(d)]<<18|Le[n.charCodeAt(d+1)]<<12|Le[n.charCodeAt(d+2)]<<6|Le[n.charCodeAt(d+3)],i[o++]=t>>16&255,i[o++]=t>>8&255,i[o++]=t&255;return s===2&&(t=Le[n.charCodeAt(d)]<<2|Le[n.charCodeAt(d+1)]>>4,i[o++]=t&255),s===1&&(t=Le[n.charCodeAt(d)]<<10|Le[n.charCodeAt(d+1)]<<4|Le[n.charCodeAt(d+2)]>>2,i[o++]=t>>8&255,i[o++]=t&255),i}function qa(n){return Ve[n>>18&63]+Ve[n>>12&63]+Ve[n>>6&63]+Ve[n&63]}function Da(n,t,e){for(var r,s=[],i=t;i<e;i+=3)r=(n[i]<<16&16711680)+(n[i+1]<<8&65280)+(n[i+2]&255),s.push(qa(r));return s.join("")}function za(n){for(var t,e=n.length,r=e%3,s=[],i=16383,o=0,c=e-r;o<c;o+=i)s.push(Da(n,o,o+i>c?c:o+i));return r===1?(t=n[e-1],s.push(Ve[t>>2]+Ve[t<<4&63]+"==")):r===2&&(t=(n[e-2]<<8)+n[e-1],s.push(Ve[t>>10]+Ve[t>>4&63]+Ve[t<<2&63]+"=")),s.join("")}var Ci={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Ci.read=function(n,t,e,r,s){var i,o,c=s*8-r-1,d=(1<<c)-1,S=d>>1,E=-7,A=e?s-1:0,P=e?-1:1,M=n[t+A];for(A+=P,i=M&(1<<-E)-1,M>>=-E,E+=c;E>0;i=i*256+n[t+A],A+=P,E-=8);for(o=i&(1<<-E)-1,i>>=-E,E+=r;E>0;o=o*256+n[t+A],A+=P,E-=8);if(i===0)i=1-S;else{if(i===d)return o?NaN:(M?-1:1)*(1/0);o=o+Math.pow(2,r),i=i-S}return(M?-1:1)*o*Math.pow(2,i-r)};Ci.write=function(n,t,e,r,s,i){var o,c,d,S=i*8-s-1,E=(1<<S)-1,A=E>>1,P=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,M=r?0:i-1,T=r?1:-1,k=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(c=isNaN(t)?1:0,o=E):(o=Math.floor(Math.log(t)/Math.LN2),t*(d=Math.pow(2,-o))<1&&(o--,d*=2),o+A>=1?t+=P/d:t+=P*Math.pow(2,1-A),t*d>=2&&(o++,d/=2),o+A>=E?(c=0,o=E):o+A>=1?(c=(t*d-1)*Math.pow(2,s),o=o+A):(c=t*Math.pow(2,A-1)*Math.pow(2,s),o=0));s>=8;n[e+M]=c&255,M+=T,c/=256,s-=8);for(o=o<<s|c,S+=s;S>0;n[e+M]=o&255,M+=T,o/=256,S-=8);n[e+M-T]|=k*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(n){const t=_n,e=Ci,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=c,n.SlowBuffer=D,n.INSPECT_MAX_BYTES=50;const s=2147483647;n.kMaxLength=s,c.TYPED_ARRAY_SUPPORT=i(),!c.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{const p=new Uint8Array(1),u={foo:function(){return 42}};return Object.setPrototypeOf(u,Uint8Array.prototype),Object.setPrototypeOf(p,u),p.foo()===42}catch{return!1}}Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}});function o(p){if(p>s)throw new RangeError('The value "'+p+'" is invalid for option "size"');const u=new Uint8Array(p);return Object.setPrototypeOf(u,c.prototype),u}function c(p,u,l){if(typeof p=="number"){if(typeof u=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return A(p)}return d(p,u,l)}c.poolSize=8192;function d(p,u,l){if(typeof p=="string")return P(p,u);if(ArrayBuffer.isView(p))return T(p);if(p==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof p);if(ye(p,ArrayBuffer)||p&&ye(p.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ye(p,SharedArrayBuffer)||p&&ye(p.buffer,SharedArrayBuffer)))return k(p,u,l);if(typeof p=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const b=p.valueOf&&p.valueOf();if(b!=null&&b!==p)return c.from(b,u,l);const I=R(p);if(I)return I;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof p[Symbol.toPrimitive]=="function")return c.from(p[Symbol.toPrimitive]("string"),u,l);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof p)}c.from=function(p,u,l){return d(p,u,l)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array);function S(p){if(typeof p!="number")throw new TypeError('"size" argument must be of type number');if(p<0)throw new RangeError('The value "'+p+'" is invalid for option "size"')}function E(p,u,l){return S(p),p<=0?o(p):u!==void 0?typeof l=="string"?o(p).fill(u,l):o(p).fill(u):o(p)}c.alloc=function(p,u,l){return E(p,u,l)};function A(p){return S(p),o(p<0?0:F(p)|0)}c.allocUnsafe=function(p){return A(p)},c.allocUnsafeSlow=function(p){return A(p)};function P(p,u){if((typeof u!="string"||u==="")&&(u="utf8"),!c.isEncoding(u))throw new TypeError("Unknown encoding: "+u);const l=O(p,u)|0;let b=o(l);const I=b.write(p,u);return I!==l&&(b=b.slice(0,I)),b}function M(p){const u=p.length<0?0:F(p.length)|0,l=o(u);for(let b=0;b<u;b+=1)l[b]=p[b]&255;return l}function T(p){if(ye(p,Uint8Array)){const u=new Uint8Array(p);return k(u.buffer,u.byteOffset,u.byteLength)}return M(p)}function k(p,u,l){if(u<0||p.byteLength<u)throw new RangeError('"offset" is outside of buffer bounds');if(p.byteLength<u+(l||0))throw new RangeError('"length" is outside of buffer bounds');let b;return u===void 0&&l===void 0?b=new Uint8Array(p):l===void 0?b=new Uint8Array(p,u):b=new Uint8Array(p,u,l),Object.setPrototypeOf(b,c.prototype),b}function R(p){if(c.isBuffer(p)){const u=F(p.length)|0,l=o(u);return l.length===0||p.copy(l,0,0,u),l}if(p.length!==void 0)return typeof p.length!="number"||Mt(p.length)?o(0):M(p);if(p.type==="Buffer"&&Array.isArray(p.data))return M(p.data)}function F(p){if(p>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return p|0}function D(p){return+p!=p&&(p=0),c.alloc(+p)}c.isBuffer=function(u){return u!=null&&u._isBuffer===!0&&u!==c.prototype},c.compare=function(u,l){if(ye(u,Uint8Array)&&(u=c.from(u,u.offset,u.byteLength)),ye(l,Uint8Array)&&(l=c.from(l,l.offset,l.byteLength)),!c.isBuffer(u)||!c.isBuffer(l))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(u===l)return 0;let b=u.length,I=l.length;for(let L=0,N=Math.min(b,I);L<N;++L)if(u[L]!==l[L]){b=u[L],I=l[L];break}return b<I?-1:I<b?1:0},c.isEncoding=function(u){switch(String(u).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(u,l){if(!Array.isArray(u))throw new TypeError('"list" argument must be an Array of Buffers');if(u.length===0)return c.alloc(0);let b;if(l===void 0)for(l=0,b=0;b<u.length;++b)l+=u[b].length;const I=c.allocUnsafe(l);let L=0;for(b=0;b<u.length;++b){let N=u[b];if(ye(N,Uint8Array))L+N.length>I.length?(c.isBuffer(N)||(N=c.from(N)),N.copy(I,L)):Uint8Array.prototype.set.call(I,N,L);else if(c.isBuffer(N))N.copy(I,L);else throw new TypeError('"list" argument must be an Array of Buffers');L+=N.length}return I};function O(p,u){if(c.isBuffer(p))return p.length;if(ArrayBuffer.isView(p)||ye(p,ArrayBuffer))return p.byteLength;if(typeof p!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof p);const l=p.length,b=arguments.length>2&&arguments[2]===!0;if(!b&&l===0)return 0;let I=!1;for(;;)switch(u){case"ascii":case"latin1":case"binary":return l;case"utf8":case"utf-8":return At(p).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return l*2;case"hex":return l>>>1;case"base64":return Tt(p).length;default:if(I)return b?-1:At(p).length;u=(""+u).toLowerCase(),I=!0}}c.byteLength=O;function W(p,u,l){let b=!1;if((u===void 0||u<0)&&(u=0),u>this.length||((l===void 0||l>this.length)&&(l=this.length),l<=0)||(l>>>=0,u>>>=0,l<=u))return"";for(p||(p="utf8");;)switch(p){case"hex":return w(this,u,l);case"utf8":case"utf-8":return a(this,u,l);case"ascii":return v(this,u,l);case"latin1":case"binary":return y(this,u,l);case"base64":return B(this,u,l);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _(this,u,l);default:if(b)throw new TypeError("Unknown encoding: "+p);p=(p+"").toLowerCase(),b=!0}}c.prototype._isBuffer=!0;function q(p,u,l){const b=p[u];p[u]=p[l],p[l]=b}c.prototype.swap16=function(){const u=this.length;if(u%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let l=0;l<u;l+=2)q(this,l,l+1);return this},c.prototype.swap32=function(){const u=this.length;if(u%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let l=0;l<u;l+=4)q(this,l,l+3),q(this,l+1,l+2);return this},c.prototype.swap64=function(){const u=this.length;if(u%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let l=0;l<u;l+=8)q(this,l,l+7),q(this,l+1,l+6),q(this,l+2,l+5),q(this,l+3,l+4);return this},c.prototype.toString=function(){const u=this.length;return u===0?"":arguments.length===0?a(this,0,u):W.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(u){if(!c.isBuffer(u))throw new TypeError("Argument must be a Buffer");return this===u?!0:c.compare(this,u)===0},c.prototype.inspect=function(){let u="";const l=n.INSPECT_MAX_BYTES;return u=this.toString("hex",0,l).replace(/(.{2})/g,"$1 ").trim(),this.length>l&&(u+=" ... "),"<Buffer "+u+">"},r&&(c.prototype[r]=c.prototype.inspect),c.prototype.compare=function(u,l,b,I,L){if(ye(u,Uint8Array)&&(u=c.from(u,u.offset,u.byteLength)),!c.isBuffer(u))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof u);if(l===void 0&&(l=0),b===void 0&&(b=u?u.length:0),I===void 0&&(I=0),L===void 0&&(L=this.length),l<0||b>u.length||I<0||L>this.length)throw new RangeError("out of range index");if(I>=L&&l>=b)return 0;if(I>=L)return-1;if(l>=b)return 1;if(l>>>=0,b>>>=0,I>>>=0,L>>>=0,this===u)return 0;let N=L-I,ht=b-l;const lt=Math.min(N,ht),ut=this.slice(I,L),Ct=u.slice(l,b);for(let ct=0;ct<lt;++ct)if(ut[ct]!==Ct[ct]){N=ut[ct],ht=Ct[ct];break}return N<ht?-1:ht<N?1:0};function z(p,u,l,b,I){if(p.length===0)return-1;if(typeof l=="string"?(b=l,l=0):l>2147483647?l=2147483647:l<-2147483648&&(l=-2147483648),l=+l,Mt(l)&&(l=I?0:p.length-1),l<0&&(l=p.length+l),l>=p.length){if(I)return-1;l=p.length-1}else if(l<0)if(I)l=0;else return-1;if(typeof u=="string"&&(u=c.from(u,b)),c.isBuffer(u))return u.length===0?-1:K(p,u,l,b,I);if(typeof u=="number")return u=u&255,typeof Uint8Array.prototype.indexOf=="function"?I?Uint8Array.prototype.indexOf.call(p,u,l):Uint8Array.prototype.lastIndexOf.call(p,u,l):K(p,[u],l,b,I);throw new TypeError("val must be string, number or Buffer")}function K(p,u,l,b,I){let L=1,N=p.length,ht=u.length;if(b!==void 0&&(b=String(b).toLowerCase(),b==="ucs2"||b==="ucs-2"||b==="utf16le"||b==="utf-16le")){if(p.length<2||u.length<2)return-1;L=2,N/=2,ht/=2,l/=2}function lt(Ct,ct){return L===1?Ct[ct]:Ct.readUInt16BE(ct*L)}let ut;if(I){let Ct=-1;for(ut=l;ut<N;ut++)if(lt(p,ut)===lt(u,Ct===-1?0:ut-Ct)){if(Ct===-1&&(Ct=ut),ut-Ct+1===ht)return Ct*L}else Ct!==-1&&(ut-=ut-Ct),Ct=-1}else for(l+ht>N&&(l=N-ht),ut=l;ut>=0;ut--){let Ct=!0;for(let ct=0;ct<ht;ct++)if(lt(p,ut+ct)!==lt(u,ct)){Ct=!1;break}if(Ct)return ut}return-1}c.prototype.includes=function(u,l,b){return this.indexOf(u,l,b)!==-1},c.prototype.indexOf=function(u,l,b){return z(this,u,l,b,!0)},c.prototype.lastIndexOf=function(u,l,b){return z(this,u,l,b,!1)};function J(p,u,l,b){l=Number(l)||0;const I=p.length-l;b?(b=Number(b),b>I&&(b=I)):b=I;const L=u.length;b>L/2&&(b=L/2);let N;for(N=0;N<b;++N){const ht=parseInt(u.substr(N*2,2),16);if(Mt(ht))return N;p[l+N]=ht}return N}function vt(p,u,l,b){return It(At(u,p.length-l),p,l,b)}function dt(p,u,l,b){return It(Ut(u),p,l,b)}function Q(p,u,l,b){return It(Tt(u),p,l,b)}function xt(p,u,l,b){return It(Rr(u,p.length-l),p,l,b)}c.prototype.write=function(u,l,b,I){if(l===void 0)I="utf8",b=this.length,l=0;else if(b===void 0&&typeof l=="string")I=l,b=this.length,l=0;else if(isFinite(l))l=l>>>0,isFinite(b)?(b=b>>>0,I===void 0&&(I="utf8")):(I=b,b=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const L=this.length-l;if((b===void 0||b>L)&&(b=L),u.length>0&&(b<0||l<0)||l>this.length)throw new RangeError("Attempt to write outside buffer bounds");I||(I="utf8");let N=!1;for(;;)switch(I){case"hex":return J(this,u,l,b);case"utf8":case"utf-8":return vt(this,u,l,b);case"ascii":case"latin1":case"binary":return dt(this,u,l,b);case"base64":return Q(this,u,l,b);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return xt(this,u,l,b);default:if(N)throw new TypeError("Unknown encoding: "+I);I=(""+I).toLowerCase(),N=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function B(p,u,l){return u===0&&l===p.length?t.fromByteArray(p):t.fromByteArray(p.slice(u,l))}function a(p,u,l){l=Math.min(p.length,l);const b=[];let I=u;for(;I<l;){const L=p[I];let N=null,ht=L>239?4:L>223?3:L>191?2:1;if(I+ht<=l){let lt,ut,Ct,ct;switch(ht){case 1:L<128&&(N=L);break;case 2:lt=p[I+1],(lt&192)===128&&(ct=(L&31)<<6|lt&63,ct>127&&(N=ct));break;case 3:lt=p[I+1],ut=p[I+2],(lt&192)===128&&(ut&192)===128&&(ct=(L&15)<<12|(lt&63)<<6|ut&63,ct>2047&&(ct<55296||ct>57343)&&(N=ct));break;case 4:lt=p[I+1],ut=p[I+2],Ct=p[I+3],(lt&192)===128&&(ut&192)===128&&(Ct&192)===128&&(ct=(L&15)<<18|(lt&63)<<12|(ut&63)<<6|Ct&63,ct>65535&&ct<1114112&&(N=ct))}}N===null?(N=65533,ht=1):N>65535&&(N-=65536,b.push(N>>>10&1023|55296),N=56320|N&1023),b.push(N),I+=ht}return g(b)}const h=4096;function g(p){const u=p.length;if(u<=h)return String.fromCharCode.apply(String,p);let l="",b=0;for(;b<u;)l+=String.fromCharCode.apply(String,p.slice(b,b+=h));return l}function v(p,u,l){let b="";l=Math.min(p.length,l);for(let I=u;I<l;++I)b+=String.fromCharCode(p[I]&127);return b}function y(p,u,l){let b="";l=Math.min(p.length,l);for(let I=u;I<l;++I)b+=String.fromCharCode(p[I]);return b}function w(p,u,l){const b=p.length;(!u||u<0)&&(u=0),(!l||l<0||l>b)&&(l=b);let I="";for(let L=u;L<l;++L)I+=Rt[p[L]];return I}function _(p,u,l){const b=p.slice(u,l);let I="";for(let L=0;L<b.length-1;L+=2)I+=String.fromCharCode(b[L]+b[L+1]*256);return I}c.prototype.slice=function(u,l){const b=this.length;u=~~u,l=l===void 0?b:~~l,u<0?(u+=b,u<0&&(u=0)):u>b&&(u=b),l<0?(l+=b,l<0&&(l=0)):l>b&&(l=b),l<u&&(l=u);const I=this.subarray(u,l);return Object.setPrototypeOf(I,c.prototype),I};function m(p,u,l){if(p%1!==0||p<0)throw new RangeError("offset is not uint");if(p+u>l)throw new RangeError("Trying to access beyond buffer length")}c.prototype.readUintLE=c.prototype.readUIntLE=function(u,l,b){u=u>>>0,l=l>>>0,b||m(u,l,this.length);let I=this[u],L=1,N=0;for(;++N<l&&(L*=256);)I+=this[u+N]*L;return I},c.prototype.readUintBE=c.prototype.readUIntBE=function(u,l,b){u=u>>>0,l=l>>>0,b||m(u,l,this.length);let I=this[u+--l],L=1;for(;l>0&&(L*=256);)I+=this[u+--l]*L;return I},c.prototype.readUint8=c.prototype.readUInt8=function(u,l){return u=u>>>0,l||m(u,1,this.length),this[u]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(u,l){return u=u>>>0,l||m(u,2,this.length),this[u]|this[u+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(u,l){return u=u>>>0,l||m(u,2,this.length),this[u]<<8|this[u+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(u,l){return u=u>>>0,l||m(u,4,this.length),(this[u]|this[u+1]<<8|this[u+2]<<16)+this[u+3]*16777216},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(u,l){return u=u>>>0,l||m(u,4,this.length),this[u]*16777216+(this[u+1]<<16|this[u+2]<<8|this[u+3])},c.prototype.readBigUInt64LE=Ee(function(u){u=u>>>0,Bt(u,"offset");const l=this[u],b=this[u+7];(l===void 0||b===void 0)&&wt(u,this.length-8);const I=l+this[++u]*2**8+this[++u]*2**16+this[++u]*2**24,L=this[++u]+this[++u]*2**8+this[++u]*2**16+b*2**24;return BigInt(I)+(BigInt(L)<<BigInt(32))}),c.prototype.readBigUInt64BE=Ee(function(u){u=u>>>0,Bt(u,"offset");const l=this[u],b=this[u+7];(l===void 0||b===void 0)&&wt(u,this.length-8);const I=l*2**24+this[++u]*2**16+this[++u]*2**8+this[++u],L=this[++u]*2**24+this[++u]*2**16+this[++u]*2**8+b;return(BigInt(I)<<BigInt(32))+BigInt(L)}),c.prototype.readIntLE=function(u,l,b){u=u>>>0,l=l>>>0,b||m(u,l,this.length);let I=this[u],L=1,N=0;for(;++N<l&&(L*=256);)I+=this[u+N]*L;return L*=128,I>=L&&(I-=Math.pow(2,8*l)),I},c.prototype.readIntBE=function(u,l,b){u=u>>>0,l=l>>>0,b||m(u,l,this.length);let I=l,L=1,N=this[u+--I];for(;I>0&&(L*=256);)N+=this[u+--I]*L;return L*=128,N>=L&&(N-=Math.pow(2,8*l)),N},c.prototype.readInt8=function(u,l){return u=u>>>0,l||m(u,1,this.length),this[u]&128?(255-this[u]+1)*-1:this[u]},c.prototype.readInt16LE=function(u,l){u=u>>>0,l||m(u,2,this.length);const b=this[u]|this[u+1]<<8;return b&32768?b|4294901760:b},c.prototype.readInt16BE=function(u,l){u=u>>>0,l||m(u,2,this.length);const b=this[u+1]|this[u]<<8;return b&32768?b|4294901760:b},c.prototype.readInt32LE=function(u,l){return u=u>>>0,l||m(u,4,this.length),this[u]|this[u+1]<<8|this[u+2]<<16|this[u+3]<<24},c.prototype.readInt32BE=function(u,l){return u=u>>>0,l||m(u,4,this.length),this[u]<<24|this[u+1]<<16|this[u+2]<<8|this[u+3]},c.prototype.readBigInt64LE=Ee(function(u){u=u>>>0,Bt(u,"offset");const l=this[u],b=this[u+7];(l===void 0||b===void 0)&&wt(u,this.length-8);const I=this[u+4]+this[u+5]*2**8+this[u+6]*2**16+(b<<24);return(BigInt(I)<<BigInt(32))+BigInt(l+this[++u]*2**8+this[++u]*2**16+this[++u]*2**24)}),c.prototype.readBigInt64BE=Ee(function(u){u=u>>>0,Bt(u,"offset");const l=this[u],b=this[u+7];(l===void 0||b===void 0)&&wt(u,this.length-8);const I=(l<<24)+this[++u]*2**16+this[++u]*2**8+this[++u];return(BigInt(I)<<BigInt(32))+BigInt(this[++u]*2**24+this[++u]*2**16+this[++u]*2**8+b)}),c.prototype.readFloatLE=function(u,l){return u=u>>>0,l||m(u,4,this.length),e.read(this,u,!0,23,4)},c.prototype.readFloatBE=function(u,l){return u=u>>>0,l||m(u,4,this.length),e.read(this,u,!1,23,4)},c.prototype.readDoubleLE=function(u,l){return u=u>>>0,l||m(u,8,this.length),e.read(this,u,!0,52,8)},c.prototype.readDoubleBE=function(u,l){return u=u>>>0,l||m(u,8,this.length),e.read(this,u,!1,52,8)};function f(p,u,l,b,I,L){if(!c.isBuffer(p))throw new TypeError('"buffer" argument must be a Buffer instance');if(u>I||u<L)throw new RangeError('"value" argument is out of bounds');if(l+b>p.length)throw new RangeError("Index out of range")}c.prototype.writeUintLE=c.prototype.writeUIntLE=function(u,l,b,I){if(u=+u,l=l>>>0,b=b>>>0,!I){const ht=Math.pow(2,8*b)-1;f(this,u,l,b,ht,0)}let L=1,N=0;for(this[l]=u&255;++N<b&&(L*=256);)this[l+N]=u/L&255;return l+b},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(u,l,b,I){if(u=+u,l=l>>>0,b=b>>>0,!I){const ht=Math.pow(2,8*b)-1;f(this,u,l,b,ht,0)}let L=b-1,N=1;for(this[l+L]=u&255;--L>=0&&(N*=256);)this[l+L]=u/N&255;return l+b},c.prototype.writeUint8=c.prototype.writeUInt8=function(u,l,b){return u=+u,l=l>>>0,b||f(this,u,l,1,255,0),this[l]=u&255,l+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(u,l,b){return u=+u,l=l>>>0,b||f(this,u,l,2,65535,0),this[l]=u&255,this[l+1]=u>>>8,l+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(u,l,b){return u=+u,l=l>>>0,b||f(this,u,l,2,65535,0),this[l]=u>>>8,this[l+1]=u&255,l+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(u,l,b){return u=+u,l=l>>>0,b||f(this,u,l,4,4294967295,0),this[l+3]=u>>>24,this[l+2]=u>>>16,this[l+1]=u>>>8,this[l]=u&255,l+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(u,l,b){return u=+u,l=l>>>0,b||f(this,u,l,4,4294967295,0),this[l]=u>>>24,this[l+1]=u>>>16,this[l+2]=u>>>8,this[l+3]=u&255,l+4};function x(p,u,l,b,I){yt(u,b,I,p,l,7);let L=Number(u&BigInt(4294967295));p[l++]=L,L=L>>8,p[l++]=L,L=L>>8,p[l++]=L,L=L>>8,p[l++]=L;let N=Number(u>>BigInt(32)&BigInt(4294967295));return p[l++]=N,N=N>>8,p[l++]=N,N=N>>8,p[l++]=N,N=N>>8,p[l++]=N,l}function H(p,u,l,b,I){yt(u,b,I,p,l,7);let L=Number(u&BigInt(4294967295));p[l+7]=L,L=L>>8,p[l+6]=L,L=L>>8,p[l+5]=L,L=L>>8,p[l+4]=L;let N=Number(u>>BigInt(32)&BigInt(4294967295));return p[l+3]=N,N=N>>8,p[l+2]=N,N=N>>8,p[l+1]=N,N=N>>8,p[l]=N,l+8}c.prototype.writeBigUInt64LE=Ee(function(u,l=0){return x(this,u,l,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeBigUInt64BE=Ee(function(u,l=0){return H(this,u,l,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeIntLE=function(u,l,b,I){if(u=+u,l=l>>>0,!I){const lt=Math.pow(2,8*b-1);f(this,u,l,b,lt-1,-lt)}let L=0,N=1,ht=0;for(this[l]=u&255;++L<b&&(N*=256);)u<0&&ht===0&&this[l+L-1]!==0&&(ht=1),this[l+L]=(u/N>>0)-ht&255;return l+b},c.prototype.writeIntBE=function(u,l,b,I){if(u=+u,l=l>>>0,!I){const lt=Math.pow(2,8*b-1);f(this,u,l,b,lt-1,-lt)}let L=b-1,N=1,ht=0;for(this[l+L]=u&255;--L>=0&&(N*=256);)u<0&&ht===0&&this[l+L+1]!==0&&(ht=1),this[l+L]=(u/N>>0)-ht&255;return l+b},c.prototype.writeInt8=function(u,l,b){return u=+u,l=l>>>0,b||f(this,u,l,1,127,-128),u<0&&(u=255+u+1),this[l]=u&255,l+1},c.prototype.writeInt16LE=function(u,l,b){return u=+u,l=l>>>0,b||f(this,u,l,2,32767,-32768),this[l]=u&255,this[l+1]=u>>>8,l+2},c.prototype.writeInt16BE=function(u,l,b){return u=+u,l=l>>>0,b||f(this,u,l,2,32767,-32768),this[l]=u>>>8,this[l+1]=u&255,l+2},c.prototype.writeInt32LE=function(u,l,b){return u=+u,l=l>>>0,b||f(this,u,l,4,2147483647,-2147483648),this[l]=u&255,this[l+1]=u>>>8,this[l+2]=u>>>16,this[l+3]=u>>>24,l+4},c.prototype.writeInt32BE=function(u,l,b){return u=+u,l=l>>>0,b||f(this,u,l,4,2147483647,-2147483648),u<0&&(u=4294967295+u+1),this[l]=u>>>24,this[l+1]=u>>>16,this[l+2]=u>>>8,this[l+3]=u&255,l+4},c.prototype.writeBigInt64LE=Ee(function(u,l=0){return x(this,u,l,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),c.prototype.writeBigInt64BE=Ee(function(u,l=0){return H(this,u,l,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function V(p,u,l,b,I,L){if(l+b>p.length)throw new RangeError("Index out of range");if(l<0)throw new RangeError("Index out of range")}function G(p,u,l,b,I){return u=+u,l=l>>>0,I||V(p,u,l,4),e.write(p,u,l,b,23,4),l+4}c.prototype.writeFloatLE=function(u,l,b){return G(this,u,l,!0,b)},c.prototype.writeFloatBE=function(u,l,b){return G(this,u,l,!1,b)};function it(p,u,l,b,I){return u=+u,l=l>>>0,I||V(p,u,l,8),e.write(p,u,l,b,52,8),l+8}c.prototype.writeDoubleLE=function(u,l,b){return it(this,u,l,!0,b)},c.prototype.writeDoubleBE=function(u,l,b){return it(this,u,l,!1,b)},c.prototype.copy=function(u,l,b,I){if(!c.isBuffer(u))throw new TypeError("argument should be a Buffer");if(b||(b=0),!I&&I!==0&&(I=this.length),l>=u.length&&(l=u.length),l||(l=0),I>0&&I<b&&(I=b),I===b||u.length===0||this.length===0)return 0;if(l<0)throw new RangeError("targetStart out of bounds");if(b<0||b>=this.length)throw new RangeError("Index out of range");if(I<0)throw new RangeError("sourceEnd out of bounds");I>this.length&&(I=this.length),u.length-l<I-b&&(I=u.length-l+b);const L=I-b;return this===u&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(l,b,I):Uint8Array.prototype.set.call(u,this.subarray(b,I),l),L},c.prototype.fill=function(u,l,b,I){if(typeof u=="string"){if(typeof l=="string"?(I=l,l=0,b=this.length):typeof b=="string"&&(I=b,b=this.length),I!==void 0&&typeof I!="string")throw new TypeError("encoding must be a string");if(typeof I=="string"&&!c.isEncoding(I))throw new TypeError("Unknown encoding: "+I);if(u.length===1){const N=u.charCodeAt(0);(I==="utf8"&&N<128||I==="latin1")&&(u=N)}}else typeof u=="number"?u=u&255:typeof u=="boolean"&&(u=Number(u));if(l<0||this.length<l||this.length<b)throw new RangeError("Out of range index");if(b<=l)return this;l=l>>>0,b=b===void 0?this.length:b>>>0,u||(u=0);let L;if(typeof u=="number")for(L=l;L<b;++L)this[L]=u;else{const N=c.isBuffer(u)?u:c.from(u,I),ht=N.length;if(ht===0)throw new TypeError('The value "'+u+'" is invalid for argument "value"');for(L=0;L<b-l;++L)this[L+l]=N[L%ht]}return this};const rt={};function ot(p,u,l){rt[p]=class extends l{constructor(){super(),Object.defineProperty(this,"message",{value:u.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${p}]`,this.stack,delete this.name}get code(){return p}set code(I){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:I,writable:!0})}toString(){return`${this.name} [${p}]: ${this.message}`}}}ot("ERR_BUFFER_OUT_OF_BOUNDS",function(p){return p?`${p} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ot("ERR_INVALID_ARG_TYPE",function(p,u){return`The "${p}" argument must be of type number. Received type ${typeof u}`},TypeError),ot("ERR_OUT_OF_RANGE",function(p,u,l){let b=`The value of "${p}" is out of range.`,I=l;return Number.isInteger(l)&&Math.abs(l)>2**32?I=Pt(String(l)):typeof l=="bigint"&&(I=String(l),(l>BigInt(2)**BigInt(32)||l<-(BigInt(2)**BigInt(32)))&&(I=Pt(I)),I+="n"),b+=` It must be ${u}. Received ${I}`,b},RangeError);function Pt(p){let u="",l=p.length;const b=p[0]==="-"?1:0;for(;l>=b+4;l-=3)u=`_${p.slice(l-3,l)}${u}`;return`${p.slice(0,l)}${u}`}function pt(p,u,l){Bt(u,"offset"),(p[u]===void 0||p[u+l]===void 0)&&wt(u,p.length-(l+1))}function yt(p,u,l,b,I,L){if(p>l||p<u){const N=typeof u=="bigint"?"n":"";let ht;throw L>3?u===0||u===BigInt(0)?ht=`>= 0${N} and < 2${N} ** ${(L+1)*8}${N}`:ht=`>= -(2${N} ** ${(L+1)*8-1}${N}) and < 2 ** ${(L+1)*8-1}${N}`:ht=`>= ${u}${N} and <= ${l}${N}`,new rt.ERR_OUT_OF_RANGE("value",ht,p)}pt(b,I,L)}function Bt(p,u){if(typeof p!="number")throw new rt.ERR_INVALID_ARG_TYPE(u,"number",p)}function wt(p,u,l){throw Math.floor(p)!==p?(Bt(p,l),new rt.ERR_OUT_OF_RANGE(l||"offset","an integer",p)):u<0?new rt.ERR_BUFFER_OUT_OF_BOUNDS:new rt.ERR_OUT_OF_RANGE(l||"offset",`>= ${l?1:0} and <= ${u}`,p)}const _t=/[^+/0-9A-Za-z-_]/g;function Ke(p){if(p=p.split("=")[0],p=p.trim().replace(_t,""),p.length<2)return"";for(;p.length%4!==0;)p=p+"=";return p}function At(p,u){u=u||1/0;let l;const b=p.length;let I=null;const L=[];for(let N=0;N<b;++N){if(l=p.charCodeAt(N),l>55295&&l<57344){if(!I){if(l>56319){(u-=3)>-1&&L.push(239,191,189);continue}else if(N+1===b){(u-=3)>-1&&L.push(239,191,189);continue}I=l;continue}if(l<56320){(u-=3)>-1&&L.push(239,191,189),I=l;continue}l=(I-55296<<10|l-56320)+65536}else I&&(u-=3)>-1&&L.push(239,191,189);if(I=null,l<128){if((u-=1)<0)break;L.push(l)}else if(l<2048){if((u-=2)<0)break;L.push(l>>6|192,l&63|128)}else if(l<65536){if((u-=3)<0)break;L.push(l>>12|224,l>>6&63|128,l&63|128)}else if(l<1114112){if((u-=4)<0)break;L.push(l>>18|240,l>>12&63|128,l>>6&63|128,l&63|128)}else throw new Error("Invalid code point")}return L}function Ut(p){const u=[];for(let l=0;l<p.length;++l)u.push(p.charCodeAt(l)&255);return u}function Rr(p,u){let l,b,I;const L=[];for(let N=0;N<p.length&&!((u-=2)<0);++N)l=p.charCodeAt(N),b=l>>8,I=l%256,L.push(I),L.push(b);return L}function Tt(p){return t.toByteArray(Ke(p))}function It(p,u,l,b){let I;for(I=0;I<b&&!(I+l>=u.length||I>=p.length);++I)u[I+l]=p[I];return I}function ye(p,u){return p instanceof u||p!=null&&p.constructor!=null&&p.constructor.name!=null&&p.constructor.name===u.name}function Mt(p){return p!==p}const Rt=function(){const p="0123456789abcdef",u=new Array(256);for(let l=0;l<16;++l){const b=l*16;for(let I=0;I<16;++I)u[b+I]=p[l]+p[I]}return u}();function Ee(p){return typeof BigInt>"u"?Lt:p}function Lt(){throw new Error("BigInt not supported")}})(ft);(function(n,t){var e=ft,r=e.Buffer;function s(o,c){for(var d in o)c[d]=o[d]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?n.exports=e:(s(e,t),t.Buffer=i);function i(o,c,d){return r(o,c,d)}s(r,i),i.from=function(o,c,d){if(typeof o=="number")throw new TypeError("Argument must not be a number");return r(o,c,d)},i.alloc=function(o,c,d){if(typeof o!="number")throw new TypeError("Argument must be a number");var S=r(o);return c!==void 0?typeof d=="string"?S.fill(c,d):S.fill(c):S.fill(0),S},i.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return r(o)},i.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return e.SlowBuffer(o)}})(bi,bi.exports);var Ws=bi.exports;class $a extends TypeError{constructor(t,e){let r;const{message:s,explanation:i,...o}=t,{path:c}=t,d=c.length===0?s:`At path: ${c.join(".")} -- ${s}`;super(i??d),i!=null&&(this.cause=d),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>r??(r=[t,...e()])}}function Ha(n){return nr(n)&&typeof n[Symbol.iterator]=="function"}function nr(n){return typeof n=="object"&&n!=null}function He(n){return typeof n=="symbol"?n.toString():typeof n=="string"?JSON.stringify(n):`${n}`}function Ka(n){const{done:t,value:e}=n.next();return t?void 0:e}function Wa(n,t,e,r){if(n===!0)return;n===!1?n={}:typeof n=="string"&&(n={message:n});const{path:s,branch:i}=t,{type:o}=e,{refinement:c,message:d=`Expected a value of type \`${o}\`${c?` with refinement \`${c}\``:""}, but received: \`${He(r)}\``}=n;return{value:r,type:o,refinement:c,key:s[s.length-1],path:s,branch:i,...n,message:d}}function*ms(n,t,e,r){Ha(n)||(n=[n]);for(const s of n){const i=Wa(s,t,e,r);i&&(yield i)}}function*Ui(n,t,e={}){const{path:r=[],branch:s=[n],coerce:i=!1,mask:o=!1}=e,c={path:r,branch:s};if(i&&(n=t.coercer(n,c),o&&t.type!=="type"&&nr(t.schema)&&nr(n)&&!Array.isArray(n)))for(const S in n)t.schema[S]===void 0&&delete n[S];let d="valid";for(const S of t.validator(n,c))S.explanation=e.message,d="not_valid",yield[S,void 0];for(let[S,E,A]of t.entries(n,c)){const P=Ui(E,A,{path:S===void 0?r:[...r,S],branch:S===void 0?s:[...s,E],coerce:i,mask:o,message:e.message});for(const M of P)M[0]?(d=M[0].refinement!=null?"not_refined":"not_valid",yield[M[0],void 0]):i&&(E=M[1],S===void 0?n=E:n instanceof Map?n.set(S,E):n instanceof Set?n.add(E):nr(n)&&(E!==void 0||S in n)&&(n[S]=E))}if(d!=="not_valid")for(const S of t.refiner(n,c))S.explanation=e.message,d="not_refined",yield[S,void 0];d==="valid"&&(yield[void 0,n])}let Ze=class{constructor(t){const{type:e,schema:r,validator:s,refiner:i,coercer:o=d=>d,entries:c=function*(){}}=t;this.type=e,this.schema=r,this.entries=c,this.coercer=o,s?this.validator=(d,S)=>{const E=s(d,S);return ms(E,S,this,d)}:this.validator=()=>[],i?this.refiner=(d,S)=>{const E=i(d,S);return ms(E,S,this,d)}:this.refiner=()=>[]}assert(t,e){return Va(t,this,e)}create(t,e){return Z(t,this,e)}is(t){return Vs(t,this)}mask(t,e){return Ga(t,this,e)}validate(t,e={}){return tn(t,this,e)}};function Va(n,t,e){const r=tn(n,t,{message:e});if(r[0])throw r[0]}function Z(n,t,e){const r=tn(n,t,{coerce:!0,message:e});if(r[0])throw r[0];return r[1]}function Ga(n,t,e){const r=tn(n,t,{coerce:!0,mask:!0,message:e});if(r[0])throw r[0];return r[1]}function Vs(n,t){return!tn(n,t)[0]}function tn(n,t,e={}){const r=Ui(n,t,e),s=Ka(r);return s[0]?[new $a(s[0],function*(){for(const o of r)o[0]&&(yield o[0])}),void 0]:[void 0,s[1]]}function kr(n,t){return new Ze({type:n,schema:null,validator:t})}function ja(){return kr("any",()=>!0)}function X(n){return new Ze({type:"array",schema:n,*entries(t){if(n&&Array.isArray(t))for(const[e,r]of t.entries())yield[e,r,n]},coercer(t){return Array.isArray(t)?t.slice():t},validator(t){return Array.isArray(t)||`Expected an array value, but received: ${He(t)}`}})}function je(){return kr("boolean",n=>typeof n=="boolean")}function Fi(n){return kr("instance",t=>t instanceof n||`Expected a \`${n.name}\` instance, but received: ${He(t)}`)}function Ot(n){const t=He(n),e=typeof n;return new Ze({type:"literal",schema:e==="string"||e==="number"||e==="boolean"?n:null,validator(r){return r===n||`Expected the literal \`${t}\`, but received: ${He(r)}`}})}function Za(){return kr("never",()=>!1)}function Y(n){return new Ze({...n,validator:(t,e)=>t===null||n.validator(t,e),refiner:(t,e)=>t===null||n.refiner(t,e)})}function C(){return kr("number",n=>typeof n=="number"&&!isNaN(n)||`Expected a number, but received: ${He(n)}`)}function at(n){return new Ze({...n,validator:(t,e)=>t===void 0||n.validator(t,e),refiner:(t,e)=>t===void 0||n.refiner(t,e)})}function Gs(n,t){return new Ze({type:"record",schema:null,*entries(e){if(nr(e))for(const r in e){const s=e[r];yield[r,r,n],yield[r,s,t]}},validator(e){return nr(e)||`Expected an object, but received: ${He(e)}`}})}function j(){return kr("string",n=>typeof n=="string"||`Expected a string, but received: ${He(n)}`)}function Ni(n){const t=Za();return new Ze({type:"tuple",schema:null,*entries(e){if(Array.isArray(e)){const r=Math.max(n.length,e.length);for(let s=0;s<r;s++)yield[s,e[s],n[s]||t]}},validator(e){return Array.isArray(e)||`Expected an array, but received: ${He(e)}`}})}function $(n){const t=Object.keys(n);return new Ze({type:"type",schema:n,*entries(e){if(nr(e))for(const r of t)yield[r,e[r],n[r]]},validator(e){return nr(e)||`Expected an object, but received: ${He(e)}`},coercer(e){return nr(e)?{...e}:e}})}function ke(n){const t=n.map(e=>e.type).join(" | ");return new Ze({type:"union",schema:null,coercer(e){for(const r of n){const[s,i]=r.validate(e,{coerce:!0});if(!s)return i}return e},validator(e,r){const s=[];for(const i of n){const[...o]=Ui(e,i,r),[c]=o;if(c[0])for(const[d]of o)d&&s.push(d);else return[]}return[`Expected the value to satisfy a union of \`${t}\`, but received: ${He(e)}`,...s]}})}function en(){return kr("unknown",()=>!0)}function rn(n,t,e){return new Ze({...n,coercer:(r,s)=>Vs(r,t)?n.coercer(e(r,s),s):n.coercer(r,s)})}function ys(n){if(!Number.isSafeInteger(n)||n<0)throw new Error(`positive integer expected, not ${n}`)}function Ya(n){return n instanceof Uint8Array||n!=null&&typeof n=="object"&&n.constructor.name==="Uint8Array"}function kn(n,...t){if(!Ya(n))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(n.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${n.length}`)}function Xa(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");ys(n.outputLen),ys(n.blockLen)}function mn(n,t=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(t&&n.finished)throw new Error("Hash#digest() has already been called")}function Ja(n,t){kn(n);const e=t.outputLen;if(n.length<e)throw new Error(`digestInto() expects output buffer of length at least ${e}`)}const ii=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const si=n=>new DataView(n.buffer,n.byteOffset,n.byteLength),We=(n,t)=>n<<32-t|n>>>t;new Uint8Array(new Uint32Array([287454020]).buffer)[0];function js(n){if(typeof n!="string")throw new Error(`utf8ToBytes expected string, got ${typeof n}`);return new Uint8Array(new TextEncoder().encode(n))}function Pi(n){return typeof n=="string"&&(n=js(n)),kn(n),n}function Zs(...n){let t=0;for(let r=0;r<n.length;r++){const s=n[r];kn(s),t+=s.length}const e=new Uint8Array(t);for(let r=0,s=0;r<n.length;r++){const i=n[r];e.set(i,s),s+=i.length}return e}class Ys{clone(){return this._cloneInto()}}function Xs(n){const t=r=>n().update(Pi(r)).digest(),e=n();return t.outputLen=e.outputLen,t.blockLen=e.blockLen,t.create=()=>n(),t}function Js(n=32){if(ii&&typeof ii.getRandomValues=="function")return ii.getRandomValues(new Uint8Array(n));throw new Error("crypto.getRandomValues must be defined")}function Qa(n,t,e,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(t,e,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(e>>s&i),c=Number(e&i),d=r?4:0,S=r?0:4;n.setUint32(t+d,o,r),n.setUint32(t+S,c,r)}const tc=(n,t,e)=>n&t^~n&e,ec=(n,t,e)=>n&t^n&e^t&e;class Qs extends Ys{constructor(t,e,r,s){super(),this.blockLen=t,this.outputLen=e,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=si(this.buffer)}update(t){mn(this);const{view:e,buffer:r,blockLen:s}=this;t=Pi(t);const i=t.length;for(let o=0;o<i;){const c=Math.min(s-this.pos,i-o);if(c===s){const d=si(t);for(;s<=i-o;o+=s)this.process(d,o);continue}r.set(t.subarray(o,o+c),this.pos),this.pos+=c,o+=c,this.pos===s&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){mn(this),Ja(t,this),this.finished=!0;const{buffer:e,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;e[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let A=o;A<s;A++)e[A]=0;Qa(r,s-8,BigInt(this.length*8),i),this.process(r,0);const c=si(t),d=this.outputLen;if(d%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const S=d/4,E=this.get();if(S>E.length)throw new Error("_sha2: outputLen bigger than state");for(let A=0;A<S;A++)c.setUint32(4*A,E[A],i)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const r=t.slice(0,e);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:r,length:s,finished:i,destroyed:o,pos:c}=this;return t.length=s,t.pos=c,t.finished=i,t.destroyed=o,s%e&&t.buffer.set(r),t}}const cn=BigInt(2**32-1),vi=BigInt(32);function to(n,t=!1){return t?{h:Number(n&cn),l:Number(n>>vi&cn)}:{h:Number(n>>vi&cn)|0,l:Number(n&cn)|0}}function rc(n,t=!1){let e=new Uint32Array(n.length),r=new Uint32Array(n.length);for(let s=0;s<n.length;s++){const{h:i,l:o}=to(n[s],t);[e[s],r[s]]=[i,o]}return[e,r]}const nc=(n,t)=>BigInt(n>>>0)<<vi|BigInt(t>>>0),ic=(n,t,e)=>n>>>e,sc=(n,t,e)=>n<<32-e|t>>>e,oc=(n,t,e)=>n>>>e|t<<32-e,ac=(n,t,e)=>n<<32-e|t>>>e,cc=(n,t,e)=>n<<64-e|t>>>e-32,uc=(n,t,e)=>n>>>e-32|t<<64-e,fc=(n,t)=>t,lc=(n,t)=>n,hc=(n,t,e)=>n<<e|t>>>32-e,dc=(n,t,e)=>t<<e|n>>>32-e,pc=(n,t,e)=>t<<e-32|n>>>64-e,gc=(n,t,e)=>n<<e-32|t>>>64-e;function mc(n,t,e,r){const s=(t>>>0)+(r>>>0);return{h:n+e+(s/2**32|0)|0,l:s|0}}const yc=(n,t,e)=>(n>>>0)+(t>>>0)+(e>>>0),wc=(n,t,e,r)=>t+e+r+(n/2**32|0)|0,bc=(n,t,e,r)=>(n>>>0)+(t>>>0)+(e>>>0)+(r>>>0),vc=(n,t,e,r,s)=>t+e+r+s+(n/2**32|0)|0,xc=(n,t,e,r,s)=>(n>>>0)+(t>>>0)+(e>>>0)+(r>>>0)+(s>>>0),Sc=(n,t,e,r,s,i)=>t+e+r+s+i+(n/2**32|0)|0,gt={fromBig:to,split:rc,toBig:nc,shrSH:ic,shrSL:sc,rotrSH:oc,rotrSL:ac,rotrBH:cc,rotrBL:uc,rotr32H:fc,rotr32L:lc,rotlSH:hc,rotlSL:dc,rotlBH:pc,rotlBL:gc,add:mc,add3L:yc,add3H:wc,add4L:bc,add4H:vc,add5H:Sc,add5L:xc},[Bc,Ec]=gt.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(n=>BigInt(n))),or=new Uint32Array(80),ar=new Uint32Array(80);class _c extends Qs{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:e,Bh:r,Bl:s,Ch:i,Cl:o,Dh:c,Dl:d,Eh:S,El:E,Fh:A,Fl:P,Gh:M,Gl:T,Hh:k,Hl:R}=this;return[t,e,r,s,i,o,c,d,S,E,A,P,M,T,k,R]}set(t,e,r,s,i,o,c,d,S,E,A,P,M,T,k,R){this.Ah=t|0,this.Al=e|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=c|0,this.Dl=d|0,this.Eh=S|0,this.El=E|0,this.Fh=A|0,this.Fl=P|0,this.Gh=M|0,this.Gl=T|0,this.Hh=k|0,this.Hl=R|0}process(t,e){for(let O=0;O<16;O++,e+=4)or[O]=t.getUint32(e),ar[O]=t.getUint32(e+=4);for(let O=16;O<80;O++){const W=or[O-15]|0,q=ar[O-15]|0,z=gt.rotrSH(W,q,1)^gt.rotrSH(W,q,8)^gt.shrSH(W,q,7),K=gt.rotrSL(W,q,1)^gt.rotrSL(W,q,8)^gt.shrSL(W,q,7),J=or[O-2]|0,vt=ar[O-2]|0,dt=gt.rotrSH(J,vt,19)^gt.rotrBH(J,vt,61)^gt.shrSH(J,vt,6),Q=gt.rotrSL(J,vt,19)^gt.rotrBL(J,vt,61)^gt.shrSL(J,vt,6),xt=gt.add4L(K,Q,ar[O-7],ar[O-16]),B=gt.add4H(xt,z,dt,or[O-7],or[O-16]);or[O]=B|0,ar[O]=xt|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:c,Cl:d,Dh:S,Dl:E,Eh:A,El:P,Fh:M,Fl:T,Gh:k,Gl:R,Hh:F,Hl:D}=this;for(let O=0;O<80;O++){const W=gt.rotrSH(A,P,14)^gt.rotrSH(A,P,18)^gt.rotrBH(A,P,41),q=gt.rotrSL(A,P,14)^gt.rotrSL(A,P,18)^gt.rotrBL(A,P,41),z=A&M^~A&k,K=P&T^~P&R,J=gt.add5L(D,q,K,Ec[O],ar[O]),vt=gt.add5H(J,F,W,z,Bc[O],or[O]),dt=J|0,Q=gt.rotrSH(r,s,28)^gt.rotrBH(r,s,34)^gt.rotrBH(r,s,39),xt=gt.rotrSL(r,s,28)^gt.rotrBL(r,s,34)^gt.rotrBL(r,s,39),B=r&i^r&c^i&c,a=s&o^s&d^o&d;F=k|0,D=R|0,k=M|0,R=T|0,M=A|0,T=P|0,{h:A,l:P}=gt.add(S|0,E|0,vt|0,dt|0),S=c|0,E=d|0,c=i|0,d=o|0,i=r|0,o=s|0;const h=gt.add3L(dt,xt,a);r=gt.add3H(h,vt,Q,B),s=h|0}({h:r,l:s}=gt.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=gt.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:c,l:d}=gt.add(this.Ch|0,this.Cl|0,c|0,d|0),{h:S,l:E}=gt.add(this.Dh|0,this.Dl|0,S|0,E|0),{h:A,l:P}=gt.add(this.Eh|0,this.El|0,A|0,P|0),{h:M,l:T}=gt.add(this.Fh|0,this.Fl|0,M|0,T|0),{h:k,l:R}=gt.add(this.Gh|0,this.Gl|0,k|0,R|0),{h:F,l:D}=gt.add(this.Hh|0,this.Hl|0,F|0,D|0),this.set(r,s,i,o,c,d,S,E,A,P,M,T,k,R,F,D)}roundClean(){or.fill(0),ar.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const eo=Xs(()=>new _c);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ro=BigInt(0),An=BigInt(1),kc=BigInt(2);function Br(n){return n instanceof Uint8Array||n!=null&&typeof n=="object"&&n.constructor.name==="Uint8Array"}function nn(n){if(!Br(n))throw new Error("Uint8Array expected")}const Ac=Array.from({length:256},(n,t)=>t.toString(16).padStart(2,"0"));function Er(n){nn(n);let t="";for(let e=0;e<n.length;e++)t+=Ac[n[e]];return t}function no(n){const t=n.toString(16);return t.length&1?`0${t}`:t}function Oi(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);return BigInt(n===""?"0":`0x${n}`)}const Qe={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function ws(n){if(n>=Qe._0&&n<=Qe._9)return n-Qe._0;if(n>=Qe._A&&n<=Qe._F)return n-(Qe._A-10);if(n>=Qe._a&&n<=Qe._f)return n-(Qe._a-10)}function Pr(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);const t=n.length,e=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(e);for(let s=0,i=0;s<e;s++,i+=2){const o=ws(n.charCodeAt(i)),c=ws(n.charCodeAt(i+1));if(o===void 0||c===void 0){const d=n[i]+n[i+1];throw new Error('hex string expected, got non-hex character "'+d+'" at index '+i)}r[s]=o*16+c}return r}function xr(n){return Oi(Er(n))}function Fr(n){return nn(n),Oi(Er(Uint8Array.from(n).reverse()))}function Or(n,t){return Pr(n.toString(16).padStart(t*2,"0"))}function Yr(n,t){return Or(n,t).reverse()}function Ic(n){return Pr(no(n))}function ue(n,t,e){let r;if(typeof t=="string")try{r=Pr(t)}catch(i){throw new Error(`${n} must be valid hex string, got "${t}". Cause: ${i}`)}else if(Br(t))r=Uint8Array.from(t);else throw new Error(`${n} must be hex string or Uint8Array`);const s=r.length;if(typeof e=="number"&&s!==e)throw new Error(`${n} expected ${e} bytes, got ${s}`);return r}function _r(...n){let t=0;for(let r=0;r<n.length;r++){const s=n[r];nn(s),t+=s.length}const e=new Uint8Array(t);for(let r=0,s=0;r<n.length;r++){const i=n[r];e.set(i,s),s+=i.length}return e}function Mc(n,t){if(n.length!==t.length)return!1;let e=0;for(let r=0;r<n.length;r++)e|=n[r]^t[r];return e===0}function Rc(n){if(typeof n!="string")throw new Error(`utf8ToBytes expected string, got ${typeof n}`);return new Uint8Array(new TextEncoder().encode(n))}function Tc(n){let t;for(t=0;n>ro;n>>=An,t+=1);return t}function Lc(n,t){return n>>BigInt(t)&An}function Cc(n,t,e){return n|(e?An:ro)<<BigInt(t)}const qi=n=>(kc<<BigInt(n-1))-An,oi=n=>new Uint8Array(n),bs=n=>Uint8Array.from(n);function io(n,t,e){if(typeof n!="number"||n<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof e!="function")throw new Error("hmacFn must be a function");let r=oi(n),s=oi(n),i=0;const o=()=>{r.fill(1),s.fill(0),i=0},c=(...A)=>e(s,r,...A),d=(A=oi())=>{s=c(bs([0]),A),r=c(),A.length!==0&&(s=c(bs([1]),A),r=c())},S=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let A=0;const P=[];for(;A<t;){r=c();const M=r.slice();P.push(M),A+=r.length}return _r(...P)};return(A,P)=>{o(),d(A);let M;for(;!(M=P(S()));)d();return o(),M}}const Uc={bigint:n=>typeof n=="bigint",function:n=>typeof n=="function",boolean:n=>typeof n=="boolean",string:n=>typeof n=="string",stringOrUint8Array:n=>typeof n=="string"||Br(n),isSafeInteger:n=>Number.isSafeInteger(n),array:n=>Array.isArray(n),field:(n,t)=>t.Fp.isValid(n),hash:n=>typeof n=="function"&&Number.isSafeInteger(n.outputLen)};function zr(n,t,e={}){const r=(s,i,o)=>{const c=Uc[i];if(typeof c!="function")throw new Error(`Invalid validator "${i}", expected function`);const d=n[s];if(!(o&&d===void 0)&&!c(d,n))throw new Error(`Invalid param ${String(s)}=${d} (${typeof d}), expected ${i}`)};for(const[s,i]of Object.entries(t))r(s,i,!1);for(const[s,i]of Object.entries(e))r(s,i,!0);return n}const Fc=Object.freeze(Object.defineProperty({__proto__:null,abytes:nn,bitGet:Lc,bitLen:Tc,bitMask:qi,bitSet:Cc,bytesToHex:Er,bytesToNumberBE:xr,bytesToNumberLE:Fr,concatBytes:_r,createHmacDrbg:io,ensureBytes:ue,equalBytes:Mc,hexToBytes:Pr,hexToNumber:Oi,isBytes:Br,numberToBytesBE:Or,numberToBytesLE:Yr,numberToHexUnpadded:no,numberToVarBytesBE:Ic,utf8ToBytes:Rc,validateObject:zr},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const le=BigInt(0),qt=BigInt(1),yr=BigInt(2),Nc=BigInt(3),xi=BigInt(4),vs=BigInt(5),xs=BigInt(8);BigInt(9);BigInt(16);function Nt(n,t){const e=n%t;return e>=le?e:t+e}function Pc(n,t,e){if(e<=le||t<le)throw new Error("Expected power/modulo > 0");if(e===qt)return le;let r=qt;for(;t>le;)t&qt&&(r=r*n%e),n=n*n%e,t>>=qt;return r}function zt(n,t,e){let r=n;for(;t-- >le;)r*=r,r%=e;return r}function Si(n,t){if(n===le||t<=le)throw new Error(`invert: expected positive integers, got n=${n} mod=${t}`);let e=Nt(n,t),r=t,s=le,i=qt;for(;e!==le;){const c=r/e,d=r%e,S=s-i*c;r=e,e=d,s=i,i=S}if(r!==qt)throw new Error("invert: does not exist");return Nt(s,t)}function Oc(n){const t=(n-qt)/yr;let e,r,s;for(e=n-qt,r=0;e%yr===le;e/=yr,r++);for(s=yr;s<n&&Pc(s,t,n)!==n-qt;s++);if(r===1){const o=(n+qt)/xi;return function(d,S){const E=d.pow(S,o);if(!d.eql(d.sqr(E),S))throw new Error("Cannot find square root");return E}}const i=(e+qt)/yr;return function(c,d){if(c.pow(d,t)===c.neg(c.ONE))throw new Error("Cannot find square root");let S=r,E=c.pow(c.mul(c.ONE,s),e),A=c.pow(d,i),P=c.pow(d,e);for(;!c.eql(P,c.ONE);){if(c.eql(P,c.ZERO))return c.ZERO;let M=1;for(let k=c.sqr(P);M<S&&!c.eql(k,c.ONE);M++)k=c.sqr(k);const T=c.pow(E,qt<<BigInt(S-M-1));E=c.sqr(T),A=c.mul(A,T),P=c.mul(P,E),S=M}return A}}function qc(n){if(n%xi===Nc){const t=(n+qt)/xi;return function(r,s){const i=r.pow(s,t);if(!r.eql(r.sqr(i),s))throw new Error("Cannot find square root");return i}}if(n%xs===vs){const t=(n-vs)/xs;return function(r,s){const i=r.mul(s,yr),o=r.pow(i,t),c=r.mul(s,o),d=r.mul(r.mul(c,yr),o),S=r.mul(c,r.sub(d,r.ONE));if(!r.eql(r.sqr(S),s))throw new Error("Cannot find square root");return S}}return Oc(n)}const Dc=(n,t)=>(Nt(n,t)&qt)===qt,zc=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function $c(n){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},e=zc.reduce((r,s)=>(r[s]="function",r),t);return zr(n,e)}function Hc(n,t,e){if(e<le)throw new Error("Expected power > 0");if(e===le)return n.ONE;if(e===qt)return t;let r=n.ONE,s=t;for(;e>le;)e&qt&&(r=n.mul(r,s)),s=n.sqr(s),e>>=qt;return r}function Kc(n,t){const e=new Array(t.length),r=t.reduce((i,o,c)=>n.is0(o)?i:(e[c]=i,n.mul(i,o)),n.ONE),s=n.inv(r);return t.reduceRight((i,o,c)=>n.is0(o)?i:(e[c]=n.mul(i,e[c]),n.mul(i,o)),s),e}function so(n,t){const e=t!==void 0?t:n.toString(2).length,r=Math.ceil(e/8);return{nBitLength:e,nByteLength:r}}function oo(n,t,e=!1,r={}){if(n<=le)throw new Error(`Expected Field ORDER > 0, got ${n}`);const{nBitLength:s,nByteLength:i}=so(n,t);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=qc(n),c=Object.freeze({ORDER:n,BITS:s,BYTES:i,MASK:qi(s),ZERO:le,ONE:qt,create:d=>Nt(d,n),isValid:d=>{if(typeof d!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof d}`);return le<=d&&d<n},is0:d=>d===le,isOdd:d=>(d&qt)===qt,neg:d=>Nt(-d,n),eql:(d,S)=>d===S,sqr:d=>Nt(d*d,n),add:(d,S)=>Nt(d+S,n),sub:(d,S)=>Nt(d-S,n),mul:(d,S)=>Nt(d*S,n),pow:(d,S)=>Hc(c,d,S),div:(d,S)=>Nt(d*Si(S,n),n),sqrN:d=>d*d,addN:(d,S)=>d+S,subN:(d,S)=>d-S,mulN:(d,S)=>d*S,inv:d=>Si(d,n),sqrt:r.sqrt||(d=>o(c,d)),invertBatch:d=>Kc(c,d),cmov:(d,S,E)=>E?S:d,toBytes:d=>e?Yr(d,i):Or(d,i),fromBytes:d=>{if(d.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${d.length}`);return e?Fr(d):xr(d)}});return Object.freeze(c)}function Wc(n,t){if(!n.isOdd)throw new Error("Field doesn't have isOdd");const e=n.sqrt(t);return n.isOdd(e)?n.neg(e):e}function ao(n){if(typeof n!="bigint")throw new Error("field order must be bigint");const t=n.toString(2).length;return Math.ceil(t/8)}function co(n){const t=ao(n);return t+Math.ceil(t/2)}function Vc(n,t,e=!1){const r=n.length,s=ao(t),i=co(t);if(r<16||r<i||r>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${r}`);const o=e?xr(n):Fr(n),c=Nt(o,t-qt)+qt;return e?Yr(c,s):Or(c,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Gc=BigInt(0),ai=BigInt(1);function uo(n,t){const e=(s,i)=>{const o=i.negate();return s?o:i},r=s=>{const i=Math.ceil(t/s)+1,o=2**(s-1);return{windows:i,windowSize:o}};return{constTimeNegate:e,unsafeLadder(s,i){let o=n.ZERO,c=s;for(;i>Gc;)i&ai&&(o=o.add(c)),c=c.double(),i>>=ai;return o},precomputeWindow(s,i){const{windows:o,windowSize:c}=r(i),d=[];let S=s,E=S;for(let A=0;A<o;A++){E=S,d.push(E);for(let P=1;P<c;P++)E=E.add(S),d.push(E);S=E.double()}return d},wNAF(s,i,o){const{windows:c,windowSize:d}=r(s);let S=n.ZERO,E=n.BASE;const A=BigInt(2**s-1),P=2**s,M=BigInt(s);for(let T=0;T<c;T++){const k=T*d;let R=Number(o&A);o>>=M,R>d&&(R-=P,o+=ai);const F=k,D=k+Math.abs(R)-1,O=T%2!==0,W=R<0;R===0?E=E.add(e(O,i[F])):S=S.add(e(W,i[D]))}return{p:S,f:E}},wNAFCached(s,i,o,c){const d=s._WINDOW_SIZE||1;let S=i.get(s);return S||(S=this.precomputeWindow(s,d),d!==1&&i.set(s,c(S))),this.wNAF(d,S,o)}}}function Di(n){return $c(n.Fp),zr(n,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...so(n.n,n.nBitLength),...n,p:n.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const qe=BigInt(0),Ae=BigInt(1),un=BigInt(2),jc=BigInt(8),Zc={zip215:!0};function Yc(n){const t=Di(n);return zr(n,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...t})}function zi(n){const t=Yc(n),{Fp:e,n:r,prehash:s,hash:i,randomBytes:o,nByteLength:c,h:d}=t,S=un<<BigInt(c*8)-Ae,E=e.create,A=t.uvRatio||((y,w)=>{try{return{isValid:!0,value:e.sqrt(y*e.inv(w))}}catch{return{isValid:!1,value:qe}}}),P=t.adjustScalarBytes||(y=>y),M=t.domain||((y,w,_)=>{if(w.length||_)throw new Error("Contexts/pre-hash are not supported");return y}),T=y=>typeof y=="bigint"&&qe<y,k=(y,w)=>T(y)&&T(w)&&y<w,R=y=>y===qe||k(y,S);function F(y,w){if(k(y,w))return y;throw new Error(`Expected valid scalar < ${w}, got ${typeof y} ${y}`)}function D(y){return y===qe?y:F(y,r)}const O=new Map;function W(y){if(!(y instanceof q))throw new Error("ExtendedPoint expected")}class q{constructor(w,_,m,f){if(this.ex=w,this.ey=_,this.ez=m,this.et=f,!R(w))throw new Error("x required");if(!R(_))throw new Error("y required");if(!R(m))throw new Error("z required");if(!R(f))throw new Error("t required")}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(w){if(w instanceof q)throw new Error("extended point not allowed");const{x:_,y:m}=w||{};if(!R(_)||!R(m))throw new Error("invalid affine point");return new q(_,m,Ae,E(_*m))}static normalizeZ(w){const _=e.invertBatch(w.map(m=>m.ez));return w.map((m,f)=>m.toAffine(_[f])).map(q.fromAffine)}_setWindowSize(w){this._WINDOW_SIZE=w,O.delete(this)}assertValidity(){const{a:w,d:_}=t;if(this.is0())throw new Error("bad point: ZERO");const{ex:m,ey:f,ez:x,et:H}=this,V=E(m*m),G=E(f*f),it=E(x*x),rt=E(it*it),ot=E(V*w),Pt=E(it*E(ot+G)),pt=E(rt+E(_*E(V*G)));if(Pt!==pt)throw new Error("bad point: equation left != right (1)");const yt=E(m*f),Bt=E(x*H);if(yt!==Bt)throw new Error("bad point: equation left != right (2)")}equals(w){W(w);const{ex:_,ey:m,ez:f}=this,{ex:x,ey:H,ez:V}=w,G=E(_*V),it=E(x*f),rt=E(m*V),ot=E(H*f);return G===it&&rt===ot}is0(){return this.equals(q.ZERO)}negate(){return new q(E(-this.ex),this.ey,this.ez,E(-this.et))}double(){const{a:w}=t,{ex:_,ey:m,ez:f}=this,x=E(_*_),H=E(m*m),V=E(un*E(f*f)),G=E(w*x),it=_+m,rt=E(E(it*it)-x-H),ot=G+H,Pt=ot-V,pt=G-H,yt=E(rt*Pt),Bt=E(ot*pt),wt=E(rt*pt),_t=E(Pt*ot);return new q(yt,Bt,_t,wt)}add(w){W(w);const{a:_,d:m}=t,{ex:f,ey:x,ez:H,et:V}=this,{ex:G,ey:it,ez:rt,et:ot}=w;if(_===BigInt(-1)){const ye=E((x-f)*(it+G)),Mt=E((x+f)*(it-G)),Rt=E(Mt-ye);if(Rt===qe)return this.double();const Ee=E(H*un*ot),Lt=E(V*un*rt),p=Lt+Ee,u=Mt+ye,l=Lt-Ee,b=E(p*Rt),I=E(u*l),L=E(p*l),N=E(Rt*u);return new q(b,I,N,L)}const Pt=E(f*G),pt=E(x*it),yt=E(V*m*ot),Bt=E(H*rt),wt=E((f+x)*(G+it)-Pt-pt),_t=Bt-yt,Ke=Bt+yt,At=E(pt-_*Pt),Ut=E(wt*_t),Rr=E(Ke*At),Tt=E(wt*At),It=E(_t*Ke);return new q(Ut,Rr,It,Tt)}subtract(w){return this.add(w.negate())}wNAF(w){return J.wNAFCached(this,O,w,q.normalizeZ)}multiply(w){const{p:_,f:m}=this.wNAF(F(w,r));return q.normalizeZ([_,m])[0]}multiplyUnsafe(w){let _=D(w);return _===qe?K:this.equals(K)||_===Ae?this:this.equals(z)?this.wNAF(_).p:J.unsafeLadder(this,_)}isSmallOrder(){return this.multiplyUnsafe(d).is0()}isTorsionFree(){return J.unsafeLadder(this,r).is0()}toAffine(w){const{ex:_,ey:m,ez:f}=this,x=this.is0();w==null&&(w=x?jc:e.inv(f));const H=E(_*w),V=E(m*w),G=E(f*w);if(x)return{x:qe,y:Ae};if(G!==Ae)throw new Error("invZ was invalid");return{x:H,y:V}}clearCofactor(){const{h:w}=t;return w===Ae?this:this.multiplyUnsafe(w)}static fromHex(w,_=!1){const{d:m,a:f}=t,x=e.BYTES;w=ue("pointHex",w,x);const H=w.slice(),V=w[x-1];H[x-1]=V&-129;const G=Fr(H);G===qe||(_?F(G,S):F(G,e.ORDER));const it=E(G*G),rt=E(it-Ae),ot=E(m*it-f);let{isValid:Pt,value:pt}=A(rt,ot);if(!Pt)throw new Error("Point.fromHex: invalid y coordinate");const yt=(pt&Ae)===Ae,Bt=(V&128)!==0;if(!_&&pt===qe&&Bt)throw new Error("Point.fromHex: x=0 and x_0=1");return Bt!==yt&&(pt=E(-pt)),q.fromAffine({x:pt,y:G})}static fromPrivateKey(w){return Q(w).point}toRawBytes(){const{x:w,y:_}=this.toAffine(),m=Yr(_,e.BYTES);return m[m.length-1]|=w&Ae?128:0,m}toHex(){return Er(this.toRawBytes())}}q.BASE=new q(t.Gx,t.Gy,Ae,E(t.Gx*t.Gy)),q.ZERO=new q(qe,Ae,Ae,qe);const{BASE:z,ZERO:K}=q,J=uo(q,c*8);function vt(y){return Nt(y,r)}function dt(y){return vt(Fr(y))}function Q(y){const w=c;y=ue("private key",y,w);const _=ue("hashed private key",i(y),2*w),m=P(_.slice(0,w)),f=_.slice(w,2*w),x=dt(m),H=z.multiply(x),V=H.toRawBytes();return{head:m,prefix:f,scalar:x,point:H,pointBytes:V}}function xt(y){return Q(y).pointBytes}function B(y=new Uint8Array,...w){const _=_r(...w);return dt(i(M(_,ue("context",y),!!s)))}function a(y,w,_={}){y=ue("message",y),s&&(y=s(y));const{prefix:m,scalar:f,pointBytes:x}=Q(w),H=B(_.context,m,y),V=z.multiply(H).toRawBytes(),G=B(_.context,V,x,y),it=vt(H+G*f);D(it);const rt=_r(V,Yr(it,e.BYTES));return ue("result",rt,c*2)}const h=Zc;function g(y,w,_,m=h){const{context:f,zip215:x}=m,H=e.BYTES;y=ue("signature",y,2*H),w=ue("message",w),s&&(w=s(w));const V=Fr(y.slice(H,2*H));let G,it,rt;try{G=q.fromHex(_,x),it=q.fromHex(y.slice(0,H),x),rt=z.multiplyUnsafe(V)}catch{return!1}if(!x&&G.isSmallOrder())return!1;const ot=B(f,it.toRawBytes(),G.toRawBytes(),w);return it.add(G.multiplyUnsafe(ot)).subtract(rt).clearCofactor().equals(q.ZERO)}return z._setWindowSize(8),{CURVE:t,getPublicKey:xt,sign:a,verify:g,ExtendedPoint:q,utils:{getExtendedPublicKey:Q,randomPrivateKey:()=>o(e.BYTES),precompute(y=8,w=q.BASE){return w._setWindowSize(y),w.multiply(BigInt(3)),w}}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const $i=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),Ss=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const Xc=BigInt(1),Bi=BigInt(2),Jc=BigInt(5),Bs=BigInt(10),Qc=BigInt(20),tu=BigInt(40),Es=BigInt(80);function eu(n){const t=$i,r=n*n%t*n%t,s=zt(r,Bi,t)*r%t,i=zt(s,Xc,t)*n%t,o=zt(i,Jc,t)*i%t,c=zt(o,Bs,t)*o%t,d=zt(c,Qc,t)*c%t,S=zt(d,tu,t)*d%t,E=zt(S,Es,t)*S%t,A=zt(E,Es,t)*S%t,P=zt(A,Bs,t)*o%t;return{pow_p_5_8:zt(P,Bi,t)*n%t,b2:r}}function ru(n){return n[0]&=248,n[31]&=127,n[31]|=64,n}function nu(n,t){const e=$i,r=Nt(t*t*t,e),s=Nt(r*r*t,e),i=eu(n*s).pow_p_5_8;let o=Nt(n*r*i,e);const c=Nt(t*o*o,e),d=o,S=Nt(o*Ss,e),E=c===n,A=c===Nt(-n,e),P=c===Nt(-n*Ss,e);return E&&(o=d),(A||P)&&(o=S),Dc(o,e)&&(o=Nt(-o,e)),{isValid:E||A,value:o}}const ir=oo($i,void 0,!0),Hi={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:ir,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:eo,randomBytes:Js,adjustScalarBytes:ru,uvRatio:nu},Ki=zi(Hi);function fo(n,t,e){if(t.length>255)throw new Error("Context is too big");return Zs(js("SigEd25519 no Ed25519 collisions"),new Uint8Array([e?1:0,t.length]),t,n)}({...Hi});({...Hi});const iu=(ir.ORDER+BigInt(3))/BigInt(8);ir.pow(Bi,iu);ir.sqrt(ir.neg(ir.ONE));(ir.ORDER-BigInt(5))/BigInt(8);BigInt(486662);Wc(ir,ir.neg(BigInt(486664)));BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235");BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578");BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838");BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952");BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");var fn=Ws.Buffer;function su(n){if(n.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),e=0;e<t.length;e++)t[e]=255;for(var r=0;r<n.length;r++){var s=n.charAt(r),i=s.charCodeAt(0);if(t[i]!==255)throw new TypeError(s+" is ambiguous");t[i]=r}var o=n.length,c=n.charAt(0),d=Math.log(o)/Math.log(256),S=Math.log(256)/Math.log(o);function E(M){if((Array.isArray(M)||M instanceof Uint8Array)&&(M=fn.from(M)),!fn.isBuffer(M))throw new TypeError("Expected Buffer");if(M.length===0)return"";for(var T=0,k=0,R=0,F=M.length;R!==F&&M[R]===0;)R++,T++;for(var D=(F-R)*S+1>>>0,O=new Uint8Array(D);R!==F;){for(var W=M[R],q=0,z=D-1;(W!==0||q<k)&&z!==-1;z--,q++)W+=256*O[z]>>>0,O[z]=W%o>>>0,W=W/o>>>0;if(W!==0)throw new Error("Non-zero carry");k=q,R++}for(var K=D-k;K!==D&&O[K]===0;)K++;for(var J=c.repeat(T);K<D;++K)J+=n.charAt(O[K]);return J}function A(M){if(typeof M!="string")throw new TypeError("Expected String");if(M.length===0)return fn.alloc(0);for(var T=0,k=0,R=0;M[T]===c;)k++,T++;for(var F=(M.length-T)*d+1>>>0,D=new Uint8Array(F);M[T];){var O=t[M.charCodeAt(T)];if(O===255)return;for(var W=0,q=F-1;(O!==0||W<R)&&q!==-1;q--,W++)O+=o*D[q]>>>0,D[q]=O%256>>>0,O=O/256>>>0;if(O!==0)throw new Error("Non-zero carry");R=W,T++}for(var z=F-R;z!==F&&D[z]===0;)z++;var K=fn.allocUnsafe(k+(F-z));K.fill(0,0,k);for(var J=k;z!==F;)K[J++]=D[z++];return K}function P(M){var T=A(M);if(T)return T;throw new Error("Non-base"+o+" character")}return{encode:E,decodeUnsafe:A,decode:P}}var ou=su,au=ou,cu="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",uu=au(cu);const me=Ti(uu),fu=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),cr=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),ur=new Uint32Array(64);class lu extends Qs{constructor(){super(64,32,8,!1),this.A=cr[0]|0,this.B=cr[1]|0,this.C=cr[2]|0,this.D=cr[3]|0,this.E=cr[4]|0,this.F=cr[5]|0,this.G=cr[6]|0,this.H=cr[7]|0}get(){const{A:t,B:e,C:r,D:s,E:i,F:o,G:c,H:d}=this;return[t,e,r,s,i,o,c,d]}set(t,e,r,s,i,o,c,d){this.A=t|0,this.B=e|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=c|0,this.H=d|0}process(t,e){for(let A=0;A<16;A++,e+=4)ur[A]=t.getUint32(e,!1);for(let A=16;A<64;A++){const P=ur[A-15],M=ur[A-2],T=We(P,7)^We(P,18)^P>>>3,k=We(M,17)^We(M,19)^M>>>10;ur[A]=k+ur[A-7]+T+ur[A-16]|0}let{A:r,B:s,C:i,D:o,E:c,F:d,G:S,H:E}=this;for(let A=0;A<64;A++){const P=We(c,6)^We(c,11)^We(c,25),M=E+P+tc(c,d,S)+fu[A]+ur[A]|0,k=(We(r,2)^We(r,13)^We(r,22))+ec(r,s,i)|0;E=S,S=d,d=c,c=o+M|0,o=i,i=s,s=r,r=M+k|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,c=c+this.E|0,d=d+this.F|0,S=S+this.G|0,E=E+this.H|0,this.set(r,s,i,o,c,d,S,E)}roundClean(){ur.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Ei=Xs(()=>new lu);var ge={},ln=Ws.Buffer;function hu(n){if(n.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),e=0;e<t.length;e++)t[e]=255;for(var r=0;r<n.length;r++){var s=n.charAt(r),i=s.charCodeAt(0);if(t[i]!==255)throw new TypeError(s+" is ambiguous");t[i]=r}var o=n.length,c=n.charAt(0),d=Math.log(o)/Math.log(256),S=Math.log(256)/Math.log(o);function E(M){if((Array.isArray(M)||M instanceof Uint8Array)&&(M=ln.from(M)),!ln.isBuffer(M))throw new TypeError("Expected Buffer");if(M.length===0)return"";for(var T=0,k=0,R=0,F=M.length;R!==F&&M[R]===0;)R++,T++;for(var D=(F-R)*S+1>>>0,O=new Uint8Array(D);R!==F;){for(var W=M[R],q=0,z=D-1;(W!==0||q<k)&&z!==-1;z--,q++)W+=256*O[z]>>>0,O[z]=W%o>>>0,W=W/o>>>0;if(W!==0)throw new Error("Non-zero carry");k=q,R++}for(var K=D-k;K!==D&&O[K]===0;)K++;for(var J=c.repeat(T);K<D;++K)J+=n.charAt(O[K]);return J}function A(M){if(typeof M!="string")throw new TypeError("Expected String");if(M.length===0)return ln.alloc(0);for(var T=0,k=0,R=0;M[T]===c;)k++,T++;for(var F=(M.length-T)*d+1>>>0,D=new Uint8Array(F);M[T];){var O=t[M.charCodeAt(T)];if(O===255)return;for(var W=0,q=F-1;(O!==0||W<R)&&q!==-1;q--,W++)O+=o*D[q]>>>0,D[q]=O%256>>>0,O=O/256>>>0;if(O!==0)throw new Error("Non-zero carry");R=W,T++}for(var z=F-R;z!==F&&D[z]===0;)z++;var K=ln.allocUnsafe(k+(F-z));K.fill(0,0,k);for(var J=k;z!==F;)K[J++]=D[z++];return K}function P(M){var T=A(M);if(T)return T;throw new Error("Non-base"+o+" character")}return{encode:E,decodeUnsafe:A,decode:P}}var du=hu,pu=du,gu="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",mu=pu(gu);function tr(n,t,e){return t<=n&&n<=e}function In(n){if(n===void 0)return{};if(n===Object(n))return n;throw TypeError("Could not convert argument to dictionary")}function yu(n){for(var t=String(n),e=t.length,r=0,s=[];r<e;){var i=t.charCodeAt(r);if(i<55296||i>57343)s.push(i);else if(56320<=i&&i<=57343)s.push(65533);else if(55296<=i&&i<=56319)if(r===e-1)s.push(65533);else{var o=n.charCodeAt(r+1);if(56320<=o&&o<=57343){var c=i&1023,d=o&1023;s.push(65536+(c<<10)+d),r+=1}else s.push(65533)}r+=1}return s}function wu(n){for(var t="",e=0;e<n.length;++e){var r=n[e];r<=65535?t+=String.fromCharCode(r):(r-=65536,t+=String.fromCharCode((r>>10)+55296,(r&1023)+56320))}return t}var yn=-1;function Wi(n){this.tokens=[].slice.call(n)}Wi.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():yn},prepend:function(n){if(Array.isArray(n))for(var t=n;t.length;)this.tokens.unshift(t.pop());else this.tokens.unshift(n)},push:function(n){if(Array.isArray(n))for(var t=n;t.length;)this.tokens.push(t.shift());else this.tokens.push(n)}};var qr=-1;function ci(n,t){if(n)throw TypeError("Decoder error");return t||65533}var wn="utf-8";function bn(n,t){if(!(this instanceof bn))return new bn(n,t);if(n=n!==void 0?String(n).toLowerCase():wn,n!==wn)throw new Error("Encoding not supported. Only utf-8 is supported");t=In(t),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!t.fatal,this._ignoreBOM=!!t.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}bn.prototype={decode:function(t,e){var r;typeof t=="object"&&t instanceof ArrayBuffer?r=new Uint8Array(t):typeof t=="object"&&"buffer"in t&&t.buffer instanceof ArrayBuffer?r=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):r=new Uint8Array(0),e=In(e),this._streaming||(this._decoder=new bu({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!e.stream;for(var s=new Wi(r),i=[],o;!s.endOfStream()&&(o=this._decoder.handler(s,s.read()),o!==qr);)o!==null&&(Array.isArray(o)?i.push.apply(i,o):i.push(o));if(!this._streaming){do{if(o=this._decoder.handler(s,s.read()),o===qr)break;o!==null&&(Array.isArray(o)?i.push.apply(i,o):i.push(o))}while(!s.endOfStream());this._decoder=null}return i.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(i[0]===65279?(this._BOMseen=!0,i.shift()):this._BOMseen=!0),wu(i)}};function vn(n,t){if(!(this instanceof vn))return new vn(n,t);if(n=n!==void 0?String(n).toLowerCase():wn,n!==wn)throw new Error("Encoding not supported. Only utf-8 is supported");t=In(t),this._streaming=!1,this._encoder=null,this._options={fatal:!!t.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}vn.prototype={encode:function(t,e){t=t?String(t):"",e=In(e),this._streaming||(this._encoder=new vu(this._options)),this._streaming=!!e.stream;for(var r=[],s=new Wi(yu(t)),i;!s.endOfStream()&&(i=this._encoder.handler(s,s.read()),i!==qr);)Array.isArray(i)?r.push.apply(r,i):r.push(i);if(!this._streaming){for(;i=this._encoder.handler(s,s.read()),i!==qr;)Array.isArray(i)?r.push.apply(r,i):r.push(i);this._encoder=null}return new Uint8Array(r)}};function bu(n){var t=n.fatal,e=0,r=0,s=0,i=128,o=191;this.handler=function(c,d){if(d===yn&&s!==0)return s=0,ci(t);if(d===yn)return qr;if(s===0){if(tr(d,0,127))return d;if(tr(d,194,223))s=1,e=d-192;else if(tr(d,224,239))d===224&&(i=160),d===237&&(o=159),s=2,e=d-224;else if(tr(d,240,244))d===240&&(i=144),d===244&&(o=143),s=3,e=d-240;else return ci(t);return e=e<<6*s,null}if(!tr(d,i,o))return e=s=r=0,i=128,o=191,c.prepend(d),ci(t);if(i=128,o=191,r+=1,e+=d-128<<6*(s-r),r!==s)return null;var S=e;return e=s=r=0,S}}function vu(n){n.fatal,this.handler=function(t,e){if(e===yn)return qr;if(tr(e,0,127))return e;var r,s;tr(e,128,2047)?(r=1,s=192):tr(e,2048,65535)?(r=2,s=224):tr(e,65536,1114111)&&(r=3,s=240);for(var i=[(e>>6*r)+s];r>0;){var o=e>>6*(r-1);i.push(128|o&63),r-=1}return i}}const xu=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:bn,TextEncoder:vn},Symbol.toStringTag,{value:"Module"})),Su=zs(xu);var Bu=$e&&$e.__createBinding||(Object.create?function(n,t,e,r){r===void 0&&(r=e),Object.defineProperty(n,r,{enumerable:!0,get:function(){return t[e]}})}:function(n,t,e,r){r===void 0&&(r=e),n[r]=t[e]}),Eu=$e&&$e.__setModuleDefault||(Object.create?function(n,t){Object.defineProperty(n,"default",{enumerable:!0,value:t})}:function(n,t){n.default=t}),Ye=$e&&$e.__decorate||function(n,t,e,r){var s=arguments.length,i=s<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,t,e,r);else for(var c=n.length-1;c>=0;c--)(o=n[c])&&(i=(s<3?o(i):s>3?o(t,e,i):o(t,e))||i);return s>3&&i&&Object.defineProperty(t,e,i),i},_u=$e&&$e.__importStar||function(n){if(n&&n.__esModule)return n;var t={};if(n!=null)for(var e in n)e!=="default"&&Object.hasOwnProperty.call(n,e)&&Bu(t,n,e);return Eu(t,n),t},lo=$e&&$e.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(ge,"__esModule",{value:!0});var ho=ge.deserializeUnchecked=bo=ge.deserialize=wo=ge.serialize=ge.BinaryReader=ge.BinaryWriter=ge.BorshError=ge.baseDecode=ge.baseEncode=void 0;const lr=lo(Hs),po=lo(mu),ku=_u(Su),Au=typeof TextDecoder!="function"?ku.TextDecoder:TextDecoder,Iu=new Au("utf-8",{fatal:!0});function Mu(n){return typeof n=="string"&&(n=Buffer.from(n,"utf8")),po.default.encode(Buffer.from(n))}ge.baseEncode=Mu;function Ru(n){return Buffer.from(po.default.decode(n))}ge.baseDecode=Ru;const ui=1024;class Se extends Error{constructor(t){super(t),this.fieldPath=[],this.originalMessage=t}addToFieldPath(t){this.fieldPath.splice(0,0,t),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}ge.BorshError=Se;class go{constructor(){this.buf=Buffer.alloc(ui),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(ui)]))}writeU8(t){this.maybeResize(),this.buf.writeUInt8(t,this.length),this.length+=1}writeU16(t){this.maybeResize(),this.buf.writeUInt16LE(t,this.length),this.length+=2}writeU32(t){this.maybeResize(),this.buf.writeUInt32LE(t,this.length),this.length+=4}writeU64(t){this.maybeResize(),this.writeBuffer(Buffer.from(new lr.default(t).toArray("le",8)))}writeU128(t){this.maybeResize(),this.writeBuffer(Buffer.from(new lr.default(t).toArray("le",16)))}writeU256(t){this.maybeResize(),this.writeBuffer(Buffer.from(new lr.default(t).toArray("le",32)))}writeU512(t){this.maybeResize(),this.writeBuffer(Buffer.from(new lr.default(t).toArray("le",64)))}writeBuffer(t){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),t,Buffer.alloc(ui)]),this.length+=t.length}writeString(t){this.maybeResize();const e=Buffer.from(t,"utf8");this.writeU32(e.length),this.writeBuffer(e)}writeFixedArray(t){this.writeBuffer(Buffer.from(t))}writeArray(t,e){this.maybeResize(),this.writeU32(t.length);for(const r of t)this.maybeResize(),e(r)}toArray(){return this.buf.subarray(0,this.length)}}ge.BinaryWriter=go;function Xe(n,t,e){const r=e.value;e.value=function(...s){try{return r.apply(this,s)}catch(i){if(i instanceof RangeError){const o=i.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(o)>=0)throw new Se("Reached the end of buffer when deserializing")}throw i}}}class Me{constructor(t){this.buf=t,this.offset=0}readU8(){const t=this.buf.readUInt8(this.offset);return this.offset+=1,t}readU16(){const t=this.buf.readUInt16LE(this.offset);return this.offset+=2,t}readU32(){const t=this.buf.readUInt32LE(this.offset);return this.offset+=4,t}readU64(){const t=this.readBuffer(8);return new lr.default(t,"le")}readU128(){const t=this.readBuffer(16);return new lr.default(t,"le")}readU256(){const t=this.readBuffer(32);return new lr.default(t,"le")}readU512(){const t=this.readBuffer(64);return new lr.default(t,"le")}readBuffer(t){if(this.offset+t>this.buf.length)throw new Se(`Expected buffer length ${t} isn't within bounds`);const e=this.buf.slice(this.offset,this.offset+t);return this.offset+=t,e}readString(){const t=this.readU32(),e=this.readBuffer(t);try{return Iu.decode(e)}catch(r){throw new Se(`Error decoding UTF-8 string: ${r}`)}}readFixedArray(t){return new Uint8Array(this.readBuffer(t))}readArray(t){const e=this.readU32(),r=Array();for(let s=0;s<e;++s)r.push(t());return r}}Ye([Xe],Me.prototype,"readU8",null);Ye([Xe],Me.prototype,"readU16",null);Ye([Xe],Me.prototype,"readU32",null);Ye([Xe],Me.prototype,"readU64",null);Ye([Xe],Me.prototype,"readU128",null);Ye([Xe],Me.prototype,"readU256",null);Ye([Xe],Me.prototype,"readU512",null);Ye([Xe],Me.prototype,"readString",null);Ye([Xe],Me.prototype,"readFixedArray",null);Ye([Xe],Me.prototype,"readArray",null);ge.BinaryReader=Me;function mo(n){return n.charAt(0).toUpperCase()+n.slice(1)}function wr(n,t,e,r,s){try{if(typeof r=="string")s[`write${mo(r)}`](e);else if(r instanceof Array)if(typeof r[0]=="number"){if(e.length!==r[0])throw new Se(`Expecting byte array of length ${r[0]}, but got ${e.length} bytes`);s.writeFixedArray(e)}else if(r.length===2&&typeof r[1]=="number"){if(e.length!==r[1])throw new Se(`Expecting byte array of length ${r[1]}, but got ${e.length} bytes`);for(let i=0;i<r[1];i++)wr(n,null,e[i],r[0],s)}else s.writeArray(e,i=>{wr(n,t,i,r[0],s)});else if(r.kind!==void 0)switch(r.kind){case"option":{e==null?s.writeU8(0):(s.writeU8(1),wr(n,t,e,r.type,s));break}case"map":{s.writeU32(e.size),e.forEach((i,o)=>{wr(n,t,o,r.key,s),wr(n,t,i,r.value,s)});break}default:throw new Se(`FieldType ${r} unrecognized`)}else yo(n,e,s)}catch(i){throw i instanceof Se&&i.addToFieldPath(t),i}}function yo(n,t,e){if(typeof t.borshSerialize=="function"){t.borshSerialize(e);return}const r=n.get(t.constructor);if(!r)throw new Se(`Class ${t.constructor.name} is missing in schema`);if(r.kind==="struct")r.fields.map(([s,i])=>{wr(n,s,t[s],i,e)});else if(r.kind==="enum"){const s=t[r.field];for(let i=0;i<r.values.length;++i){const[o,c]=r.values[i];if(o===s){e.writeU8(i),wr(n,o,t[o],c,e);break}}}else throw new Se(`Unexpected schema kind: ${r.kind} for ${t.constructor.name}`)}function Tu(n,t,e=go){const r=new e;return yo(n,t,r),r.toArray()}var wo=ge.serialize=Tu;function br(n,t,e,r){try{if(typeof e=="string")return r[`read${mo(e)}`]();if(e instanceof Array){if(typeof e[0]=="number")return r.readFixedArray(e[0]);if(typeof e[1]=="number"){const s=[];for(let i=0;i<e[1];i++)s.push(br(n,null,e[0],r));return s}else return r.readArray(()=>br(n,t,e[0],r))}if(e.kind==="option")return r.readU8()?br(n,t,e.type,r):void 0;if(e.kind==="map"){let s=new Map;const i=r.readU32();for(let o=0;o<i;o++){const c=br(n,t,e.key,r),d=br(n,t,e.value,r);s.set(c,d)}return s}return Vi(n,e,r)}catch(s){throw s instanceof Se&&s.addToFieldPath(t),s}}function Vi(n,t,e){if(typeof t.borshDeserialize=="function")return t.borshDeserialize(e);const r=n.get(t);if(!r)throw new Se(`Class ${t.name} is missing in schema`);if(r.kind==="struct"){const s={};for(const[i,o]of n.get(t).fields)s[i]=br(n,i,o,e);return new t(s)}if(r.kind==="enum"){const s=e.readU8();if(s>=r.values.length)throw new Se(`Enum index: ${s} is out of range`);const[i,o]=r.values[s],c=br(n,i,o,e);return new t({[i]:c})}throw new Se(`Unexpected schema kind: ${r.kind} for ${t.constructor.name}`)}function Lu(n,t,e,r=Me){const s=new r(e),i=Vi(n,t,s);if(s.offset<e.length)throw new Se(`Unexpected ${e.length-s.offset} bytes after deserialized data`);return i}var bo=ge.deserialize=Lu;function Cu(n,t,e,r=Me){const s=new r(e);return Vi(n,t,s)}ho=ge.deserializeUnchecked=Cu;var U={};Object.defineProperty(U,"__esModule",{value:!0});U.s16=U.s8=U.nu64be=U.u48be=U.u40be=U.u32be=U.u24be=U.u16be=de=U.nu64=U.u48=U.u40=nt=U.u32=U.u24=Ue=U.u16=Et=U.u8=Sr=U.offset=U.greedy=U.Constant=U.UTF8=U.CString=U.Blob=U.Boolean=U.BitField=U.BitStructure=U.VariantLayout=U.Union=U.UnionLayoutDiscriminator=U.UnionDiscriminator=U.Structure=U.Sequence=U.DoubleBE=U.Double=U.FloatBE=U.Float=U.NearInt64BE=U.NearInt64=U.NearUInt64BE=U.NearUInt64=U.IntBE=U.Int=U.UIntBE=U.UInt=U.OffsetLayout=U.GreedyCount=U.ExternalLayout=U.bindConstructorLayout=U.nameWithProperty=U.Layout=U.uint8ArrayToBuffer=U.checkUint8Array=void 0;U.constant=U.utf8=U.cstr=$t=U.blob=U.unionLayoutDiscriminator=U.union=Be=U.seq=U.bits=tt=U.struct=U.f64be=U.f64=U.f32be=U.f32=U.ns64be=U.s48be=U.s40be=U.s32be=U.s24be=U.s16be=Ie=U.ns64=U.s48=U.s40=U.s32=U.s24=void 0;const Gi=ft;function $r(n){if(!(n instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}U.checkUint8Array=$r;function St(n){return $r(n),Gi.Buffer.from(n.buffer,n.byteOffset,n.length)}U.uint8ArrayToBuffer=St;class kt{constructor(t,e){if(!Number.isInteger(t))throw new TypeError("span must be an integer");this.span=t,this.property=e}makeDestinationObject(){return{}}getSpan(t,e){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(t){const e=Object.create(this.constructor.prototype);return Object.assign(e,this),e.property=t,e}fromArray(t){}}U.Layout=kt;function ji(n,t){return t.property?n+"["+t.property+"]":n}U.nameWithProperty=ji;function Uu(n,t){if(typeof n!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(n,"layout_"))throw new Error("Class is already bound to a layout");if(!(t&&t instanceof kt))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(t,"boundConstructor_"))throw new Error("layout is already bound to a constructor");n.layout_=t,t.boundConstructor_=n,t.makeDestinationObject=()=>new n,Object.defineProperty(n.prototype,"encode",{value(e,r){return t.encode(this,e,r)},writable:!0}),Object.defineProperty(n,"decode",{value(e,r){return t.decode(e,r)},writable:!0})}U.bindConstructorLayout=Uu;class _e extends kt{isCount(){throw new Error("ExternalLayout is abstract")}}U.ExternalLayout=_e;class vo extends _e{constructor(t=1,e){if(!Number.isInteger(t)||0>=t)throw new TypeError("elementSpan must be a (positive) integer");super(-1,e),this.elementSpan=t}isCount(){return!0}decode(t,e=0){$r(t);const r=t.length-e;return Math.floor(r/this.elementSpan)}encode(t,e,r){return 0}}U.GreedyCount=vo;class Zi extends _e{constructor(t,e=0,r){if(!(t instanceof kt))throw new TypeError("layout must be a Layout");if(!Number.isInteger(e))throw new TypeError("offset must be integer or undefined");super(t.span,r||t.property),this.layout=t,this.offset=e}isCount(){return this.layout instanceof Oe||this.layout instanceof ze}decode(t,e=0){return this.layout.decode(t,e+this.offset)}encode(t,e,r=0){return this.layout.encode(t,e,r+this.offset)}}U.OffsetLayout=Zi;class Oe extends kt{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return St(t).readUIntLE(e,this.span)}encode(t,e,r=0){return St(e).writeUIntLE(t,r,this.span),this.span}}U.UInt=Oe;class ze extends kt{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return St(t).readUIntBE(e,this.span)}encode(t,e,r=0){return St(e).writeUIntBE(t,r,this.span),this.span}}U.UIntBE=ze;class Ar extends kt{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return St(t).readIntLE(e,this.span)}encode(t,e,r=0){return St(e).writeIntLE(t,r,this.span),this.span}}U.Int=Ar;class Hr extends kt{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return St(t).readIntBE(e,this.span)}encode(t,e,r=0){return St(e).writeIntBE(t,r,this.span),this.span}}U.IntBE=Hr;const _i=Math.pow(2,32);function Mn(n){const t=Math.floor(n/_i),e=n-t*_i;return{hi32:t,lo32:e}}function Rn(n,t){return n*_i+t}class xo extends kt{constructor(t){super(8,t)}decode(t,e=0){const r=St(t),s=r.readUInt32LE(e),i=r.readUInt32LE(e+4);return Rn(i,s)}encode(t,e,r=0){const s=Mn(t),i=St(e);return i.writeUInt32LE(s.lo32,r),i.writeUInt32LE(s.hi32,r+4),8}}U.NearUInt64=xo;class So extends kt{constructor(t){super(8,t)}decode(t,e=0){const r=St(t),s=r.readUInt32BE(e),i=r.readUInt32BE(e+4);return Rn(s,i)}encode(t,e,r=0){const s=Mn(t),i=St(e);return i.writeUInt32BE(s.hi32,r),i.writeUInt32BE(s.lo32,r+4),8}}U.NearUInt64BE=So;class Bo extends kt{constructor(t){super(8,t)}decode(t,e=0){const r=St(t),s=r.readUInt32LE(e),i=r.readInt32LE(e+4);return Rn(i,s)}encode(t,e,r=0){const s=Mn(t),i=St(e);return i.writeUInt32LE(s.lo32,r),i.writeInt32LE(s.hi32,r+4),8}}U.NearInt64=Bo;class Eo extends kt{constructor(t){super(8,t)}decode(t,e=0){const r=St(t),s=r.readInt32BE(e),i=r.readUInt32BE(e+4);return Rn(s,i)}encode(t,e,r=0){const s=Mn(t),i=St(e);return i.writeInt32BE(s.hi32,r),i.writeUInt32BE(s.lo32,r+4),8}}U.NearInt64BE=Eo;class _o extends kt{constructor(t){super(4,t)}decode(t,e=0){return St(t).readFloatLE(e)}encode(t,e,r=0){return St(e).writeFloatLE(t,r),4}}U.Float=_o;class ko extends kt{constructor(t){super(4,t)}decode(t,e=0){return St(t).readFloatBE(e)}encode(t,e,r=0){return St(e).writeFloatBE(t,r),4}}U.FloatBE=ko;class Ao extends kt{constructor(t){super(8,t)}decode(t,e=0){return St(t).readDoubleLE(e)}encode(t,e,r=0){return St(e).writeDoubleLE(t,r),8}}U.Double=Ao;class Io extends kt{constructor(t){super(8,t)}decode(t,e=0){return St(t).readDoubleBE(e)}encode(t,e,r=0){return St(e).writeDoubleBE(t,r),8}}U.DoubleBE=Io;class Mo extends kt{constructor(t,e,r){if(!(t instanceof kt))throw new TypeError("elementLayout must be a Layout");if(!(e instanceof _e&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let s=-1;!(e instanceof _e)&&0<t.span&&(s=e*t.span),super(s,r),this.elementLayout=t,this.count=e}getSpan(t,e=0){if(0<=this.span)return this.span;let r=0,s=this.count;if(s instanceof _e&&(s=s.decode(t,e)),0<this.elementLayout.span)r=s*this.elementLayout.span;else{let i=0;for(;i<s;)r+=this.elementLayout.getSpan(t,e+r),++i}return r}decode(t,e=0){const r=[];let s=0,i=this.count;for(i instanceof _e&&(i=i.decode(t,e));s<i;)r.push(this.elementLayout.decode(t,e)),e+=this.elementLayout.getSpan(t,e),s+=1;return r}encode(t,e,r=0){const s=this.elementLayout,i=t.reduce((o,c)=>o+s.encode(c,e,r+o),0);return this.count instanceof _e&&this.count.encode(t.length,e,r),i}}U.Sequence=Mo;class Ro extends kt{constructor(t,e,r){if(!(Array.isArray(t)&&t.reduce((i,o)=>i&&o instanceof kt,!0)))throw new TypeError("fields must be array of Layout instances");typeof e=="boolean"&&r===void 0&&(r=e,e=void 0);for(const i of t)if(0>i.span&&i.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let s=-1;try{s=t.reduce((i,o)=>i+o.getSpan(),0)}catch{}super(s,e),this.fields=t,this.decodePrefixes=!!r}getSpan(t,e=0){if(0<=this.span)return this.span;let r=0;try{r=this.fields.reduce((s,i)=>{const o=i.getSpan(t,e);return e+=o,s+o},0)}catch{throw new RangeError("indeterminate span")}return r}decode(t,e=0){$r(t);const r=this.makeDestinationObject();for(const s of this.fields)if(s.property!==void 0&&(r[s.property]=s.decode(t,e)),e+=s.getSpan(t,e),this.decodePrefixes&&t.length===e)break;return r}encode(t,e,r=0){const s=r;let i=0,o=0;for(const c of this.fields){let d=c.span;if(o=0<d?d:0,c.property!==void 0){const S=t[c.property];S!==void 0&&(o=c.encode(S,e,r),0>d&&(d=c.getSpan(e,r)))}i=r,r+=d}return i+o-s}fromArray(t){const e=this.makeDestinationObject();for(const r of this.fields)r.property!==void 0&&0<t.length&&(e[r.property]=t.shift());return e}layoutFor(t){if(typeof t!="string")throw new TypeError("property must be string");for(const e of this.fields)if(e.property===t)return e}offsetOf(t){if(typeof t!="string")throw new TypeError("property must be string");let e=0;for(const r of this.fields){if(r.property===t)return e;0>r.span?e=-1:0<=e&&(e+=r.span)}}}U.Structure=Ro;class Yi{constructor(t){this.property=t}decode(t,e){throw new Error("UnionDiscriminator is abstract")}encode(t,e,r){throw new Error("UnionDiscriminator is abstract")}}U.UnionDiscriminator=Yi;class xn extends Yi{constructor(t,e){if(!(t instanceof _e&&t.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(e||t.property||"variant"),this.layout=t}decode(t,e){return this.layout.decode(t,e)}encode(t,e,r){return this.layout.encode(t,e,r)}}U.UnionLayoutDiscriminator=xn;class Xi extends kt{constructor(t,e,r){let s;if(t instanceof Oe||t instanceof ze)s=new xn(new Zi(t));else if(t instanceof _e&&t.isCount())s=new xn(t);else if(t instanceof Yi)s=t;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(e===void 0&&(e=null),!(e===null||e instanceof kt))throw new TypeError("defaultLayout must be null or a Layout");if(e!==null){if(0>e.span)throw new Error("defaultLayout must have constant span");e.property===void 0&&(e=e.replicate("content"))}let i=-1;e&&(i=e.span,0<=i&&(t instanceof Oe||t instanceof ze)&&(i+=s.layout.span)),super(i,r),this.discriminator=s,this.usesPrefixDiscriminator=t instanceof Oe||t instanceof ze,this.defaultLayout=e,this.registry={};let o=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(c){return o(c)},this.configGetSourceVariant=function(c){o=c.bind(this)}}getSpan(t,e=0){if(0<=this.span)return this.span;const r=this.getVariant(t,e);if(!r)throw new Error("unable to determine span for unrecognized variant");return r.getSpan(t,e)}defaultGetSourceVariant(t){if(Object.prototype.hasOwnProperty.call(t,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(t,this.defaultLayout.property))return;const e=this.registry[t[this.discriminator.property]];if(e&&(!e.layout||e.property&&Object.prototype.hasOwnProperty.call(t,e.property)))return e}else for(const e in this.registry){const r=this.registry[e];if(r.property&&Object.prototype.hasOwnProperty.call(t,r.property))return r}throw new Error("unable to infer src variant")}decode(t,e=0){let r;const s=this.discriminator,i=s.decode(t,e),o=this.registry[i];if(o===void 0){const c=this.defaultLayout;let d=0;this.usesPrefixDiscriminator&&(d=s.layout.span),r=this.makeDestinationObject(),r[s.property]=i,r[c.property]=c.decode(t,e+d)}else r=o.decode(t,e);return r}encode(t,e,r=0){const s=this.getSourceVariant(t);if(s===void 0){const i=this.discriminator,o=this.defaultLayout;let c=0;return this.usesPrefixDiscriminator&&(c=i.layout.span),i.encode(t[i.property],e,r),c+o.encode(t[o.property],e,r+c)}return s.encode(t,e,r)}addVariant(t,e,r){const s=new To(this,t,e,r);return this.registry[t]=s,s}getVariant(t,e=0){let r;return t instanceof Uint8Array?r=this.discriminator.decode(t,e):r=t,this.registry[r]}}U.Union=Xi;class To extends kt{constructor(t,e,r,s){if(!(t instanceof Xi))throw new TypeError("union must be a Union");if(!Number.isInteger(e)||0>e)throw new TypeError("variant must be a (non-negative) integer");if(typeof r=="string"&&s===void 0&&(s=r,r=null),r){if(!(r instanceof kt))throw new TypeError("layout must be a Layout");if(t.defaultLayout!==null&&0<=r.span&&r.span>t.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof s!="string")throw new TypeError("variant must have a String property")}let i=t.span;0>t.span&&(i=r?r.span:0,0<=i&&t.usesPrefixDiscriminator&&(i+=t.discriminator.layout.span)),super(i,s),this.union=t,this.variant=e,this.layout=r||null}getSpan(t,e=0){if(0<=this.span)return this.span;let r=0;this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span);let s=0;return this.layout&&(s=this.layout.getSpan(t,e+r)),r+s}decode(t,e=0){const r=this.makeDestinationObject();if(this!==this.union.getVariant(t,e))throw new Error("variant mismatch");let s=0;return this.union.usesPrefixDiscriminator&&(s=this.union.discriminator.layout.span),this.layout?r[this.property]=this.layout.decode(t,e+s):this.property?r[this.property]=!0:this.union.usesPrefixDiscriminator&&(r[this.union.discriminator.property]=this.variant),r}encode(t,e,r=0){let s=0;if(this.union.usesPrefixDiscriminator&&(s=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(t,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,e,r);let i=s;if(this.layout&&(this.layout.encode(t[this.property],e,r+s),i+=this.layout.getSpan(e,r+s),0<=this.union.span&&i>this.union.span))throw new Error("encoded variant overruns containing union");return i}fromArray(t){if(this.layout)return this.layout.fromArray(t)}}U.VariantLayout=To;function Lr(n){return 0>n&&(n+=4294967296),n}class Ji extends kt{constructor(t,e,r){if(!(t instanceof Oe||t instanceof ze))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof e=="string"&&r===void 0&&(r=e,e=!1),4<t.span)throw new RangeError("word cannot exceed 32 bits");super(t.span,r),this.word=t,this.msb=!!e,this.fields=[];let s=0;this._packedSetValue=function(i){return s=Lr(i),this},this._packedGetValue=function(){return s}}decode(t,e=0){const r=this.makeDestinationObject(),s=this.word.decode(t,e);this._packedSetValue(s);for(const i of this.fields)i.property!==void 0&&(r[i.property]=i.decode(t));return r}encode(t,e,r=0){const s=this.word.decode(e,r);this._packedSetValue(s);for(const i of this.fields)if(i.property!==void 0){const o=t[i.property];o!==void 0&&i.encode(o)}return this.word.encode(this._packedGetValue(),e,r)}addField(t,e){const r=new Qi(this,t,e);return this.fields.push(r),r}addBoolean(t){const e=new Lo(this,t);return this.fields.push(e),e}fieldFor(t){if(typeof t!="string")throw new TypeError("property must be string");for(const e of this.fields)if(e.property===t)return e}}U.BitStructure=Ji;class Qi{constructor(t,e,r){if(!(t instanceof Ji))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(e)||0>=e)throw new TypeError("bits must be positive integer");const s=8*t.span,i=t.fields.reduce((o,c)=>o+c.bits,0);if(e+i>s)throw new Error("bits too long for span remainder ("+(s-i)+" of "+s+" remain)");this.container=t,this.bits=e,this.valueMask=(1<<e)-1,e===32&&(this.valueMask=4294967295),this.start=i,this.container.msb&&(this.start=s-i-e),this.wordMask=Lr(this.valueMask<<this.start),this.property=r}decode(t,e){const r=this.container._packedGetValue();return Lr(r&this.wordMask)>>>this.start}encode(t){if(typeof t!="number"||!Number.isInteger(t)||t!==Lr(t&this.valueMask))throw new TypeError(ji("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const e=this.container._packedGetValue(),r=Lr(t<<this.start);this.container._packedSetValue(Lr(e&~this.wordMask)|r)}}U.BitField=Qi;let Lo=class extends Qi{constructor(t,e){super(t,1,e)}decode(t,e){return!!super.decode(t,e)}encode(t){typeof t=="boolean"&&(t=+t),super.encode(t)}};U.Boolean=Lo;class Co extends kt{constructor(t,e){if(!(t instanceof _e&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let r=-1;t instanceof _e||(r=t),super(r,e),this.length=t}getSpan(t,e){let r=this.span;return 0>r&&(r=this.length.decode(t,e)),r}decode(t,e=0){let r=this.span;return 0>r&&(r=this.length.decode(t,e)),St(t).slice(e,e+r)}encode(t,e,r){let s=this.length;if(this.length instanceof _e&&(s=t.length),!(t instanceof Uint8Array&&s===t.length))throw new TypeError(ji("Blob.encode",this)+" requires (length "+s+") Uint8Array as src");if(r+s>e.length)throw new RangeError("encoding overruns Uint8Array");const i=St(t);return St(e).write(i.toString("hex"),r,s,"hex"),this.length instanceof _e&&this.length.encode(s,e,r),s}}U.Blob=Co;class Uo extends kt{constructor(t){super(-1,t)}getSpan(t,e=0){$r(t);let r=e;for(;r<t.length&&t[r]!==0;)r+=1;return 1+r-e}decode(t,e=0){const r=this.getSpan(t,e);return St(t).slice(e,e+r-1).toString("utf-8")}encode(t,e,r=0){typeof t!="string"&&(t=String(t));const s=Gi.Buffer.from(t,"utf8"),i=s.length;if(r+i>e.length)throw new RangeError("encoding overruns Buffer");const o=St(e);return s.copy(o,r),o[r+i]=0,i+1}}U.CString=Uo;class Fo extends kt{constructor(t,e){if(typeof t=="string"&&e===void 0&&(e=t,t=void 0),t===void 0)t=-1;else if(!Number.isInteger(t))throw new TypeError("maxSpan must be an integer");super(-1,e),this.maxSpan=t}getSpan(t,e=0){return $r(t),t.length-e}decode(t,e=0){const r=this.getSpan(t,e);if(0<=this.maxSpan&&this.maxSpan<r)throw new RangeError("text length exceeds maxSpan");return St(t).slice(e,e+r).toString("utf-8")}encode(t,e,r=0){typeof t!="string"&&(t=String(t));const s=Gi.Buffer.from(t,"utf8"),i=s.length;if(0<=this.maxSpan&&this.maxSpan<i)throw new RangeError("text length exceeds maxSpan");if(r+i>e.length)throw new RangeError("encoding overruns Buffer");return s.copy(St(e),r),i}}U.UTF8=Fo;class No extends kt{constructor(t,e){super(0,e),this.value=t}decode(t,e){return this.value}encode(t,e,r){return 0}}U.Constant=No;U.greedy=(n,t)=>new vo(n,t);var Sr=U.offset=(n,t,e)=>new Zi(n,t,e),Et=U.u8=n=>new Oe(1,n),Ue=U.u16=n=>new Oe(2,n);U.u24=n=>new Oe(3,n);var nt=U.u32=n=>new Oe(4,n);U.u40=n=>new Oe(5,n);U.u48=n=>new Oe(6,n);var de=U.nu64=n=>new xo(n);U.u16be=n=>new ze(2,n);U.u24be=n=>new ze(3,n);U.u32be=n=>new ze(4,n);U.u40be=n=>new ze(5,n);U.u48be=n=>new ze(6,n);U.nu64be=n=>new So(n);U.s8=n=>new Ar(1,n);U.s16=n=>new Ar(2,n);U.s24=n=>new Ar(3,n);U.s32=n=>new Ar(4,n);U.s40=n=>new Ar(5,n);U.s48=n=>new Ar(6,n);var Ie=U.ns64=n=>new Bo(n);U.s16be=n=>new Hr(2,n);U.s24be=n=>new Hr(3,n);U.s32be=n=>new Hr(4,n);U.s40be=n=>new Hr(5,n);U.s48be=n=>new Hr(6,n);U.ns64be=n=>new Eo(n);U.f32=n=>new _o(n);U.f32be=n=>new ko(n);U.f64=n=>new Ao(n);U.f64be=n=>new Io(n);var tt=U.struct=(n,t,e)=>new Ro(n,t,e);U.bits=(n,t,e)=>new Ji(n,t,e);var Be=U.seq=(n,t,e)=>new Mo(n,t,e);U.union=(n,t,e)=>new Xi(n,t,e);U.unionLayoutDiscriminator=(n,t)=>new xn(n,t);var $t=U.blob=(n,t)=>new Co(n,t);U.cstr=n=>new Uo(n);U.utf8=(n,t)=>new Fo(n,t);U.constant=(n,t)=>new No(n,t);var sn={};Object.defineProperty(sn,"__esModule",{value:!0});function Fu(n){{const t=Buffer.from(n);t.reverse();const e=t.toString("hex");return e.length===0?BigInt(0):BigInt(`0x${e}`)}}var Nu=sn.toBigIntLE=Fu;function Pu(n){{const t=n.toString("hex");return t.length===0?BigInt(0):BigInt(`0x${t}`)}}sn.toBigIntBE=Pu;function Ou(n,t){{const e=n.toString(16),r=Buffer.from(e.padStart(t*2,"0").slice(0,t*2),"hex");return r.reverse(),r}}var qu=sn.toBufferLE=Ou;function Du(n,t){{const e=n.toString(16);return Buffer.from(e.padStart(t*2,"0").slice(0,t*2),"hex")}}sn.toBufferBE=Du;var hn,zu=new Uint8Array(16);function Po(){if(!hn&&(hn=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!hn))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return hn(zu)}const $u=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Tn(n){return typeof n=="string"&&$u.test(n)}var he=[];for(var fi=0;fi<256;++fi)he.push((fi+256).toString(16).substr(1));function Ln(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=(he[n[t+0]]+he[n[t+1]]+he[n[t+2]]+he[n[t+3]]+"-"+he[n[t+4]]+he[n[t+5]]+"-"+he[n[t+6]]+he[n[t+7]]+"-"+he[n[t+8]]+he[n[t+9]]+"-"+he[n[t+10]]+he[n[t+11]]+he[n[t+12]]+he[n[t+13]]+he[n[t+14]]+he[n[t+15]]).toLowerCase();if(!Tn(e))throw TypeError("Stringified UUID is invalid");return e}var _s,li,hi=0,di=0;function Hu(n,t,e){var r=t&&e||0,s=t||new Array(16);n=n||{};var i=n.node||_s,o=n.clockseq!==void 0?n.clockseq:li;if(i==null||o==null){var c=n.random||(n.rng||Po)();i==null&&(i=_s=[c[0]|1,c[1],c[2],c[3],c[4],c[5]]),o==null&&(o=li=(c[6]<<8|c[7])&16383)}var d=n.msecs!==void 0?n.msecs:Date.now(),S=n.nsecs!==void 0?n.nsecs:di+1,E=d-hi+(S-di)/1e4;if(E<0&&n.clockseq===void 0&&(o=o+1&16383),(E<0||d>hi)&&n.nsecs===void 0&&(S=0),S>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");hi=d,di=S,li=o,d+=122192928e5;var A=((d&268435455)*1e4+S)%4294967296;s[r++]=A>>>24&255,s[r++]=A>>>16&255,s[r++]=A>>>8&255,s[r++]=A&255;var P=d/4294967296*1e4&268435455;s[r++]=P>>>8&255,s[r++]=P&255,s[r++]=P>>>24&15|16,s[r++]=P>>>16&255,s[r++]=o>>>8|128,s[r++]=o&255;for(var M=0;M<6;++M)s[r+M]=i[M];return t||Ln(s)}function Oo(n){if(!Tn(n))throw TypeError("Invalid UUID");var t,e=new Uint8Array(16);return e[0]=(t=parseInt(n.slice(0,8),16))>>>24,e[1]=t>>>16&255,e[2]=t>>>8&255,e[3]=t&255,e[4]=(t=parseInt(n.slice(9,13),16))>>>8,e[5]=t&255,e[6]=(t=parseInt(n.slice(14,18),16))>>>8,e[7]=t&255,e[8]=(t=parseInt(n.slice(19,23),16))>>>8,e[9]=t&255,e[10]=(t=parseInt(n.slice(24,36),16))/1099511627776&255,e[11]=t/4294967296&255,e[12]=t>>>24&255,e[13]=t>>>16&255,e[14]=t>>>8&255,e[15]=t&255,e}function Ku(n){n=unescape(encodeURIComponent(n));for(var t=[],e=0;e<n.length;++e)t.push(n.charCodeAt(e));return t}var Wu="6ba7b810-9dad-11d1-80b4-00c04fd430c8",Vu="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function qo(n,t,e){function r(s,i,o,c){if(typeof s=="string"&&(s=Ku(s)),typeof i=="string"&&(i=Oo(i)),i.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var d=new Uint8Array(16+s.length);if(d.set(i),d.set(s,i.length),d=e(d),d[6]=d[6]&15|t,d[8]=d[8]&63|128,o){c=c||0;for(var S=0;S<16;++S)o[c+S]=d[S];return o}return Ln(d)}try{r.name=n}catch{}return r.DNS=Wu,r.URL=Vu,r}function Gu(n){if(typeof n=="string"){var t=unescape(encodeURIComponent(n));n=new Uint8Array(t.length);for(var e=0;e<t.length;++e)n[e]=t.charCodeAt(e)}return ju(Zu(Yu(n),n.length*8))}function ju(n){for(var t=[],e=n.length*32,r="0123456789abcdef",s=0;s<e;s+=8){var i=n[s>>5]>>>s%32&255,o=parseInt(r.charAt(i>>>4&15)+r.charAt(i&15),16);t.push(o)}return t}function Do(n){return(n+64>>>9<<4)+14+1}function Zu(n,t){n[t>>5]|=128<<t%32,n[Do(t)-1]=t;for(var e=1732584193,r=-271733879,s=-1732584194,i=271733878,o=0;o<n.length;o+=16){var c=e,d=r,S=s,E=i;e=we(e,r,s,i,n[o],7,-680876936),i=we(i,e,r,s,n[o+1],12,-389564586),s=we(s,i,e,r,n[o+2],17,606105819),r=we(r,s,i,e,n[o+3],22,-1044525330),e=we(e,r,s,i,n[o+4],7,-176418897),i=we(i,e,r,s,n[o+5],12,1200080426),s=we(s,i,e,r,n[o+6],17,-1473231341),r=we(r,s,i,e,n[o+7],22,-45705983),e=we(e,r,s,i,n[o+8],7,1770035416),i=we(i,e,r,s,n[o+9],12,-1958414417),s=we(s,i,e,r,n[o+10],17,-42063),r=we(r,s,i,e,n[o+11],22,-1990404162),e=we(e,r,s,i,n[o+12],7,1804603682),i=we(i,e,r,s,n[o+13],12,-40341101),s=we(s,i,e,r,n[o+14],17,-1502002290),r=we(r,s,i,e,n[o+15],22,1236535329),e=be(e,r,s,i,n[o+1],5,-165796510),i=be(i,e,r,s,n[o+6],9,-1069501632),s=be(s,i,e,r,n[o+11],14,643717713),r=be(r,s,i,e,n[o],20,-373897302),e=be(e,r,s,i,n[o+5],5,-701558691),i=be(i,e,r,s,n[o+10],9,38016083),s=be(s,i,e,r,n[o+15],14,-660478335),r=be(r,s,i,e,n[o+4],20,-405537848),e=be(e,r,s,i,n[o+9],5,568446438),i=be(i,e,r,s,n[o+14],9,-1019803690),s=be(s,i,e,r,n[o+3],14,-187363961),r=be(r,s,i,e,n[o+8],20,1163531501),e=be(e,r,s,i,n[o+13],5,-1444681467),i=be(i,e,r,s,n[o+2],9,-51403784),s=be(s,i,e,r,n[o+7],14,1735328473),r=be(r,s,i,e,n[o+12],20,-1926607734),e=ve(e,r,s,i,n[o+5],4,-378558),i=ve(i,e,r,s,n[o+8],11,-2022574463),s=ve(s,i,e,r,n[o+11],16,1839030562),r=ve(r,s,i,e,n[o+14],23,-35309556),e=ve(e,r,s,i,n[o+1],4,-1530992060),i=ve(i,e,r,s,n[o+4],11,1272893353),s=ve(s,i,e,r,n[o+7],16,-155497632),r=ve(r,s,i,e,n[o+10],23,-1094730640),e=ve(e,r,s,i,n[o+13],4,681279174),i=ve(i,e,r,s,n[o],11,-358537222),s=ve(s,i,e,r,n[o+3],16,-722521979),r=ve(r,s,i,e,n[o+6],23,76029189),e=ve(e,r,s,i,n[o+9],4,-640364487),i=ve(i,e,r,s,n[o+12],11,-421815835),s=ve(s,i,e,r,n[o+15],16,530742520),r=ve(r,s,i,e,n[o+2],23,-995338651),e=xe(e,r,s,i,n[o],6,-198630844),i=xe(i,e,r,s,n[o+7],10,1126891415),s=xe(s,i,e,r,n[o+14],15,-1416354905),r=xe(r,s,i,e,n[o+5],21,-57434055),e=xe(e,r,s,i,n[o+12],6,1700485571),i=xe(i,e,r,s,n[o+3],10,-1894986606),s=xe(s,i,e,r,n[o+10],15,-1051523),r=xe(r,s,i,e,n[o+1],21,-2054922799),e=xe(e,r,s,i,n[o+8],6,1873313359),i=xe(i,e,r,s,n[o+15],10,-30611744),s=xe(s,i,e,r,n[o+6],15,-1560198380),r=xe(r,s,i,e,n[o+13],21,1309151649),e=xe(e,r,s,i,n[o+4],6,-145523070),i=xe(i,e,r,s,n[o+11],10,-1120210379),s=xe(s,i,e,r,n[o+2],15,718787259),r=xe(r,s,i,e,n[o+9],21,-343485551),e=hr(e,c),r=hr(r,d),s=hr(s,S),i=hr(i,E)}return[e,r,s,i]}function Yu(n){if(n.length===0)return[];for(var t=n.length*8,e=new Uint32Array(Do(t)),r=0;r<t;r+=8)e[r>>5]|=(n[r/8]&255)<<r%32;return e}function hr(n,t){var e=(n&65535)+(t&65535),r=(n>>16)+(t>>16)+(e>>16);return r<<16|e&65535}function Xu(n,t){return n<<t|n>>>32-t}function Cn(n,t,e,r,s,i){return hr(Xu(hr(hr(t,n),hr(r,i)),s),e)}function we(n,t,e,r,s,i,o){return Cn(t&e|~t&r,n,t,s,i,o)}function be(n,t,e,r,s,i,o){return Cn(t&r|e&~r,n,t,s,i,o)}function ve(n,t,e,r,s,i,o){return Cn(t^e^r,n,t,s,i,o)}function xe(n,t,e,r,s,i,o){return Cn(e^(t|~r),n,t,s,i,o)}var Ju=qo("v3",48,Gu);const Qu=Ju;function tf(n,t,e){n=n||{};var r=n.random||(n.rng||Po)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){e=e||0;for(var s=0;s<16;++s)t[e+s]=r[s];return t}return Ln(r)}function ef(n,t,e,r){switch(n){case 0:return t&e^~t&r;case 1:return t^e^r;case 2:return t&e^t&r^e&r;case 3:return t^e^r}}function pi(n,t){return n<<t|n>>>32-t}function rf(n){var t=[1518500249,1859775393,2400959708,3395469782],e=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof n=="string"){var r=unescape(encodeURIComponent(n));n=[];for(var s=0;s<r.length;++s)n.push(r.charCodeAt(s))}else Array.isArray(n)||(n=Array.prototype.slice.call(n));n.push(128);for(var i=n.length/4+2,o=Math.ceil(i/16),c=new Array(o),d=0;d<o;++d){for(var S=new Uint32Array(16),E=0;E<16;++E)S[E]=n[d*64+E*4]<<24|n[d*64+E*4+1]<<16|n[d*64+E*4+2]<<8|n[d*64+E*4+3];c[d]=S}c[o-1][14]=(n.length-1)*8/Math.pow(2,32),c[o-1][14]=Math.floor(c[o-1][14]),c[o-1][15]=(n.length-1)*8&4294967295;for(var A=0;A<o;++A){for(var P=new Uint32Array(80),M=0;M<16;++M)P[M]=c[A][M];for(var T=16;T<80;++T)P[T]=pi(P[T-3]^P[T-8]^P[T-14]^P[T-16],1);for(var k=e[0],R=e[1],F=e[2],D=e[3],O=e[4],W=0;W<80;++W){var q=Math.floor(W/20),z=pi(k,5)+ef(q,R,F,D)+O+t[q]+P[W]>>>0;O=D,D=F,F=pi(R,30)>>>0,R=k,k=z}e[0]=e[0]+k>>>0,e[1]=e[1]+R>>>0,e[2]=e[2]+F>>>0,e[3]=e[3]+D>>>0,e[4]=e[4]+O>>>0}return[e[0]>>24&255,e[0]>>16&255,e[0]>>8&255,e[0]&255,e[1]>>24&255,e[1]>>16&255,e[1]>>8&255,e[1]&255,e[2]>>24&255,e[2]>>16&255,e[2]>>8&255,e[2]&255,e[3]>>24&255,e[3]>>16&255,e[3]>>8&255,e[3]&255,e[4]>>24&255,e[4]>>16&255,e[4]>>8&255,e[4]&255]}var nf=qo("v5",80,rf);const sf=nf,of="00000000-0000-0000-0000-000000000000";function af(n){if(!Tn(n))throw TypeError("Invalid UUID");return parseInt(n.substr(14,1),16)}const cf=Object.freeze(Object.defineProperty({__proto__:null,NIL:of,parse:Oo,stringify:Ln,v1:Hu,v3:Qu,v4:tf,v5:sf,validate:Tn,version:af},Symbol.toStringTag,{value:"Module"})),zo=zs(cf),uf=zo.v4,ff=function(n,t,e,r){if(typeof n!="string")throw new TypeError(n+" must be a string");r=r||{};const s=typeof r.version=="number"?r.version:2;if(s!==1&&s!==2)throw new TypeError(s+" must be 1 or 2");const i={method:n};if(s===2&&(i.jsonrpc="2.0"),t){if(typeof t!="object"&&!Array.isArray(t))throw new TypeError(t+" must be an object, array or omitted");i.params=t}if(typeof e>"u"){const o=typeof r.generator=="function"?r.generator:function(){return uf()};i.id=o(i,r)}else s===2&&e===null?r.notificationIdNull&&(i.id=null):i.id=e;return i};var lf=ff;const hf=zo.v4,df=lf,Xr=function(n,t){if(!(this instanceof Xr))return new Xr(n,t);t||(t={}),this.options={reviver:typeof t.reviver<"u"?t.reviver:null,replacer:typeof t.replacer<"u"?t.replacer:null,generator:typeof t.generator<"u"?t.generator:function(){return hf()},version:typeof t.version<"u"?t.version:2,notificationIdNull:typeof t.notificationIdNull=="boolean"?t.notificationIdNull:!1},this.callServer=n};var pf=Xr;Xr.prototype.request=function(n,t,e,r){const s=this;let i=null;const o=Array.isArray(n)&&typeof t=="function";if(this.options.version===1&&o)throw new TypeError("JSON-RPC 1.0 does not support batching");if(o||!o&&n&&typeof n=="object"&&typeof t=="function")r=t,i=n;else{typeof e=="function"&&(r=e,e=void 0);const S=typeof r=="function";try{i=df(n,t,e,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(E){if(S)return r(E);throw E}if(!S)return i}let d;try{d=JSON.stringify(i,this.options.replacer)}catch(S){return r(S)}return this.callServer(d,function(S,E){s._parseResponse(S,E,r)}),i};Xr.prototype._parseResponse=function(n,t,e){if(n){e(n);return}if(!t)return e();let r;try{r=JSON.parse(t,this.options.reviver)}catch(s){return e(s)}if(e.length===3)if(Array.isArray(r)){const s=function(o){return typeof o.error<"u"},i=function(o){return!s(o)};return e(null,r.filter(s),r.filter(i))}else return e(null,r.error,r.result);e(null,r)};const gf=Ti(pf);var mf=class extends $s{constructor(t,e,r){super();fe(this,"socket");this.socket=new window.WebSocket(t,r),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=s=>this.emit("message",s.data),this.socket.onerror=s=>this.emit("error",s),this.socket.onclose=s=>{this.emit("close",s.code,s.reason)}}send(t,e,r){const s=r||e;try{this.socket.send(t),s()}catch(i){s(i)}}close(t,e){this.socket.close(t,e)}addEventListener(t,e,r){this.socket.addEventListener(t,e,r)}};function yf(n,t){return new mf(n,t)}var wf=class{encode(n){return JSON.stringify(n)}decode(n){return JSON.parse(n)}},bf=class extends $s{constructor(t,e="ws://localhost:8080",{autoconnect:r=!0,reconnect:s=!0,reconnect_interval:i=1e3,max_reconnects:o=5,...c}={},d,S){super();fe(this,"address");fe(this,"rpc_id");fe(this,"queue");fe(this,"options");fe(this,"autoconnect");fe(this,"ready");fe(this,"reconnect");fe(this,"reconnect_timer_id");fe(this,"reconnect_interval");fe(this,"max_reconnects");fe(this,"rest_options");fe(this,"current_reconnects");fe(this,"generate_request_id");fe(this,"socket");fe(this,"webSocketFactory");fe(this,"dataPack");this.webSocketFactory=t,this.queue={},this.rpc_id=0,this.address=e,this.autoconnect=r,this.ready=!1,this.reconnect=s,this.reconnect_timer_id=void 0,this.reconnect_interval=i,this.max_reconnects=o,this.rest_options=c,this.current_reconnects=0,this.generate_request_id=d||(()=>++this.rpc_id),S?this.dataPack=S:this.dataPack=new wf,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(t,e,r,s){return!s&&typeof r=="object"&&(s=r,r=null),new Promise((i,o)=>{if(!this.ready)return o(new Error("socket not ready"));const c=this.generate_request_id(t,e),d={jsonrpc:"2.0",method:t,params:e||void 0,id:c};this.socket.send(this.dataPack.encode(d),s,S=>{if(S)return o(S);this.queue[c]={promise:[i,o]},r&&(this.queue[c].timeout=setTimeout(()=>{delete this.queue[c],o(new Error("reply timeout"))},r))})})}async login(t){const e=await this.call("rpc.login",t);if(!e)throw new Error("authentication failed");return e}async listMethods(){return await this.call("__listMethods")}notify(t,e){return new Promise((r,s)=>{if(!this.ready)return s(new Error("socket not ready"));const i={jsonrpc:"2.0",method:t,params:e};this.socket.send(this.dataPack.encode(i),o=>{if(o)return s(o);r()})})}async subscribe(t){typeof t=="string"&&(t=[t]);const e=await this.call("rpc.on",t);if(typeof t=="string"&&e[t]!=="ok")throw new Error("Failed subscribing to an event '"+t+"' with: "+e[t]);return e}async unsubscribe(t){typeof t=="string"&&(t=[t]);const e=await this.call("rpc.off",t);if(typeof t=="string"&&e[t]!=="ok")throw new Error("Failed unsubscribing from an event with: "+e);return e}close(t,e){this.socket.close(t||1e3,e)}setAutoReconnect(t){this.reconnect=t}setReconnectInterval(t){this.reconnect_interval=t}setMaxReconnects(t){this.max_reconnects=t}_connect(t,e){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(t,e),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:r})=>{r instanceof ArrayBuffer&&(r=ft.Buffer.from(r).toString());try{r=this.dataPack.decode(r)}catch{return}if(r.notification&&this.listeners(r.notification).length){if(!Object.keys(r.params).length)return this.emit(r.notification);const s=[r.notification];if(r.params.constructor===Object)s.push(r.params);else for(let i=0;i<r.params.length;i++)s.push(r.params[i]);return Promise.resolve().then(()=>{this.emit.apply(this,s)})}if(!this.queue[r.id])return r.method?Promise.resolve().then(()=>{this.emit(r.method,r==null?void 0:r.params)}):void 0;"error"in r=="result"in r&&this.queue[r.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[r.id].timeout&&clearTimeout(this.queue[r.id].timeout),r.error?this.queue[r.id].promise[1](r.error):this.queue[r.id].promise[0](r.result),delete this.queue[r.id]}),this.socket.addEventListener("error",r=>this.emit("error",r)),this.socket.addEventListener("close",({code:r,reason:s})=>{this.ready&&setTimeout(()=>this.emit("close",r,s),0),this.ready=!1,this.socket=void 0,r!==1e3&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||this.max_reconnects===0)&&(this.reconnect_timer_id=setTimeout(()=>this._connect(t,e),this.reconnect_interval)))})}};/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function vf(n){const t=Di(n);zr(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:e,Fp:r,a:s}=t;if(e){if(!r.eql(s,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof e!="object"||typeof e.beta!="bigint"||typeof e.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}const{bytesToNumberBE:xf,hexToBytes:Sf}=Fc,vr={Err:class extends Error{constructor(t=""){super(t)}},_parseInt(n){const{Err:t}=vr;if(n.length<2||n[0]!==2)throw new t("Invalid signature integer tag");const e=n[1],r=n.subarray(2,e+2);if(!e||r.length!==e)throw new t("Invalid signature integer: wrong length");if(r[0]&128)throw new t("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new t("Invalid signature integer: unnecessary leading zero");return{d:xf(r),l:n.subarray(e+2)}},toSig(n){const{Err:t}=vr,e=typeof n=="string"?Sf(n):n;nn(e);let r=e.length;if(r<2||e[0]!=48)throw new t("Invalid signature tag");if(e[1]!==r-2)throw new t("Invalid signature: incorrect length");const{d:s,l:i}=vr._parseInt(e.subarray(2)),{d:o,l:c}=vr._parseInt(i);if(c.length)throw new t("Invalid signature: left bytes after parsing");return{r:s,s:o}},hexFromSig(n){const t=S=>Number.parseInt(S[0],16)&8?"00"+S:S,e=S=>{const E=S.toString(16);return E.length&1?`0${E}`:E},r=t(e(n.s)),s=t(e(n.r)),i=r.length/2,o=s.length/2,c=e(i),d=e(o);return`30${e(o+i+4)}02${d}${s}02${c}${r}`}},er=BigInt(0),Ce=BigInt(1);BigInt(2);const ks=BigInt(3);BigInt(4);function Bf(n){const t=vf(n),{Fp:e}=t,r=t.toBytes||((T,k,R)=>{const F=k.toAffine();return _r(Uint8Array.from([4]),e.toBytes(F.x),e.toBytes(F.y))}),s=t.fromBytes||(T=>{const k=T.subarray(1),R=e.fromBytes(k.subarray(0,e.BYTES)),F=e.fromBytes(k.subarray(e.BYTES,2*e.BYTES));return{x:R,y:F}});function i(T){const{a:k,b:R}=t,F=e.sqr(T),D=e.mul(F,T);return e.add(e.add(D,e.mul(T,k)),R)}if(!e.eql(e.sqr(t.Gy),i(t.Gx)))throw new Error("bad generator point: equation left != right");function o(T){return typeof T=="bigint"&&er<T&&T<t.n}function c(T){if(!o(T))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function d(T){const{allowedPrivateKeyLengths:k,nByteLength:R,wrapPrivateKey:F,n:D}=t;if(k&&typeof T!="bigint"){if(Br(T)&&(T=Er(T)),typeof T!="string"||!k.includes(T.length))throw new Error("Invalid key");T=T.padStart(R*2,"0")}let O;try{O=typeof T=="bigint"?T:xr(ue("private key",T,R))}catch{throw new Error(`private key must be ${R} bytes, hex or bigint, not ${typeof T}`)}return F&&(O=Nt(O,D)),c(O),O}const S=new Map;function E(T){if(!(T instanceof A))throw new Error("ProjectivePoint expected")}class A{constructor(k,R,F){if(this.px=k,this.py=R,this.pz=F,k==null||!e.isValid(k))throw new Error("x required");if(R==null||!e.isValid(R))throw new Error("y required");if(F==null||!e.isValid(F))throw new Error("z required")}static fromAffine(k){const{x:R,y:F}=k||{};if(!k||!e.isValid(R)||!e.isValid(F))throw new Error("invalid affine point");if(k instanceof A)throw new Error("projective point not allowed");const D=O=>e.eql(O,e.ZERO);return D(R)&&D(F)?A.ZERO:new A(R,F,e.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(k){const R=e.invertBatch(k.map(F=>F.pz));return k.map((F,D)=>F.toAffine(R[D])).map(A.fromAffine)}static fromHex(k){const R=A.fromAffine(s(ue("pointHex",k)));return R.assertValidity(),R}static fromPrivateKey(k){return A.BASE.multiply(d(k))}_setWindowSize(k){this._WINDOW_SIZE=k,S.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!e.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:k,y:R}=this.toAffine();if(!e.isValid(k)||!e.isValid(R))throw new Error("bad point: x or y not FE");const F=e.sqr(R),D=i(k);if(!e.eql(F,D))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:k}=this.toAffine();if(e.isOdd)return!e.isOdd(k);throw new Error("Field doesn't support isOdd")}equals(k){E(k);const{px:R,py:F,pz:D}=this,{px:O,py:W,pz:q}=k,z=e.eql(e.mul(R,q),e.mul(O,D)),K=e.eql(e.mul(F,q),e.mul(W,D));return z&&K}negate(){return new A(this.px,e.neg(this.py),this.pz)}double(){const{a:k,b:R}=t,F=e.mul(R,ks),{px:D,py:O,pz:W}=this;let q=e.ZERO,z=e.ZERO,K=e.ZERO,J=e.mul(D,D),vt=e.mul(O,O),dt=e.mul(W,W),Q=e.mul(D,O);return Q=e.add(Q,Q),K=e.mul(D,W),K=e.add(K,K),q=e.mul(k,K),z=e.mul(F,dt),z=e.add(q,z),q=e.sub(vt,z),z=e.add(vt,z),z=e.mul(q,z),q=e.mul(Q,q),K=e.mul(F,K),dt=e.mul(k,dt),Q=e.sub(J,dt),Q=e.mul(k,Q),Q=e.add(Q,K),K=e.add(J,J),J=e.add(K,J),J=e.add(J,dt),J=e.mul(J,Q),z=e.add(z,J),dt=e.mul(O,W),dt=e.add(dt,dt),J=e.mul(dt,Q),q=e.sub(q,J),K=e.mul(dt,vt),K=e.add(K,K),K=e.add(K,K),new A(q,z,K)}add(k){E(k);const{px:R,py:F,pz:D}=this,{px:O,py:W,pz:q}=k;let z=e.ZERO,K=e.ZERO,J=e.ZERO;const vt=t.a,dt=e.mul(t.b,ks);let Q=e.mul(R,O),xt=e.mul(F,W),B=e.mul(D,q),a=e.add(R,F),h=e.add(O,W);a=e.mul(a,h),h=e.add(Q,xt),a=e.sub(a,h),h=e.add(R,D);let g=e.add(O,q);return h=e.mul(h,g),g=e.add(Q,B),h=e.sub(h,g),g=e.add(F,D),z=e.add(W,q),g=e.mul(g,z),z=e.add(xt,B),g=e.sub(g,z),J=e.mul(vt,h),z=e.mul(dt,B),J=e.add(z,J),z=e.sub(xt,J),J=e.add(xt,J),K=e.mul(z,J),xt=e.add(Q,Q),xt=e.add(xt,Q),B=e.mul(vt,B),h=e.mul(dt,h),xt=e.add(xt,B),B=e.sub(Q,B),B=e.mul(vt,B),h=e.add(h,B),Q=e.mul(xt,h),K=e.add(K,Q),Q=e.mul(g,h),z=e.mul(a,z),z=e.sub(z,Q),Q=e.mul(a,xt),J=e.mul(g,J),J=e.add(J,Q),new A(z,K,J)}subtract(k){return this.add(k.negate())}is0(){return this.equals(A.ZERO)}wNAF(k){return M.wNAFCached(this,S,k,R=>{const F=e.invertBatch(R.map(D=>D.pz));return R.map((D,O)=>D.toAffine(F[O])).map(A.fromAffine)})}multiplyUnsafe(k){const R=A.ZERO;if(k===er)return R;if(c(k),k===Ce)return this;const{endo:F}=t;if(!F)return M.unsafeLadder(this,k);let{k1neg:D,k1:O,k2neg:W,k2:q}=F.splitScalar(k),z=R,K=R,J=this;for(;O>er||q>er;)O&Ce&&(z=z.add(J)),q&Ce&&(K=K.add(J)),J=J.double(),O>>=Ce,q>>=Ce;return D&&(z=z.negate()),W&&(K=K.negate()),K=new A(e.mul(K.px,F.beta),K.py,K.pz),z.add(K)}multiply(k){c(k);let R=k,F,D;const{endo:O}=t;if(O){const{k1neg:W,k1:q,k2neg:z,k2:K}=O.splitScalar(R);let{p:J,f:vt}=this.wNAF(q),{p:dt,f:Q}=this.wNAF(K);J=M.constTimeNegate(W,J),dt=M.constTimeNegate(z,dt),dt=new A(e.mul(dt.px,O.beta),dt.py,dt.pz),F=J.add(dt),D=vt.add(Q)}else{const{p:W,f:q}=this.wNAF(R);F=W,D=q}return A.normalizeZ([F,D])[0]}multiplyAndAddUnsafe(k,R,F){const D=A.BASE,O=(q,z)=>z===er||z===Ce||!q.equals(D)?q.multiplyUnsafe(z):q.multiply(z),W=O(this,R).add(O(k,F));return W.is0()?void 0:W}toAffine(k){const{px:R,py:F,pz:D}=this,O=this.is0();k==null&&(k=O?e.ONE:e.inv(D));const W=e.mul(R,k),q=e.mul(F,k),z=e.mul(D,k);if(O)return{x:e.ZERO,y:e.ZERO};if(!e.eql(z,e.ONE))throw new Error("invZ was invalid");return{x:W,y:q}}isTorsionFree(){const{h:k,isTorsionFree:R}=t;if(k===Ce)return!0;if(R)return R(A,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:k,clearCofactor:R}=t;return k===Ce?this:R?R(A,this):this.multiplyUnsafe(t.h)}toRawBytes(k=!0){return this.assertValidity(),r(A,this,k)}toHex(k=!0){return Er(this.toRawBytes(k))}}A.BASE=new A(t.Gx,t.Gy,e.ONE),A.ZERO=new A(e.ZERO,e.ONE,e.ZERO);const P=t.nBitLength,M=uo(A,t.endo?Math.ceil(P/2):P);return{CURVE:t,ProjectivePoint:A,normPrivateKeyToScalar:d,weierstrassEquation:i,isWithinCurveOrder:o}}function Ef(n){const t=Di(n);return zr(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function _f(n){const t=Ef(n),{Fp:e,n:r}=t,s=e.BYTES+1,i=2*e.BYTES+1;function o(h){return er<h&&h<e.ORDER}function c(h){return Nt(h,r)}function d(h){return Si(h,r)}const{ProjectivePoint:S,normPrivateKeyToScalar:E,weierstrassEquation:A,isWithinCurveOrder:P}=Bf({...t,toBytes(h,g,v){const y=g.toAffine(),w=e.toBytes(y.x),_=_r;return v?_(Uint8Array.from([g.hasEvenY()?2:3]),w):_(Uint8Array.from([4]),w,e.toBytes(y.y))},fromBytes(h){const g=h.length,v=h[0],y=h.subarray(1);if(g===s&&(v===2||v===3)){const w=xr(y);if(!o(w))throw new Error("Point is not on curve");const _=A(w);let m;try{m=e.sqrt(_)}catch(H){const V=H instanceof Error?": "+H.message:"";throw new Error("Point is not on curve"+V)}const f=(m&Ce)===Ce;return(v&1)===1!==f&&(m=e.neg(m)),{x:w,y:m}}else if(g===i&&v===4){const w=e.fromBytes(y.subarray(0,e.BYTES)),_=e.fromBytes(y.subarray(e.BYTES,2*e.BYTES));return{x:w,y:_}}else throw new Error(`Point of length ${g} was invalid. Expected ${s} compressed bytes or ${i} uncompressed bytes`)}}),M=h=>Er(Or(h,t.nByteLength));function T(h){const g=r>>Ce;return h>g}function k(h){return T(h)?c(-h):h}const R=(h,g,v)=>xr(h.slice(g,v));class F{constructor(g,v,y){this.r=g,this.s=v,this.recovery=y,this.assertValidity()}static fromCompact(g){const v=t.nByteLength;return g=ue("compactSignature",g,v*2),new F(R(g,0,v),R(g,v,2*v))}static fromDER(g){const{r:v,s:y}=vr.toSig(ue("DER",g));return new F(v,y)}assertValidity(){if(!P(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!P(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(g){return new F(this.r,this.s,g)}recoverPublicKey(g){const{r:v,s:y,recovery:w}=this,_=K(ue("msgHash",g));if(w==null||![0,1,2,3].includes(w))throw new Error("recovery id invalid");const m=w===2||w===3?v+t.n:v;if(m>=e.ORDER)throw new Error("recovery id 2 or 3 invalid");const f=w&1?"03":"02",x=S.fromHex(f+M(m)),H=d(m),V=c(-_*H),G=c(y*H),it=S.BASE.multiplyAndAddUnsafe(x,V,G);if(!it)throw new Error("point at infinify");return it.assertValidity(),it}hasHighS(){return T(this.s)}normalizeS(){return this.hasHighS()?new F(this.r,c(-this.s),this.recovery):this}toDERRawBytes(){return Pr(this.toDERHex())}toDERHex(){return vr.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Pr(this.toCompactHex())}toCompactHex(){return M(this.r)+M(this.s)}}const D={isValidPrivateKey(h){try{return E(h),!0}catch{return!1}},normPrivateKeyToScalar:E,randomPrivateKey:()=>{const h=co(t.n);return Vc(t.randomBytes(h),t.n)},precompute(h=8,g=S.BASE){return g._setWindowSize(h),g.multiply(BigInt(3)),g}};function O(h,g=!0){return S.fromPrivateKey(h).toRawBytes(g)}function W(h){const g=Br(h),v=typeof h=="string",y=(g||v)&&h.length;return g?y===s||y===i:v?y===2*s||y===2*i:h instanceof S}function q(h,g,v=!0){if(W(h))throw new Error("first arg must be private key");if(!W(g))throw new Error("second arg must be public key");return S.fromHex(g).multiply(E(h)).toRawBytes(v)}const z=t.bits2int||function(h){const g=xr(h),v=h.length*8-t.nBitLength;return v>0?g>>BigInt(v):g},K=t.bits2int_modN||function(h){return c(z(h))},J=qi(t.nBitLength);function vt(h){if(typeof h!="bigint")throw new Error("bigint expected");if(!(er<=h&&h<J))throw new Error(`bigint expected < 2^${t.nBitLength}`);return Or(h,t.nByteLength)}function dt(h,g,v=Q){if(["recovered","canonical"].some(ot=>ot in v))throw new Error("sign() legacy options not supported");const{hash:y,randomBytes:w}=t;let{lowS:_,prehash:m,extraEntropy:f}=v;_==null&&(_=!0),h=ue("msgHash",h),m&&(h=ue("prehashed msgHash",y(h)));const x=K(h),H=E(g),V=[vt(H),vt(x)];if(f!=null&&f!==!1){const ot=f===!0?w(e.BYTES):f;V.push(ue("extraEntropy",ot))}const G=_r(...V),it=x;function rt(ot){const Pt=z(ot);if(!P(Pt))return;const pt=d(Pt),yt=S.BASE.multiply(Pt).toAffine(),Bt=c(yt.x);if(Bt===er)return;const wt=c(pt*c(it+Bt*H));if(wt===er)return;let _t=(yt.x===Bt?0:2)|Number(yt.y&Ce),Ke=wt;return _&&T(wt)&&(Ke=k(wt),_t^=1),new F(Bt,Ke,_t)}return{seed:G,k2sig:rt}}const Q={lowS:t.lowS,prehash:!1},xt={lowS:t.lowS,prehash:!1};function B(h,g,v=Q){const{seed:y,k2sig:w}=dt(h,g,v),_=t;return io(_.hash.outputLen,_.nByteLength,_.hmac)(y,w)}S.BASE._setWindowSize(8);function a(h,g,v,y=xt){var yt;const w=h;if(g=ue("msgHash",g),v=ue("publicKey",v),"strict"in y)throw new Error("options.strict was renamed to lowS");const{lowS:_,prehash:m}=y;let f,x;try{if(typeof w=="string"||Br(w))try{f=F.fromDER(w)}catch(Bt){if(!(Bt instanceof vr.Err))throw Bt;f=F.fromCompact(w)}else if(typeof w=="object"&&typeof w.r=="bigint"&&typeof w.s=="bigint"){const{r:Bt,s:wt}=w;f=new F(Bt,wt)}else throw new Error("PARSE");x=S.fromHex(v)}catch(Bt){if(Bt.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(_&&f.hasHighS())return!1;m&&(g=t.hash(g));const{r:H,s:V}=f,G=K(g),it=d(V),rt=c(G*it),ot=c(H*it),Pt=(yt=S.BASE.multiplyAndAddUnsafe(x,rt,ot))==null?void 0:yt.toAffine();return Pt?c(Pt.x)===H:!1}return{CURVE:t,getPublicKey:O,getSharedSecret:q,sign:B,verify:a,ProjectivePoint:S,Signature:F,utils:D}}class $o extends Ys{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,Xa(t);const r=Pi(e);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?t.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=t.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(t){return mn(this),this.iHash.update(t),this}digestInto(t){mn(this),kn(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:c}=this;return t=t,t.finished=s,t.destroyed=i,t.blockLen=o,t.outputLen=c,t.oHash=e._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Ho=(n,t,e)=>new $o(n,t).update(e).digest();Ho.create=(n,t)=>new $o(n,t);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function kf(n){return{hash:n,hmac:(t,...e)=>Ho(n,t,Zs(...e)),randomBytes:Js}}function Af(n,t){const e=r=>_f({...n,...kf(r)});return Object.freeze({...e(t),create:e})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ko=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),As=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),If=BigInt(1),ki=BigInt(2),Is=(n,t)=>(n+t/ki)/t;function Mf(n){const t=Ko,e=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),c=BigInt(44),d=BigInt(88),S=n*n*n%t,E=S*S*n%t,A=zt(E,e,t)*E%t,P=zt(A,e,t)*E%t,M=zt(P,ki,t)*S%t,T=zt(M,s,t)*M%t,k=zt(T,i,t)*T%t,R=zt(k,c,t)*k%t,F=zt(R,d,t)*R%t,D=zt(F,c,t)*k%t,O=zt(D,e,t)*E%t,W=zt(O,o,t)*T%t,q=zt(W,r,t)*S%t,z=zt(q,ki,t);if(!Ai.eql(Ai.sqr(z),n))throw new Error("Cannot find square root");return z}const Ai=oo(Ko,void 0,void 0,{sqrt:Mf}),ts=Af({a:BigInt(0),b:BigInt(7),Fp:Ai,n:As,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:n=>{const t=As,e=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-If*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=e,o=BigInt("0x100000000000000000000000000000000"),c=Is(i*n,t),d=Is(-r*n,t);let S=Nt(n-c*e-d*s,t),E=Nt(-c*r-d*i,t);const A=S>o,P=E>o;if(A&&(S=t-S),P&&(E=t-E),S>o||E>o)throw new Error("splitScalar: Endomorphism failed, k="+n);return{k1neg:A,k1:S,k2neg:P,k2:E}}}},Ei);BigInt(0);ts.ProjectivePoint;function Ms(n){try{return Ki.ExtendedPoint.fromHex(n),!0}catch{return!1}}const Rf=(n,t)=>Ki.sign(n,t.slice(0,32)),Tf=Ki.verify,pe=n=>ft.Buffer.isBuffer(n)?n:n instanceof Uint8Array?ft.Buffer.from(n.buffer,n.byteOffset,n.byteLength):ft.Buffer.from(n);class Lf{constructor(t){Object.assign(this,t)}encode(){return ft.Buffer.from(wo(gn,this))}static decode(t){return bo(gn,this,t)}static decodeUnchecked(t){return ho(gn,this,t)}}const gn=new Map;var Wo;const Cf=32,dr=32;function Uf(n){return n._bn!==void 0}let Rs=1;class st extends Lf{constructor(t){if(super({}),this._bn=void 0,Uf(t))this._bn=t._bn;else{if(typeof t=="string"){const e=me.decode(t);if(e.length!=dr)throw new Error("Invalid public key input");this._bn=new gs(e)}else this._bn=new gs(t);if(this._bn.byteLength()>dr)throw new Error("Invalid public key input")}}static unique(){const t=new st(Rs);return Rs+=1,new st(t.toBuffer())}equals(t){return this._bn.eq(t._bn)}toBase58(){return me.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const t=this.toBuffer();return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}toBuffer(){const t=this._bn.toArrayLike(ft.Buffer);if(t.length===dr)return t;const e=ft.Buffer.alloc(32);return t.copy(e,32-t.length),e}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(t,e,r){const s=ft.Buffer.concat([t.toBuffer(),ft.Buffer.from(e),r.toBuffer()]),i=Ei(s);return new st(i)}static createProgramAddressSync(t,e){let r=ft.Buffer.alloc(0);t.forEach(function(i){if(i.length>Cf)throw new TypeError("Max seed length exceeded");r=ft.Buffer.concat([r,pe(i)])}),r=ft.Buffer.concat([r,e.toBuffer(),ft.Buffer.from("ProgramDerivedAddress")]);const s=Ei(r);if(Ms(s))throw new Error("Invalid seeds, address must fall off the curve");return new st(s)}static async createProgramAddress(t,e){return this.createProgramAddressSync(t,e)}static findProgramAddressSync(t,e){let r=255,s;for(;r!=0;){try{const i=t.concat(ft.Buffer.from([r]));s=this.createProgramAddressSync(i,e)}catch(i){if(i instanceof TypeError)throw i;r--;continue}return[s,r]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(t,e){return this.findProgramAddressSync(t,e)}static isOnCurve(t){const e=new st(t);return Ms(e.toBytes())}}Wo=st;st.default=new Wo("11111111111111111111111111111111");gn.set(st,{kind:"struct",fields:[["_bn","u256"]]});new st("BPFLoader1111111111111111111111111111111111");const Nr=1232,Vo=127,Go=64;class jo extends Error{constructor(t){super(`Signature ${t} has expired: block height exceeded.`),this.signature=void 0,this.signature=t}}Object.defineProperty(jo.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class Zo extends Error{constructor(t,e){super(`Transaction was not confirmed in ${e.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${t} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=t}}Object.defineProperty(Zo.prototype,"name",{value:"TransactionExpiredTimeoutError"});class jr extends Error{constructor(t){super(`Signature ${t} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=t}}Object.defineProperty(jr.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class Sn{constructor(t,e){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=t,this.accountKeysFromLookups=e}keySegments(){const t=[this.staticAccountKeys];return this.accountKeysFromLookups&&(t.push(this.accountKeysFromLookups.writable),t.push(this.accountKeysFromLookups.readonly)),t}get(t){for(const e of this.keySegments()){if(t<e.length)return e[t];t-=e.length}}get length(){return this.keySegments().flat().length}compileInstructions(t){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const r=new Map;this.keySegments().flat().forEach((i,o)=>{r.set(i.toBase58(),o)});const s=i=>{const o=r.get(i.toBase58());if(o===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return o};return t.map(i=>({programIdIndex:s(i.programId),accountKeyIndexes:i.keys.map(o=>s(o.pubkey)),data:i.data}))}}const bt=(n="publicKey")=>$t(32,n),Ur=(n="string")=>{const t=tt([nt("length"),nt("lengthPadding"),$t(Sr(nt(),-8),"chars")],n),e=t.decode.bind(t),r=t.encode.bind(t),s=t;return s.decode=(i,o)=>e(i,o).chars.toString(),s.encode=(i,o,c)=>{const d={chars:ft.Buffer.from(i,"utf8")};return r(d,o,c)},s.alloc=i=>nt().span+nt().span+ft.Buffer.from(i,"utf8").length,s},Ff=(n="authorized")=>tt([bt("staker"),bt("withdrawer")],n),Nf=(n="lockup")=>tt([Ie("unixTimestamp"),Ie("epoch"),bt("custodian")],n),Pf=(n="voteInit")=>tt([bt("nodePubkey"),bt("authorizedVoter"),bt("authorizedWithdrawer"),Et("commission")],n),Of=(n="voteAuthorizeWithSeedArgs")=>tt([nt("voteAuthorizationType"),bt("currentAuthorityDerivedKeyOwnerPubkey"),Ur("currentAuthorityDerivedKeySeed"),bt("newAuthorized")],n);function Yo(n,t){const e=s=>{if(s.span>=0)return s.span;if(typeof s.alloc=="function")return s.alloc(t[s.property]);if("count"in s&&"elementLayout"in s){const i=t[s.property];if(Array.isArray(i))return i.length*e(s.elementLayout)}else if("fields"in s)return Yo({layout:s},t[s.property]);return 0};let r=0;return n.layout.fields.forEach(s=>{r+=e(s)}),r}function Fe(n){let t=0,e=0;for(;;){let r=n.shift();if(t|=(r&127)<<e*7,e+=1,!(r&128))break}return t}function Ne(n,t){let e=t;for(;;){let r=e&127;if(e>>=7,e==0){n.push(r);break}else r|=128,n.push(r)}}function ae(n,t){if(!n)throw new Error(t||"Assertion failed")}class Un{constructor(t,e){this.payer=void 0,this.keyMetaMap=void 0,this.payer=t,this.keyMetaMap=e}static compile(t,e){const r=new Map,s=o=>{const c=o.toBase58();let d=r.get(c);return d===void 0&&(d={isSigner:!1,isWritable:!1,isInvoked:!1},r.set(c,d)),d},i=s(e);i.isSigner=!0,i.isWritable=!0;for(const o of t){s(o.programId).isInvoked=!0;for(const c of o.keys){const d=s(c.pubkey);d.isSigner||(d.isSigner=c.isSigner),d.isWritable||(d.isWritable=c.isWritable)}}return new Un(e,r)}getMessageComponents(){const t=[...this.keyMetaMap.entries()];ae(t.length<=256,"Max static account keys length exceeded");const e=t.filter(([,d])=>d.isSigner&&d.isWritable),r=t.filter(([,d])=>d.isSigner&&!d.isWritable),s=t.filter(([,d])=>!d.isSigner&&d.isWritable),i=t.filter(([,d])=>!d.isSigner&&!d.isWritable),o={numRequiredSignatures:e.length+r.length,numReadonlySignedAccounts:r.length,numReadonlyUnsignedAccounts:i.length};{ae(e.length>0,"Expected at least one writable signer key");const[d]=e[0];ae(d===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const c=[...e.map(([d])=>new st(d)),...r.map(([d])=>new st(d)),...s.map(([d])=>new st(d)),...i.map(([d])=>new st(d))];return[o,c]}extractTableLookup(t){const[e,r]=this.drainKeysFoundInLookupTable(t.state.addresses,o=>!o.isSigner&&!o.isInvoked&&o.isWritable),[s,i]=this.drainKeysFoundInLookupTable(t.state.addresses,o=>!o.isSigner&&!o.isInvoked&&!o.isWritable);if(!(e.length===0&&s.length===0))return[{accountKey:t.key,writableIndexes:e,readonlyIndexes:s},{writable:r,readonly:i}]}drainKeysFoundInLookupTable(t,e){const r=new Array,s=new Array;for(const[i,o]of this.keyMetaMap.entries())if(e(o)){const c=new st(i),d=t.findIndex(S=>S.equals(c));d>=0&&(ae(d<256,"Max lookup table index exceeded"),r.push(d),s.push(c),this.keyMetaMap.delete(i))}return[r,s]}}const Xo="Reached end of buffer unexpectedly";function rr(n){if(n.length===0)throw new Error(Xo);return n.shift()}function Pe(n,...t){const[e]=t;if(t.length===2?e+(t[1]??0)>n.length:e>=n.length)throw new Error(Xo);return n.splice(...t)}class pr{constructor(t){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=t.header,this.accountKeys=t.accountKeys.map(e=>new st(e)),this.recentBlockhash=t.recentBlockhash,this.instructions=t.instructions,this.instructions.forEach(e=>this.indexToProgramIds.set(e.programIdIndex,this.accountKeys[e.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:me.decode(t.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new Sn(this.staticAccountKeys)}static compile(t){const e=Un.compile(t.instructions,t.payerKey),[r,s]=e.getMessageComponents(),o=new Sn(s).compileInstructions(t.instructions).map(c=>({programIdIndex:c.programIdIndex,accounts:c.accountKeyIndexes,data:me.encode(c.data)}));return new pr({header:r,accountKeys:s,recentBlockhash:t.recentBlockhash,instructions:o})}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures;if(t>=this.header.numRequiredSignatures){const r=t-e,i=this.accountKeys.length-e-this.header.numReadonlyUnsignedAccounts;return r<i}else{const r=e-this.header.numReadonlySignedAccounts;return t<r}}isProgramId(t){return this.indexToProgramIds.has(t)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((t,e)=>!this.isProgramId(e))}serialize(){const t=this.accountKeys.length;let e=[];Ne(e,t);const r=this.instructions.map(A=>{const{accounts:P,programIdIndex:M}=A,T=Array.from(me.decode(A.data));let k=[];Ne(k,P.length);let R=[];return Ne(R,T.length),{programIdIndex:M,keyIndicesCount:ft.Buffer.from(k),keyIndices:P,dataLength:ft.Buffer.from(R),data:T}});let s=[];Ne(s,r.length);let i=ft.Buffer.alloc(Nr);ft.Buffer.from(s).copy(i);let o=s.length;r.forEach(A=>{const M=tt([Et("programIdIndex"),$t(A.keyIndicesCount.length,"keyIndicesCount"),Be(Et("keyIndex"),A.keyIndices.length,"keyIndices"),$t(A.dataLength.length,"dataLength"),Be(Et("userdatum"),A.data.length,"data")]).encode(A,i,o);o+=M}),i=i.slice(0,o);const c=tt([$t(1,"numRequiredSignatures"),$t(1,"numReadonlySignedAccounts"),$t(1,"numReadonlyUnsignedAccounts"),$t(e.length,"keyCount"),Be(bt("key"),t,"keys"),bt("recentBlockhash")]),d={numRequiredSignatures:ft.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:ft.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:ft.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:ft.Buffer.from(e),keys:this.accountKeys.map(A=>pe(A.toBytes())),recentBlockhash:me.decode(this.recentBlockhash)};let S=ft.Buffer.alloc(2048);const E=c.encode(d,S);return i.copy(S,E),S.slice(0,E+i.length)}static from(t){let e=[...t];const r=rr(e);if(r!==(r&Vo))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const s=rr(e),i=rr(e),o=Fe(e);let c=[];for(let P=0;P<o;P++){const M=Pe(e,0,dr);c.push(new st(ft.Buffer.from(M)))}const d=Pe(e,0,dr),S=Fe(e);let E=[];for(let P=0;P<S;P++){const M=rr(e),T=Fe(e),k=Pe(e,0,T),R=Fe(e),F=Pe(e,0,R),D=me.encode(ft.Buffer.from(F));E.push({programIdIndex:M,accounts:k,data:D})}const A={header:{numRequiredSignatures:r,numReadonlySignedAccounts:s,numReadonlyUnsignedAccounts:i},recentBlockhash:me.encode(ft.Buffer.from(d)),accountKeys:c,instructions:E};return new pr(A)}}class Bn{constructor(t){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=t.header,this.staticAccountKeys=t.staticAccountKeys,this.recentBlockhash=t.recentBlockhash,this.compiledInstructions=t.compiledInstructions,this.addressTableLookups=t.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let t=0;for(const e of this.addressTableLookups)t+=e.readonlyIndexes.length+e.writableIndexes.length;return t}getAccountKeys(t){let e;if(t&&"accountKeysFromLookups"in t&&t.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=t.accountKeysFromLookups.writable.length+t.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");e=t.accountKeysFromLookups}else if(t&&"addressLookupTableAccounts"in t&&t.addressLookupTableAccounts)e=this.resolveAddressTableLookups(t.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new Sn(this.staticAccountKeys,e)}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures,r=this.staticAccountKeys.length;if(t>=r){const s=t-r,i=this.addressTableLookups.reduce((o,c)=>o+c.writableIndexes.length,0);return s<i}else if(t>=this.header.numRequiredSignatures){const s=t-e,o=r-e-this.header.numReadonlyUnsignedAccounts;return s<o}else{const s=e-this.header.numReadonlySignedAccounts;return t<s}}resolveAddressTableLookups(t){const e={writable:[],readonly:[]};for(const r of this.addressTableLookups){const s=t.find(i=>i.key.equals(r.accountKey));if(!s)throw new Error(`Failed to find address lookup table account for table key ${r.accountKey.toBase58()}`);for(const i of r.writableIndexes)if(i<s.state.addresses.length)e.writable.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${r.accountKey.toBase58()}`);for(const i of r.readonlyIndexes)if(i<s.state.addresses.length)e.readonly.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${r.accountKey.toBase58()}`)}return e}static compile(t){const e=Un.compile(t.instructions,t.payerKey),r=new Array,s={writable:new Array,readonly:new Array},i=t.addressLookupTableAccounts||[];for(const E of i){const A=e.extractTableLookup(E);if(A!==void 0){const[P,{writable:M,readonly:T}]=A;r.push(P),s.writable.push(...M),s.readonly.push(...T)}}const[o,c]=e.getMessageComponents(),S=new Sn(c,s).compileInstructions(t.instructions);return new Bn({header:o,staticAccountKeys:c,recentBlockhash:t.recentBlockhash,compiledInstructions:S,addressTableLookups:r})}serialize(){const t=Array();Ne(t,this.staticAccountKeys.length);const e=this.serializeInstructions(),r=Array();Ne(r,this.compiledInstructions.length);const s=this.serializeAddressTableLookups(),i=Array();Ne(i,this.addressTableLookups.length);const o=tt([Et("prefix"),tt([Et("numRequiredSignatures"),Et("numReadonlySignedAccounts"),Et("numReadonlyUnsignedAccounts")],"header"),$t(t.length,"staticAccountKeysLength"),Be(bt(),this.staticAccountKeys.length,"staticAccountKeys"),bt("recentBlockhash"),$t(r.length,"instructionsLength"),$t(e.length,"serializedInstructions"),$t(i.length,"addressTableLookupsLength"),$t(s.length,"serializedAddressTableLookups")]),c=new Uint8Array(Nr),S=o.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(t),staticAccountKeys:this.staticAccountKeys.map(E=>E.toBytes()),recentBlockhash:me.decode(this.recentBlockhash),instructionsLength:new Uint8Array(r),serializedInstructions:e,addressTableLookupsLength:new Uint8Array(i),serializedAddressTableLookups:s},c);return c.slice(0,S)}serializeInstructions(){let t=0;const e=new Uint8Array(Nr);for(const r of this.compiledInstructions){const s=Array();Ne(s,r.accountKeyIndexes.length);const i=Array();Ne(i,r.data.length);const o=tt([Et("programIdIndex"),$t(s.length,"encodedAccountKeyIndexesLength"),Be(Et(),r.accountKeyIndexes.length,"accountKeyIndexes"),$t(i.length,"encodedDataLength"),$t(r.data.length,"data")]);t+=o.encode({programIdIndex:r.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(s),accountKeyIndexes:r.accountKeyIndexes,encodedDataLength:new Uint8Array(i),data:r.data},e,t)}return e.slice(0,t)}serializeAddressTableLookups(){let t=0;const e=new Uint8Array(Nr);for(const r of this.addressTableLookups){const s=Array();Ne(s,r.writableIndexes.length);const i=Array();Ne(i,r.readonlyIndexes.length);const o=tt([bt("accountKey"),$t(s.length,"encodedWritableIndexesLength"),Be(Et(),r.writableIndexes.length,"writableIndexes"),$t(i.length,"encodedReadonlyIndexesLength"),Be(Et(),r.readonlyIndexes.length,"readonlyIndexes")]);t+=o.encode({accountKey:r.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(s),writableIndexes:r.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(i),readonlyIndexes:r.readonlyIndexes},e,t)}return e.slice(0,t)}static deserialize(t){let e=[...t];const r=rr(e),s=r&Vo;ae(r!==s,"Expected versioned message but received legacy message");const i=s;ae(i===0,`Expected versioned message with version 0 but found version ${i}`);const o={numRequiredSignatures:rr(e),numReadonlySignedAccounts:rr(e),numReadonlyUnsignedAccounts:rr(e)},c=[],d=Fe(e);for(let T=0;T<d;T++)c.push(new st(Pe(e,0,dr)));const S=me.encode(Pe(e,0,dr)),E=Fe(e),A=[];for(let T=0;T<E;T++){const k=rr(e),R=Fe(e),F=Pe(e,0,R),D=Fe(e),O=new Uint8Array(Pe(e,0,D));A.push({programIdIndex:k,accountKeyIndexes:F,data:O})}const P=Fe(e),M=[];for(let T=0;T<P;T++){const k=new st(Pe(e,0,dr)),R=Fe(e),F=Pe(e,0,R),D=Fe(e),O=Pe(e,0,D);M.push({accountKey:k,writableIndexes:F,readonlyIndexes:O})}return new Bn({header:o,staticAccountKeys:c,recentBlockhash:S,compiledInstructions:A,addressTableLookups:M})}}let fr=function(n){return n[n.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",n[n.PROCESSED=1]="PROCESSED",n[n.TIMED_OUT=2]="TIMED_OUT",n[n.NONCE_INVALID=3]="NONCE_INVALID",n}({});const qf=ft.Buffer.alloc(Go).fill(0);class De{constructor(t){this.keys=void 0,this.programId=void 0,this.data=ft.Buffer.alloc(0),this.programId=t.programId,this.keys=t.keys,t.data&&(this.data=t.data)}toJSON(){return{keys:this.keys.map(({pubkey:t,isSigner:e,isWritable:r})=>({pubkey:t.toJSON(),isSigner:e,isWritable:r})),programId:this.programId.toJSON(),data:[...this.data]}}}class Ge{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(t){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!t)if(t.feePayer&&(this.feePayer=t.feePayer),t.signatures&&(this.signatures=t.signatures),Object.prototype.hasOwnProperty.call(t,"nonceInfo")){const{minContextSlot:e,nonceInfo:r}=t;this.minNonceContextSlot=e,this.nonceInfo=r}else if(Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")){const{blockhash:e,lastValidBlockHeight:r}=t;this.recentBlockhash=e,this.lastValidBlockHeight=r}else{const{recentBlockhash:e,nonceInfo:r}=t;r&&(this.nonceInfo=r),this.recentBlockhash=e}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(t=>t.toJSON()),signers:this.signatures.map(({publicKey:t})=>t.toJSON())}}add(...t){if(t.length===0)throw new Error("No instructions");return t.forEach(e=>{"instructions"in e?this.instructions=this.instructions.concat(e.instructions):"data"in e&&"programId"in e&&"keys"in e?this.instructions.push(e):this.instructions.push(new De(e))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let t,e;if(this.nonceInfo?(t=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?e=[this.nonceInfo.nonceInstruction,...this.instructions]:e=this.instructions):(t=this.recentBlockhash,e=this.instructions),!t)throw new Error("Transaction recentBlockhash required");e.length<1&&console.warn("No instructions provided");let r;if(this.feePayer)r=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)r=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let k=0;k<e.length;k++)if(e[k].programId===void 0)throw new Error(`Transaction instruction index ${k} has undefined program id`);const s=[],i=[];e.forEach(k=>{k.keys.forEach(F=>{i.push({...F})});const R=k.programId.toString();s.includes(R)||s.push(R)}),s.forEach(k=>{i.push({pubkey:new st(k),isSigner:!1,isWritable:!1})});const o=[];i.forEach(k=>{const R=k.pubkey.toString(),F=o.findIndex(D=>D.pubkey.toString()===R);F>-1?(o[F].isWritable=o[F].isWritable||k.isWritable,o[F].isSigner=o[F].isSigner||k.isSigner):o.push(k)}),o.sort(function(k,R){if(k.isSigner!==R.isSigner)return k.isSigner?-1:1;if(k.isWritable!==R.isWritable)return k.isWritable?-1:1;const F={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return k.pubkey.toBase58().localeCompare(R.pubkey.toBase58(),"en",F)});const c=o.findIndex(k=>k.pubkey.equals(r));if(c>-1){const[k]=o.splice(c,1);k.isSigner=!0,k.isWritable=!0,o.unshift(k)}else o.unshift({pubkey:r,isSigner:!0,isWritable:!0});for(const k of this.signatures){const R=o.findIndex(F=>F.pubkey.equals(k.publicKey));if(R>-1)o[R].isSigner||(o[R].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${k.publicKey.toString()}`)}let d=0,S=0,E=0;const A=[],P=[];o.forEach(({pubkey:k,isSigner:R,isWritable:F})=>{R?(A.push(k.toString()),d+=1,F||(S+=1)):(P.push(k.toString()),F||(E+=1))});const M=A.concat(P),T=e.map(k=>{const{data:R,programId:F}=k;return{programIdIndex:M.indexOf(F.toString()),accounts:k.keys.map(D=>M.indexOf(D.pubkey.toString())),data:me.encode(R)}});return T.forEach(k=>{ae(k.programIdIndex>=0),k.accounts.forEach(R=>ae(R>=0))}),new pr({header:{numRequiredSignatures:d,numReadonlySignedAccounts:S,numReadonlyUnsignedAccounts:E},accountKeys:M,recentBlockhash:t,instructions:T})}_compile(){const t=this.compileMessage(),e=t.accountKeys.slice(0,t.header.numRequiredSignatures);return this.signatures.length===e.length&&this.signatures.every((s,i)=>e[i].equals(s.publicKey))||(this.signatures=e.map(r=>({signature:null,publicKey:r}))),t}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(t){return(await t.getFeeForMessage(this.compileMessage())).value}setSigners(...t){if(t.length===0)throw new Error("No signers");const e=new Set;this.signatures=t.filter(r=>{const s=r.toString();return e.has(s)?!1:(e.add(s),!0)}).map(r=>({signature:null,publicKey:r}))}sign(...t){if(t.length===0)throw new Error("No signers");const e=new Set,r=[];for(const i of t){const o=i.publicKey.toString();e.has(o)||(e.add(o),r.push(i))}this.signatures=r.map(i=>({signature:null,publicKey:i.publicKey}));const s=this._compile();this._partialSign(s,...r)}partialSign(...t){if(t.length===0)throw new Error("No signers");const e=new Set,r=[];for(const i of t){const o=i.publicKey.toString();e.has(o)||(e.add(o),r.push(i))}const s=this._compile();this._partialSign(s,...r)}_partialSign(t,...e){const r=t.serialize();e.forEach(s=>{const i=Rf(r,s.secretKey);this._addSignature(s.publicKey,pe(i))})}addSignature(t,e){this._compile(),this._addSignature(t,e)}_addSignature(t,e){ae(e.length===64);const r=this.signatures.findIndex(s=>t.equals(s.publicKey));if(r<0)throw new Error(`unknown signer: ${t.toString()}`);this.signatures[r].signature=ft.Buffer.from(e)}verifySignatures(t=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),t)}_getMessageSignednessErrors(t,e){const r={};for(const{signature:s,publicKey:i}of this.signatures)s===null?e&&(r.missing||(r.missing=[])).push(i):Tf(s,t,i.toBytes())||(r.invalid||(r.invalid=[])).push(i);return r.invalid||r.missing?r:void 0}serialize(t){const{requireAllSignatures:e,verifySignatures:r}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},t),s=this.serializeMessage();if(r){const i=this._getMessageSignednessErrors(s,e);if(i){let o="Signature verification failed.";throw i.invalid&&(o+=`
Invalid signature for public key${i.invalid.length===1?"":"(s)"} [\`${i.invalid.map(c=>c.toBase58()).join("`, `")}\`].`),i.missing&&(o+=`
Missing signature for public key${i.missing.length===1?"":"(s)"} [\`${i.missing.map(c=>c.toBase58()).join("`, `")}\`].`),new Error(o)}}return this._serialize(s)}_serialize(t){const{signatures:e}=this,r=[];Ne(r,e.length);const s=r.length+e.length*64+t.length,i=ft.Buffer.alloc(s);return ae(e.length<256),ft.Buffer.from(r).copy(i,0),e.forEach(({signature:o},c)=>{o!==null&&(ae(o.length===64,"signature has invalid length"),ft.Buffer.from(o).copy(i,r.length+c*64))}),t.copy(i,r.length+e.length*64),ae(i.length<=Nr,`Transaction too large: ${i.length} > ${Nr}`),i}get keys(){return ae(this.instructions.length===1),this.instructions[0].keys.map(t=>t.pubkey)}get programId(){return ae(this.instructions.length===1),this.instructions[0].programId}get data(){return ae(this.instructions.length===1),this.instructions[0].data}static from(t){let e=[...t];const r=Fe(e);let s=[];for(let i=0;i<r;i++){const o=Pe(e,0,Go);s.push(me.encode(ft.Buffer.from(o)))}return Ge.populate(pr.from(e),s)}static populate(t,e=[]){const r=new Ge;return r.recentBlockhash=t.recentBlockhash,t.header.numRequiredSignatures>0&&(r.feePayer=t.accountKeys[0]),e.forEach((s,i)=>{const o={signature:s==me.encode(qf)?null:me.decode(s),publicKey:t.accountKeys[i]};r.signatures.push(o)}),t.instructions.forEach(s=>{const i=s.accounts.map(o=>{const c=t.accountKeys[o];return{pubkey:c,isSigner:r.signatures.some(d=>d.publicKey.toString()===c.toString())||t.isAccountSigner(o),isWritable:t.isAccountWritable(o)}});r.instructions.push(new De({keys:i,programId:t.accountKeys[s.programIdIndex],data:me.decode(s.data)}))}),r._message=t,r._json=r.toJSON(),r}}const Df=160,zf=64,$f=Df/zf,Hf=1e3/$f;new st("SysvarC1ock11111111111111111111111111111111");new st("SysvarEpochSchedu1e111111111111111111111111");new st("Sysvar1nstructions1111111111111111111111111");const gi=new st("SysvarRecentB1ockHashes11111111111111111111"),Ts=new st("SysvarRent111111111111111111111111111111111");new st("SysvarRewards111111111111111111111111111111");new st("SysvarS1otHashes111111111111111111111111111");new st("SysvarS1otHistory11111111111111111111111111");new st("SysvarStakeHistory1111111111111111111111111");class Ls extends Error{constructor({action:t,signature:e,transactionMessage:r,logs:s}){const i=s?`Logs: 
${JSON.stringify(s.slice(-10),null,2)}. `:"",o="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let c;switch(t){case"send":c=`Transaction ${e} resulted in an error. 
${r}. `+i+o;break;case"simulate":c=`Simulation failed. 
Message: ${r}. 
`+i+o;break;default:c=`Unknown action '${(d=>d)(t)}'`}super(c),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=e,this.transactionMessage=r,this.transactionLogs=s||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const t=this.transactionLogs;if(!(t!=null&&typeof t=="object"&&"then"in t))return t}async getLogs(t){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((e,r)=>{t.getTransaction(this.signature).then(s=>{if(s&&s.meta&&s.meta.logMessages){const i=s.meta.logMessages;this.transactionLogs=i,e(i)}else r(new Error("Log messages not found"))}).catch(r)})),await this.transactionLogs}}class et extends Error{constructor({code:t,message:e,data:r},s){super(s!=null?`${s}: ${e}`:e),this.code=void 0,this.data=void 0,this.code=t,this.data=r,this.name="SolanaJSONRPCError"}}function Cr(n){return new Promise(t=>setTimeout(t,n))}function Re(n,t){const e=n.layout.span>=0?n.layout.span:Yo(n,t),r=ft.Buffer.alloc(e),s=Object.assign({instruction:n.index},t);return n.layout.encode(s,r),r}const Kf=de("lamportsPerSignature"),Jo=tt([nt("version"),nt("state"),bt("authorizedPubkey"),bt("nonce"),tt([Kf],"feeCalculator")]),Cs=Jo.span;class es{constructor(t){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=t.authorizedPubkey,this.nonce=t.nonce,this.feeCalculator=t.feeCalculator}static fromAccountData(t){const e=Jo.decode(pe(t),0);return new es({authorizedPubkey:new st(e.authorizedPubkey),nonce:new st(e.nonce).toString(),feeCalculator:e.feeCalculator})}}const Wf=n=>{const t=n.decode.bind(n),e=n.encode.bind(n);return{decode:t,encode:e}},Vf=n=>t=>{const e=$t(n,t),{encode:r,decode:s}=Wf(e),i=e;return i.decode=(o,c)=>{const d=s(o,c);return Nu(ft.Buffer.from(d))},i.encode=(o,c,d)=>{const S=qu(o,n);return r(S,c,d)},i},Dr=Vf(8),Te=Object.freeze({Create:{index:0,layout:tt([nt("instruction"),Ie("lamports"),Ie("space"),bt("programId")])},Assign:{index:1,layout:tt([nt("instruction"),bt("programId")])},Transfer:{index:2,layout:tt([nt("instruction"),Dr("lamports")])},CreateWithSeed:{index:3,layout:tt([nt("instruction"),bt("base"),Ur("seed"),Ie("lamports"),Ie("space"),bt("programId")])},AdvanceNonceAccount:{index:4,layout:tt([nt("instruction")])},WithdrawNonceAccount:{index:5,layout:tt([nt("instruction"),Ie("lamports")])},InitializeNonceAccount:{index:6,layout:tt([nt("instruction"),bt("authorized")])},AuthorizeNonceAccount:{index:7,layout:tt([nt("instruction"),bt("authorized")])},Allocate:{index:8,layout:tt([nt("instruction"),Ie("space")])},AllocateWithSeed:{index:9,layout:tt([nt("instruction"),bt("base"),Ur("seed"),Ie("space"),bt("programId")])},AssignWithSeed:{index:10,layout:tt([nt("instruction"),bt("base"),Ur("seed"),bt("programId")])},TransferWithSeed:{index:11,layout:tt([nt("instruction"),Dr("lamports"),Ur("seed"),bt("programId")])},UpgradeNonceAccount:{index:12,layout:tt([nt("instruction")])}});class Jr{constructor(){}static createAccount(t){const e=Te.Create,r=Re(e,{lamports:t.lamports,space:t.space,programId:pe(t.programId.toBuffer())});return new De({keys:[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:r})}static transfer(t){let e,r;if("basePubkey"in t){const s=Te.TransferWithSeed;e=Re(s,{lamports:BigInt(t.lamports),seed:t.seed,programId:pe(t.programId.toBuffer())}),r=[{pubkey:t.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}else{const s=Te.Transfer;e=Re(s,{lamports:BigInt(t.lamports)}),r=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}return new De({keys:r,programId:this.programId,data:e})}static assign(t){let e,r;if("basePubkey"in t){const s=Te.AssignWithSeed;e=Re(s,{base:pe(t.basePubkey.toBuffer()),seed:t.seed,programId:pe(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{const s=Te.Assign;e=Re(s,{programId:pe(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new De({keys:r,programId:this.programId,data:e})}static createAccountWithSeed(t){const e=Te.CreateWithSeed,r=Re(e,{base:pe(t.basePubkey.toBuffer()),seed:t.seed,lamports:t.lamports,space:t.space,programId:pe(t.programId.toBuffer())});let s=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!1,isWritable:!0}];return t.basePubkey!=t.fromPubkey&&s.push({pubkey:t.basePubkey,isSigner:!0,isWritable:!1}),new De({keys:s,programId:this.programId,data:r})}static createNonceAccount(t){const e=new Ge;"basePubkey"in t&&"seed"in t?e.add(Jr.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:Cs,programId:this.programId})):e.add(Jr.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,lamports:t.lamports,space:Cs,programId:this.programId}));const r={noncePubkey:t.noncePubkey,authorizedPubkey:t.authorizedPubkey};return e.add(this.nonceInitialize(r)),e}static nonceInitialize(t){const e=Te.InitializeNonceAccount,r=Re(e,{authorized:pe(t.authorizedPubkey.toBuffer())}),s={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:gi,isSigner:!1,isWritable:!1},{pubkey:Ts,isSigner:!1,isWritable:!1}],programId:this.programId,data:r};return new De(s)}static nonceAdvance(t){const e=Te.AdvanceNonceAccount,r=Re(e),s={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:gi,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r};return new De(s)}static nonceWithdraw(t){const e=Te.WithdrawNonceAccount,r=Re(e,{lamports:t.lamports});return new De({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0},{pubkey:gi,isSigner:!1,isWritable:!1},{pubkey:Ts,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static nonceAuthorize(t){const e=Te.AuthorizeNonceAccount,r=Re(e,{authorized:pe(t.newAuthorizedPubkey.toBuffer())});return new De({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static allocate(t){let e,r;if("basePubkey"in t){const s=Te.AllocateWithSeed;e=Re(s,{base:pe(t.basePubkey.toBuffer()),seed:t.seed,space:t.space,programId:pe(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{const s=Te.Allocate;e=Re(s,{space:t.space}),r=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new De({keys:r,programId:this.programId,data:e})}}Jr.programId=new st("11111111111111111111111111111111");new st("BPFLoader2111111111111111111111111111111111");function Gf(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var jf=Object.prototype.toString,Zf=Object.keys||function(n){var t=[];for(var e in n)t.push(e);return t};function Zr(n,t){var e,r,s,i,o,c,d;if(n===!0)return"true";if(n===!1)return"false";switch(typeof n){case"object":if(n===null)return null;if(n.toJSON&&typeof n.toJSON=="function")return Zr(n.toJSON(),t);if(d=jf.call(n),d==="[object Array]"){for(s="[",r=n.length-1,e=0;e<r;e++)s+=Zr(n[e],!0)+",";return r>-1&&(s+=Zr(n[e],!0)),s+"]"}else if(d==="[object Object]"){for(i=Zf(n).sort(),r=i.length,s="",e=0;e<r;)o=i[e],c=Zr(n[o],!1),c!==void 0&&(s&&(s+=","),s+=JSON.stringify(o)+":"+c),e++;return"{"+s+"}"}else return JSON.stringify(n);case"function":case"undefined":return t?null:void 0;case"string":return JSON.stringify(n);default:return isFinite(n)?n:null}}var Yf=function(n){var t=Zr(n,!1);if(t!==void 0)return""+t},Us=Gf(Yf);const Vr=32;function mi(n){let t=0;for(;n>1;)n/=2,t++;return t}function Xf(n){return n===0?1:(n--,n|=n>>1,n|=n>>2,n|=n>>4,n|=n>>8,n|=n>>16,n|=n>>32,n+1)}class Jf{constructor(t,e,r,s,i){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=t,this.leaderScheduleSlotOffset=e,this.warmup=r,this.firstNormalEpoch=s,this.firstNormalSlot=i}getEpoch(t){return this.getEpochAndSlotIndex(t)[0]}getEpochAndSlotIndex(t){if(t<this.firstNormalSlot){const e=mi(Xf(t+Vr+1))-mi(Vr)-1,r=this.getSlotsInEpoch(e),s=t-(r-Vr);return[e,s]}else{const e=t-this.firstNormalSlot,r=Math.floor(e/this.slotsPerEpoch),s=this.firstNormalEpoch+r,i=e%this.slotsPerEpoch;return[s,i]}}getFirstSlotInEpoch(t){return t<=this.firstNormalEpoch?(Math.pow(2,t)-1)*Vr:(t-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(t){return this.getFirstSlotInEpoch(t)+this.getSlotsInEpoch(t)-1}getSlotsInEpoch(t){return t<this.firstNormalEpoch?Math.pow(2,t+mi(Vr)):this.slotsPerEpoch}}var Qf=globalThis.fetch;class tl extends bf{constructor(t,e,r){const s=i=>{const o=yf(i,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...e});return"socket"in o?this.underlyingSocket=o.socket:this.underlyingSocket=o,o};super(s,t,e,r),this.underlyingSocket=void 0}call(...t){var r;const e=(r=this.underlyingSocket)==null?void 0:r.readyState;return e===1?super.call(...t):Promise.reject(new Error("Tried to call a JSON-RPC method `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}notify(...t){var r;const e=(r=this.underlyingSocket)==null?void 0:r.readyState;return e===1?super.notify(...t):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}}function el(n,t){let e;try{e=n.layout.decode(t)}catch(r){throw new Error("invalid instruction; "+r)}if(e.typeIndex!==n.index)throw new Error(`invalid account data; account type mismatch ${e.typeIndex} != ${n.index}`);return e}const Fs=56;class Ns{constructor(t){this.key=void 0,this.state=void 0,this.key=t.key,this.state=t.state}isActive(){const t=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===t}static deserialize(t){const e=el(rl,t),r=t.length-Fs;ae(r>=0,"lookup table is invalid"),ae(r%32===0,"lookup table is invalid");const s=r/32,{addresses:i}=tt([Be(bt(),s,"addresses")]).decode(t.slice(Fs));return{deactivationSlot:e.deactivationSlot,lastExtendedSlot:e.lastExtendedSlot,lastExtendedSlotStartIndex:e.lastExtendedStartIndex,authority:e.authority.length!==0?new st(e.authority[0]):void 0,addresses:i.map(o=>new st(o))}}}const rl={index:1,layout:tt([nt("typeIndex"),Dr("deactivationSlot"),de("lastExtendedSlot"),Et("lastExtendedStartIndex"),Et(),Be(bt(),Sr(Et(),-1),"authority")])},nl=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function il(n){const t=n.match(nl);if(t==null)throw TypeError(`Failed to validate endpoint URL \`${n}\``);const[e,r,s,i]=t,o=n.startsWith("https:")?"wss:":"ws:",c=s==null?null:parseInt(s.slice(1),10),d=c==null?"":`:${c+1}`;return`${o}//${r}${d}${i}`}const ce=rn(Fi(st),j(),n=>new st(n)),Qo=Ni([j(),Ot("base64")]),rs=rn(Fi(ft.Buffer),Qo,n=>ft.Buffer.from(n[0],"base64")),sl=30*1e3;function ol(n){if(/^https?:/.test(n)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return n}function Ft(n){let t,e;if(typeof n=="string")t=n;else if(n){const{commitment:r,...s}=n;t=r,e=s}return{commitment:t,config:e}}function ta(n){return ke([$({jsonrpc:Ot("2.0"),id:j(),result:n}),$({jsonrpc:Ot("2.0"),id:j(),error:$({code:en(),message:j(),data:at(ja())})})])}const al=ta(en());function mt(n){return rn(ta(n),al,t=>"error"in t?t:{...t,result:Z(t.result,n)})}function Ht(n){return mt($({context:$({slot:C()}),value:n}))}function Fn(n){return $({context:$({slot:C()}),value:n})}function yi(n,t){return n===0?new Bn({header:t.header,staticAccountKeys:t.accountKeys.map(e=>new st(e)),recentBlockhash:t.recentBlockhash,compiledInstructions:t.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:me.decode(e.data)})),addressTableLookups:t.addressTableLookups}):new pr(t)}const cl=$({foundation:C(),foundationTerm:C(),initial:C(),taper:C(),terminal:C()}),ul=mt(X(Y($({epoch:C(),effectiveSlot:C(),amount:C(),postBalance:C(),commission:at(Y(C()))})))),fl=X($({slot:C(),prioritizationFee:C()})),ll=$({total:C(),validator:C(),foundation:C(),epoch:C()}),hl=$({epoch:C(),slotIndex:C(),slotsInEpoch:C(),absoluteSlot:C(),blockHeight:at(C()),transactionCount:at(C())}),dl=$({slotsPerEpoch:C(),leaderScheduleSlotOffset:C(),warmup:je(),firstNormalEpoch:C(),firstNormalSlot:C()}),pl=Gs(j(),X(C())),Ir=Y(ke([$({}),j()])),gl=$({err:Ir}),ml=Ot("receivedSignature"),yl=$({"solana-core":j(),"feature-set":at(C())}),Ps=Ht($({err:Y(ke([$({}),j()])),logs:Y(X(j())),accounts:at(Y(X(Y($({executable:je(),owner:j(),lamports:C(),data:X(j()),rentEpoch:at(C())}))))),unitsConsumed:at(C()),returnData:at(Y($({programId:j(),data:Ni([j(),Ot("base64")])})))})),wl=Ht($({byIdentity:Gs(j(),X(C())),range:$({firstSlot:C(),lastSlot:C()})}));function bl(n,t,e,r,s,i){const o=e||Qf;let c;i!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let d;return r&&(d=async(E,A)=>{const P=await new Promise((M,T)=>{try{r(E,A,(k,R)=>M([k,R]))}catch(k){T(k)}});return await o(...P)}),new gf(async(E,A)=>{const P={method:"POST",body:E,agent:c,headers:Object.assign({"Content-Type":"application/json"},t||{},vh)};try{let M=5,T,k=500;for(;d?T=await d(n,P):T=await o(n,P),!(T.status!==429||s===!0||(M-=1,M===0));)console.error(`Server responded with ${T.status} ${T.statusText}.  Retrying after ${k}ms delay...`),await Cr(k),k*=2;const R=await T.text();T.ok?A(null,R):A(new Error(`${T.status} ${T.statusText}: ${R}`))}catch(M){M instanceof Error&&A(M)}},{})}function vl(n){return(t,e)=>new Promise((r,s)=>{n.request(t,e,(i,o)=>{if(i){s(i);return}r(o)})})}function xl(n){return t=>new Promise((e,r)=>{t.length===0&&e([]);const s=t.map(i=>n.request(i.methodName,i.args));n.request(s,(i,o)=>{if(i){r(i);return}e(o)})})}const Sl=mt(cl),Bl=mt(ll),El=mt(fl),_l=mt(hl),kl=mt(dl),Al=mt(pl),Il=mt(C()),Ml=Ht($({total:C(),circulating:C(),nonCirculating:C(),nonCirculatingAccounts:X(ce)})),Ii=$({amount:j(),uiAmount:Y(C()),decimals:C(),uiAmountString:at(j())}),Rl=Ht(X($({address:ce,amount:j(),uiAmount:Y(C()),decimals:C(),uiAmountString:at(j())}))),Tl=Ht(X($({pubkey:ce,account:$({executable:je(),owner:ce,lamports:C(),data:rs,rentEpoch:C()})}))),Mi=$({program:j(),parsed:en(),space:C()}),Ll=Ht(X($({pubkey:ce,account:$({executable:je(),owner:ce,lamports:C(),data:Mi,rentEpoch:C()})}))),Cl=Ht(X($({lamports:C(),address:ce}))),Qr=$({executable:je(),owner:ce,lamports:C(),data:rs,rentEpoch:C()}),Ul=$({pubkey:ce,account:Qr}),Fl=rn(ke([Fi(ft.Buffer),Mi]),ke([Qo,Mi]),n=>Array.isArray(n)?Z(n,rs):n),Ri=$({executable:je(),owner:ce,lamports:C(),data:Fl,rentEpoch:C()}),Nl=$({pubkey:ce,account:Ri}),Pl=$({state:ke([Ot("active"),Ot("inactive"),Ot("activating"),Ot("deactivating")]),active:C(),inactive:C()}),Ol=mt(X($({signature:j(),slot:C(),err:Ir,memo:Y(j()),blockTime:at(Y(C()))}))),ql=mt(X($({signature:j(),slot:C(),err:Ir,memo:Y(j()),blockTime:at(Y(C()))}))),Dl=$({subscription:C(),result:Fn(Qr)}),zl=$({pubkey:ce,account:Qr}),$l=$({subscription:C(),result:Fn(zl)}),Hl=$({parent:C(),slot:C(),root:C()}),Kl=$({subscription:C(),result:Hl}),Wl=ke([$({type:ke([Ot("firstShredReceived"),Ot("completed"),Ot("optimisticConfirmation"),Ot("root")]),slot:C(),timestamp:C()}),$({type:Ot("createdBank"),parent:C(),slot:C(),timestamp:C()}),$({type:Ot("frozen"),slot:C(),timestamp:C(),stats:$({numTransactionEntries:C(),numSuccessfulTransactions:C(),numFailedTransactions:C(),maxTransactionsPerEntry:C()})}),$({type:Ot("dead"),slot:C(),timestamp:C(),err:j()})]),Vl=$({subscription:C(),result:Wl}),Gl=$({subscription:C(),result:Fn(ke([gl,ml]))}),jl=$({subscription:C(),result:C()}),Zl=$({pubkey:j(),gossip:Y(j()),tpu:Y(j()),rpc:Y(j()),version:Y(j())}),Os=$({votePubkey:j(),nodePubkey:j(),activatedStake:C(),epochVoteAccount:je(),epochCredits:X(Ni([C(),C(),C()])),commission:C(),lastVote:C(),rootSlot:Y(C())}),Yl=mt($({current:X(Os),delinquent:X(Os)})),Xl=ke([Ot("processed"),Ot("confirmed"),Ot("finalized")]),Jl=$({slot:C(),confirmations:Y(C()),err:Ir,confirmationStatus:at(Xl)}),Ql=Ht(X(Y(Jl))),th=mt(C()),ea=$({accountKey:ce,writableIndexes:X(C()),readonlyIndexes:X(C())}),ns=$({signatures:X(j()),message:$({accountKeys:X(j()),header:$({numRequiredSignatures:C(),numReadonlySignedAccounts:C(),numReadonlyUnsignedAccounts:C()}),instructions:X($({accounts:X(C()),data:j(),programIdIndex:C()})),recentBlockhash:j(),addressTableLookups:at(X(ea))})}),ra=$({pubkey:ce,signer:je(),writable:je(),source:at(ke([Ot("transaction"),Ot("lookupTable")]))}),na=$({accountKeys:X(ra),signatures:X(j())}),ia=$({parsed:en(),program:j(),programId:ce}),sa=$({accounts:X(ce),data:j(),programId:ce}),eh=ke([sa,ia]),rh=ke([$({parsed:en(),program:j(),programId:j()}),$({accounts:X(j()),data:j(),programId:j()})]),oa=rn(eh,rh,n=>"accounts"in n?Z(n,sa):Z(n,ia)),aa=$({signatures:X(j()),message:$({accountKeys:X(ra),instructions:X(oa),recentBlockhash:j(),addressTableLookups:at(Y(X(ea)))})}),En=$({accountIndex:C(),mint:j(),owner:at(j()),uiTokenAmount:Ii}),ca=$({writable:X(ce),readonly:X(ce)}),Nn=$({err:Ir,fee:C(),innerInstructions:at(Y(X($({index:C(),instructions:X($({accounts:X(C()),data:j(),programIdIndex:C()}))})))),preBalances:X(C()),postBalances:X(C()),logMessages:at(Y(X(j()))),preTokenBalances:at(Y(X(En))),postTokenBalances:at(Y(X(En))),loadedAddresses:at(ca),computeUnitsConsumed:at(C())}),is=$({err:Ir,fee:C(),innerInstructions:at(Y(X($({index:C(),instructions:X(oa)})))),preBalances:X(C()),postBalances:X(C()),logMessages:at(Y(X(j()))),preTokenBalances:at(Y(X(En))),postTokenBalances:at(Y(X(En))),loadedAddresses:at(ca),computeUnitsConsumed:at(C())}),Kr=ke([Ot(0),Ot("legacy")]),Mr=$({pubkey:j(),lamports:C(),postBalance:Y(C()),rewardType:Y(j()),commission:at(Y(C()))}),nh=mt(Y($({blockhash:j(),previousBlockhash:j(),parentSlot:C(),transactions:X($({transaction:ns,meta:Y(Nn),version:at(Kr)})),rewards:at(X(Mr)),blockTime:Y(C()),blockHeight:Y(C())}))),ih=mt(Y($({blockhash:j(),previousBlockhash:j(),parentSlot:C(),rewards:at(X(Mr)),blockTime:Y(C()),blockHeight:Y(C())}))),sh=mt(Y($({blockhash:j(),previousBlockhash:j(),parentSlot:C(),transactions:X($({transaction:na,meta:Y(Nn),version:at(Kr)})),rewards:at(X(Mr)),blockTime:Y(C()),blockHeight:Y(C())}))),oh=mt(Y($({blockhash:j(),previousBlockhash:j(),parentSlot:C(),transactions:X($({transaction:aa,meta:Y(is),version:at(Kr)})),rewards:at(X(Mr)),blockTime:Y(C()),blockHeight:Y(C())}))),ah=mt(Y($({blockhash:j(),previousBlockhash:j(),parentSlot:C(),transactions:X($({transaction:na,meta:Y(is),version:at(Kr)})),rewards:at(X(Mr)),blockTime:Y(C()),blockHeight:Y(C())}))),ch=mt(Y($({blockhash:j(),previousBlockhash:j(),parentSlot:C(),rewards:at(X(Mr)),blockTime:Y(C()),blockHeight:Y(C())}))),uh=mt(Y($({blockhash:j(),previousBlockhash:j(),parentSlot:C(),transactions:X($({transaction:ns,meta:Y(Nn)})),rewards:at(X(Mr)),blockTime:Y(C())}))),qs=mt(Y($({blockhash:j(),previousBlockhash:j(),parentSlot:C(),signatures:X(j()),blockTime:Y(C())}))),wi=mt(Y($({slot:C(),meta:Y(Nn),blockTime:at(Y(C())),transaction:ns,version:at(Kr)}))),dn=mt(Y($({slot:C(),transaction:aa,meta:Y(is),blockTime:at(Y(C())),version:at(Kr)}))),fh=Ht($({blockhash:j(),feeCalculator:$({lamportsPerSignature:C()})})),lh=Ht($({blockhash:j(),lastValidBlockHeight:C()})),hh=Ht(je()),dh=$({slot:C(),numTransactions:C(),numSlots:C(),samplePeriodSecs:C()}),ph=mt(X(dh)),gh=Ht(Y($({feeCalculator:$({lamportsPerSignature:C()})}))),mh=mt(j()),yh=mt(j()),wh=$({err:Ir,logs:X(j()),signature:j()}),bh=$({result:Fn(wh),subscription:C()}),vh={"solana-client":"js/0.0.0-development"};class xh{constructor(t,e){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const S={};return async E=>{const{commitment:A,config:P}=Ft(E),M=this._buildArgs([],A,void 0,P),T=Us(M);return S[T]=S[T]??(async()=>{try{const k=await this._rpcRequest("getBlockHeight",M),R=Z(k,mt(C()));if("error"in R)throw new et(R.error,"failed to get block height information");return R.result}finally{delete S[T]}})(),await S[T]}})();let r,s,i,o,c,d;e&&typeof e=="string"?this._commitment=e:e&&(this._commitment=e.commitment,this._confirmTransactionInitialTimeout=e.confirmTransactionInitialTimeout,r=e.wsEndpoint,s=e.httpHeaders,i=e.fetch,o=e.fetchMiddleware,c=e.disableRetryOnRateLimit,d=e.httpAgent),this._rpcEndpoint=ol(t),this._rpcWsEndpoint=r||il(t),this._rpcClient=bl(t,s,i,o,c,d),this._rpcRequest=vl(this._rpcClient),this._rpcBatchRequest=xl(this._rpcClient),this._rpcWebSocket=new tl(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(t,e){const{commitment:r,config:s}=Ft(e),i=this._buildArgs([t.toBase58()],r,void 0,s),o=await this._rpcRequest("getBalance",i),c=Z(o,Ht(C()));if("error"in c)throw new et(c.error,`failed to get balance for ${t.toBase58()}`);return c.result}async getBalance(t,e){return await this.getBalanceAndContext(t,e).then(r=>r.value).catch(r=>{throw new Error("failed to get balance of account "+t.toBase58()+": "+r)})}async getBlockTime(t){const e=await this._rpcRequest("getBlockTime",[t]),r=Z(e,mt(Y(C())));if("error"in r)throw new et(r.error,`failed to get block time for slot ${t}`);return r.result}async getMinimumLedgerSlot(){const t=await this._rpcRequest("minimumLedgerSlot",[]),e=Z(t,mt(C()));if("error"in e)throw new et(e.error,"failed to get minimum ledger slot");return e.result}async getFirstAvailableBlock(){const t=await this._rpcRequest("getFirstAvailableBlock",[]),e=Z(t,Il);if("error"in e)throw new et(e.error,"failed to get first available block");return e.result}async getSupply(t){let e={};typeof t=="string"?e={commitment:t}:t?e={...t,commitment:t&&t.commitment||this.commitment}:e={commitment:this.commitment};const r=await this._rpcRequest("getSupply",[e]),s=Z(r,Ml);if("error"in s)throw new et(s.error,"failed to get supply");return s.result}async getTokenSupply(t,e){const r=this._buildArgs([t.toBase58()],e),s=await this._rpcRequest("getTokenSupply",r),i=Z(s,Ht(Ii));if("error"in i)throw new et(i.error,"failed to get token supply");return i.result}async getTokenAccountBalance(t,e){const r=this._buildArgs([t.toBase58()],e),s=await this._rpcRequest("getTokenAccountBalance",r),i=Z(s,Ht(Ii));if("error"in i)throw new et(i.error,"failed to get token account balance");return i.result}async getTokenAccountsByOwner(t,e,r){const{commitment:s,config:i}=Ft(r);let o=[t.toBase58()];"mint"in e?o.push({mint:e.mint.toBase58()}):o.push({programId:e.programId.toBase58()});const c=this._buildArgs(o,s,"base64",i),d=await this._rpcRequest("getTokenAccountsByOwner",c),S=Z(d,Tl);if("error"in S)throw new et(S.error,`failed to get token accounts owned by account ${t.toBase58()}`);return S.result}async getParsedTokenAccountsByOwner(t,e,r){let s=[t.toBase58()];"mint"in e?s.push({mint:e.mint.toBase58()}):s.push({programId:e.programId.toBase58()});const i=this._buildArgs(s,r,"jsonParsed"),o=await this._rpcRequest("getTokenAccountsByOwner",i),c=Z(o,Ll);if("error"in c)throw new et(c.error,`failed to get token accounts owned by account ${t.toBase58()}`);return c.result}async getLargestAccounts(t){const e={...t,commitment:t&&t.commitment||this.commitment},r=e.filter||e.commitment?[e]:[],s=await this._rpcRequest("getLargestAccounts",r),i=Z(s,Cl);if("error"in i)throw new et(i.error,"failed to get largest accounts");return i.result}async getTokenLargestAccounts(t,e){const r=this._buildArgs([t.toBase58()],e),s=await this._rpcRequest("getTokenLargestAccounts",r),i=Z(s,Rl);if("error"in i)throw new et(i.error,"failed to get token largest accounts");return i.result}async getAccountInfoAndContext(t,e){const{commitment:r,config:s}=Ft(e),i=this._buildArgs([t.toBase58()],r,"base64",s),o=await this._rpcRequest("getAccountInfo",i),c=Z(o,Ht(Y(Qr)));if("error"in c)throw new et(c.error,`failed to get info about account ${t.toBase58()}`);return c.result}async getParsedAccountInfo(t,e){const{commitment:r,config:s}=Ft(e),i=this._buildArgs([t.toBase58()],r,"jsonParsed",s),o=await this._rpcRequest("getAccountInfo",i),c=Z(o,Ht(Y(Ri)));if("error"in c)throw new et(c.error,`failed to get info about account ${t.toBase58()}`);return c.result}async getAccountInfo(t,e){try{return(await this.getAccountInfoAndContext(t,e)).value}catch(r){throw new Error("failed to get info about account "+t.toBase58()+": "+r)}}async getMultipleParsedAccounts(t,e){const{commitment:r,config:s}=Ft(e),i=t.map(S=>S.toBase58()),o=this._buildArgs([i],r,"jsonParsed",s),c=await this._rpcRequest("getMultipleAccounts",o),d=Z(c,Ht(X(Y(Ri))));if("error"in d)throw new et(d.error,`failed to get info for accounts ${i}`);return d.result}async getMultipleAccountsInfoAndContext(t,e){const{commitment:r,config:s}=Ft(e),i=t.map(S=>S.toBase58()),o=this._buildArgs([i],r,"base64",s),c=await this._rpcRequest("getMultipleAccounts",o),d=Z(c,Ht(X(Y(Qr))));if("error"in d)throw new et(d.error,`failed to get info for accounts ${i}`);return d.result}async getMultipleAccountsInfo(t,e){return(await this.getMultipleAccountsInfoAndContext(t,e)).value}async getStakeActivation(t,e,r){const{commitment:s,config:i}=Ft(e),o=this._buildArgs([t.toBase58()],s,void 0,{...i,epoch:r??(i==null?void 0:i.epoch)}),c=await this._rpcRequest("getStakeActivation",o),d=Z(c,mt(Pl));if("error"in d)throw new et(d.error,`failed to get Stake Activation ${t.toBase58()}`);return d.result}async getProgramAccounts(t,e){const{commitment:r,config:s}=Ft(e),{encoding:i,...o}=s||{},c=this._buildArgs([t.toBase58()],r,i||"base64",o),d=await this._rpcRequest("getProgramAccounts",c),S=X(Ul),E=o.withContext===!0?Z(d,Ht(S)):Z(d,mt(S));if("error"in E)throw new et(E.error,`failed to get accounts owned by program ${t.toBase58()}`);return E.result}async getParsedProgramAccounts(t,e){const{commitment:r,config:s}=Ft(e),i=this._buildArgs([t.toBase58()],r,"jsonParsed",s),o=await this._rpcRequest("getProgramAccounts",i),c=Z(o,mt(X(Nl)));if("error"in c)throw new et(c.error,`failed to get accounts owned by program ${t.toBase58()}`);return c.result}async confirmTransaction(t,e){var i;let r;if(typeof t=="string")r=t;else{const o=t;if((i=o.abortSignal)!=null&&i.aborted)return Promise.reject(o.abortSignal.reason);r=o.signature}let s;try{s=me.decode(r)}catch{throw new Error("signature must be base58 encoded: "+r)}return ae(s.length===64,"signature has invalid length"),typeof t=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:e||this.commitment,signature:r}):"lastValidBlockHeight"in t?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e||this.commitment,strategy:t}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:e||this.commitment,strategy:t})}getCancellationPromise(t){return new Promise((e,r)=>{t!=null&&(t.aborted?r(t.reason):t.addEventListener("abort",()=>{r(t.reason)}))})}getTransactionConfirmationPromise({commitment:t,signature:e}){let r,s,i=!1;const o=new Promise((d,S)=>{try{r=this.onSignature(e,(A,P)=>{r=void 0;const M={context:P,value:A};d({__type:fr.PROCESSED,response:M})},t);const E=new Promise(A=>{r==null?A():s=this._onSubscriptionStateChange(r,P=>{P==="subscribed"&&A()})});(async()=>{if(await E,i)return;const A=await this.getSignatureStatus(e);if(i||A==null)return;const{context:P,value:M}=A;if(M!=null)if(M!=null&&M.err)S(M.err);else{switch(t){case"confirmed":case"single":case"singleGossip":{if(M.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(M.confirmationStatus==="processed"||M.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}i=!0,d({__type:fr.PROCESSED,response:{context:P,value:M}})}})()}catch(E){S(E)}});return{abortConfirmation:()=>{s&&(s(),s=void 0),r!=null&&(this.removeSignatureListener(r),r=void 0)},confirmationPromise:o}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t,strategy:{abortSignal:e,lastValidBlockHeight:r,signature:s}}){let i=!1;const o=new Promise(A=>{const P=async()=>{try{return await this.getBlockHeight(t)}catch{return-1}};(async()=>{let M=await P();if(!i){for(;M<=r;)if(await Cr(1e3),i||(M=await P(),i))return;A({__type:fr.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:c,confirmationPromise:d}=this.getTransactionConfirmationPromise({commitment:t,signature:s}),S=this.getCancellationPromise(e);let E;try{const A=await Promise.race([S,d,o]);if(A.__type===fr.PROCESSED)E=A.response;else throw new jo(s)}finally{i=!0,c()}return E}async confirmTransactionUsingDurableNonceStrategy({commitment:t,strategy:{abortSignal:e,minContextSlot:r,nonceAccountPubkey:s,nonceValue:i,signature:o}}){let c=!1;const d=new Promise(M=>{let T=i,k=null;const R=async()=>{try{const{context:F,value:D}=await this.getNonceAndContext(s,{commitment:t,minContextSlot:r});return k=F.slot,D==null?void 0:D.nonce}catch{return T}};(async()=>{if(T=await R(),!c)for(;;){if(i!==T){M({__type:fr.NONCE_INVALID,slotInWhichNonceDidAdvance:k});return}if(await Cr(2e3),c||(T=await R(),c))return}})()}),{abortConfirmation:S,confirmationPromise:E}=this.getTransactionConfirmationPromise({commitment:t,signature:o}),A=this.getCancellationPromise(e);let P;try{const M=await Promise.race([A,E,d]);if(M.__type===fr.PROCESSED)P=M.response;else{let T;for(;;){const k=await this.getSignatureStatus(o);if(k==null)break;if(k.context.slot<(M.slotInWhichNonceDidAdvance??r)){await Cr(400);continue}T=k;break}if(T!=null&&T.value){const k=t||"finalized",{confirmationStatus:R}=T.value;switch(k){case"processed":case"recent":if(R!=="processed"&&R!=="confirmed"&&R!=="finalized")throw new jr(o);break;case"confirmed":case"single":case"singleGossip":if(R!=="confirmed"&&R!=="finalized")throw new jr(o);break;case"finalized":case"max":case"root":if(R!=="finalized")throw new jr(o);break;default:}P={context:T.context,value:{err:T.value.err}}}else throw new jr(o)}}finally{c=!0,S()}return P}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:t,signature:e}){let r;const s=new Promise(d=>{let S=this._confirmTransactionInitialTimeout||6e4;switch(t){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{S=this._confirmTransactionInitialTimeout||3e4;break}}r=setTimeout(()=>d({__type:fr.TIMED_OUT,timeoutMs:S}),S)}),{abortConfirmation:i,confirmationPromise:o}=this.getTransactionConfirmationPromise({commitment:t,signature:e});let c;try{const d=await Promise.race([o,s]);if(d.__type===fr.PROCESSED)c=d.response;else throw new Zo(e,d.timeoutMs/1e3)}finally{clearTimeout(r),i()}return c}async getClusterNodes(){const t=await this._rpcRequest("getClusterNodes",[]),e=Z(t,mt(X(Zl)));if("error"in e)throw new et(e.error,"failed to get cluster nodes");return e.result}async getVoteAccounts(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getVoteAccounts",e),s=Z(r,Yl);if("error"in s)throw new et(s.error,"failed to get vote accounts");return s.result}async getSlot(t){const{commitment:e,config:r}=Ft(t),s=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getSlot",s),o=Z(i,mt(C()));if("error"in o)throw new et(o.error,"failed to get slot");return o.result}async getSlotLeader(t){const{commitment:e,config:r}=Ft(t),s=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getSlotLeader",s),o=Z(i,mt(j()));if("error"in o)throw new et(o.error,"failed to get slot leader");return o.result}async getSlotLeaders(t,e){const r=[t,e],s=await this._rpcRequest("getSlotLeaders",r),i=Z(s,mt(X(ce)));if("error"in i)throw new et(i.error,"failed to get slot leaders");return i.result}async getSignatureStatus(t,e){const{context:r,value:s}=await this.getSignatureStatuses([t],e);ae(s.length===1);const i=s[0];return{context:r,value:i}}async getSignatureStatuses(t,e){const r=[t];e&&r.push(e);const s=await this._rpcRequest("getSignatureStatuses",r),i=Z(s,Ql);if("error"in i)throw new et(i.error,"failed to get signature status");return i.result}async getTransactionCount(t){const{commitment:e,config:r}=Ft(t),s=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getTransactionCount",s),o=Z(i,mt(C()));if("error"in o)throw new et(o.error,"failed to get transaction count");return o.result}async getTotalSupply(t){return(await this.getSupply({commitment:t,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getInflationGovernor",e),s=Z(r,Sl);if("error"in s)throw new et(s.error,"failed to get inflation");return s.result}async getInflationReward(t,e,r){const{commitment:s,config:i}=Ft(r),o=this._buildArgs([t.map(S=>S.toBase58())],s,void 0,{...i,epoch:e??(i==null?void 0:i.epoch)}),c=await this._rpcRequest("getInflationReward",o),d=Z(c,ul);if("error"in d)throw new et(d.error,"failed to get inflation reward");return d.result}async getInflationRate(){const t=await this._rpcRequest("getInflationRate",[]),e=Z(t,Bl);if("error"in e)throw new et(e.error,"failed to get inflation rate");return e.result}async getEpochInfo(t){const{commitment:e,config:r}=Ft(t),s=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getEpochInfo",s),o=Z(i,_l);if("error"in o)throw new et(o.error,"failed to get epoch info");return o.result}async getEpochSchedule(){const t=await this._rpcRequest("getEpochSchedule",[]),e=Z(t,kl);if("error"in e)throw new et(e.error,"failed to get epoch schedule");const r=e.result;return new Jf(r.slotsPerEpoch,r.leaderScheduleSlotOffset,r.warmup,r.firstNormalEpoch,r.firstNormalSlot)}async getLeaderSchedule(){const t=await this._rpcRequest("getLeaderSchedule",[]),e=Z(t,Al);if("error"in e)throw new et(e.error,"failed to get leader schedule");return e.result}async getMinimumBalanceForRentExemption(t,e){const r=this._buildArgs([t],e),s=await this._rpcRequest("getMinimumBalanceForRentExemption",r),i=Z(s,th);return"error"in i?(console.warn("Unable to fetch minimum balance for rent exemption"),0):i.result}async getRecentBlockhashAndContext(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getRecentBlockhash",e),s=Z(r,fh);if("error"in s)throw new et(s.error,"failed to get recent blockhash");return s.result}async getRecentPerformanceSamples(t){const e=await this._rpcRequest("getRecentPerformanceSamples",t?[t]:[]),r=Z(e,ph);if("error"in r)throw new et(r.error,"failed to get recent performance samples");return r.result}async getFeeCalculatorForBlockhash(t,e){const r=this._buildArgs([t],e),s=await this._rpcRequest("getFeeCalculatorForBlockhash",r),i=Z(s,gh);if("error"in i)throw new et(i.error,"failed to get fee calculator");const{context:o,value:c}=i.result;return{context:o,value:c!==null?c.feeCalculator:null}}async getFeeForMessage(t,e){const r=pe(t.serialize()).toString("base64"),s=this._buildArgs([r],e),i=await this._rpcRequest("getFeeForMessage",s),o=Z(i,Ht(Y(C())));if("error"in o)throw new et(o.error,"failed to get fee for message");if(o.result===null)throw new Error("invalid blockhash");return o.result}async getRecentPrioritizationFees(t){var o;const e=(o=t==null?void 0:t.lockedWritableAccounts)==null?void 0:o.map(c=>c.toBase58()),r=e!=null&&e.length?[e]:[],s=await this._rpcRequest("getRecentPrioritizationFees",r),i=Z(s,El);if("error"in i)throw new et(i.error,"failed to get recent prioritization fees");return i.result}async getRecentBlockhash(t){try{return(await this.getRecentBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhash(t){try{return(await this.getLatestBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhashAndContext(t){const{commitment:e,config:r}=Ft(t),s=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getLatestBlockhash",s),o=Z(i,lh);if("error"in o)throw new et(o.error,"failed to get latest blockhash");return o.result}async isBlockhashValid(t,e){const{commitment:r,config:s}=Ft(e),i=this._buildArgs([t],r,void 0,s),o=await this._rpcRequest("isBlockhashValid",i),c=Z(o,hh);if("error"in c)throw new et(c.error,"failed to determine if the blockhash `"+t+"`is valid");return c.result}async getVersion(){const t=await this._rpcRequest("getVersion",[]),e=Z(t,mt(yl));if("error"in e)throw new et(e.error,"failed to get version");return e.result}async getGenesisHash(){const t=await this._rpcRequest("getGenesisHash",[]),e=Z(t,mt(j()));if("error"in e)throw new et(e.error,"failed to get genesis hash");return e.result}async getBlock(t,e){const{commitment:r,config:s}=Ft(e),i=this._buildArgsAtLeastConfirmed([t],r,void 0,s),o=await this._rpcRequest("getBlock",i);try{switch(s==null?void 0:s.transactionDetails){case"accounts":{const c=Z(o,sh);if("error"in c)throw c.error;return c.result}case"none":{const c=Z(o,ih);if("error"in c)throw c.error;return c.result}default:{const c=Z(o,nh);if("error"in c)throw c.error;const{result:d}=c;return d?{...d,transactions:d.transactions.map(({transaction:S,meta:E,version:A})=>({meta:E,transaction:{...S,message:yi(A,S.message)},version:A}))}:null}}}catch(c){throw new et(c,"failed to get confirmed block")}}async getParsedBlock(t,e){const{commitment:r,config:s}=Ft(e),i=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed",s),o=await this._rpcRequest("getBlock",i);try{switch(s==null?void 0:s.transactionDetails){case"accounts":{const c=Z(o,ah);if("error"in c)throw c.error;return c.result}case"none":{const c=Z(o,ch);if("error"in c)throw c.error;return c.result}default:{const c=Z(o,oh);if("error"in c)throw c.error;return c.result}}}catch(c){throw new et(c,"failed to get block")}}async getBlockProduction(t){let e,r;if(typeof t=="string")r=t;else if(t){const{commitment:c,...d}=t;r=c,e=d}const s=this._buildArgs([],r,"base64",e),i=await this._rpcRequest("getBlockProduction",s),o=Z(i,wl);if("error"in o)throw new et(o.error,"failed to get block production information");return o.result}async getTransaction(t,e){const{commitment:r,config:s}=Ft(e),i=this._buildArgsAtLeastConfirmed([t],r,void 0,s),o=await this._rpcRequest("getTransaction",i),c=Z(o,wi);if("error"in c)throw new et(c.error,"failed to get transaction");const d=c.result;return d&&{...d,transaction:{...d.transaction,message:yi(d.version,d.transaction.message)}}}async getParsedTransaction(t,e){const{commitment:r,config:s}=Ft(e),i=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed",s),o=await this._rpcRequest("getTransaction",i),c=Z(o,dn);if("error"in c)throw new et(c.error,"failed to get transaction");return c.result}async getParsedTransactions(t,e){const{commitment:r,config:s}=Ft(e),i=t.map(d=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([d],r,"jsonParsed",s)}));return(await this._rpcBatchRequest(i)).map(d=>{const S=Z(d,dn);if("error"in S)throw new et(S.error,"failed to get transactions");return S.result})}async getTransactions(t,e){const{commitment:r,config:s}=Ft(e),i=t.map(d=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([d],r,void 0,s)}));return(await this._rpcBatchRequest(i)).map(d=>{const S=Z(d,wi);if("error"in S)throw new et(S.error,"failed to get transactions");const E=S.result;return E&&{...E,transaction:{...E.transaction,message:yi(E.version,E.transaction.message)}}})}async getConfirmedBlock(t,e){const r=this._buildArgsAtLeastConfirmed([t],e),s=await this._rpcRequest("getConfirmedBlock",r),i=Z(s,uh);if("error"in i)throw new et(i.error,"failed to get confirmed block");const o=i.result;if(!o)throw new Error("Confirmed block "+t+" not found");const c={...o,transactions:o.transactions.map(({transaction:d,meta:S})=>{const E=new pr(d.message);return{meta:S,transaction:{...d,message:E}}})};return{...c,transactions:c.transactions.map(({transaction:d,meta:S})=>({meta:S,transaction:Ge.populate(d.message,d.signatures)}))}}async getBlocks(t,e,r){const s=this._buildArgsAtLeastConfirmed(e!==void 0?[t,e]:[t],r),i=await this._rpcRequest("getBlocks",s),o=Z(i,mt(X(C())));if("error"in o)throw new et(o.error,"failed to get blocks");return o.result}async getBlockSignatures(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getBlock",r),i=Z(s,qs);if("error"in i)throw new et(i.error,"failed to get block");const o=i.result;if(!o)throw new Error("Block "+t+" not found");return o}async getConfirmedBlockSignatures(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getConfirmedBlock",r),i=Z(s,qs);if("error"in i)throw new et(i.error,"failed to get confirmed block");const o=i.result;if(!o)throw new Error("Confirmed block "+t+" not found");return o}async getConfirmedTransaction(t,e){const r=this._buildArgsAtLeastConfirmed([t],e),s=await this._rpcRequest("getConfirmedTransaction",r),i=Z(s,wi);if("error"in i)throw new et(i.error,"failed to get transaction");const o=i.result;if(!o)return o;const c=new pr(o.transaction.message),d=o.transaction.signatures;return{...o,transaction:Ge.populate(c,d)}}async getParsedConfirmedTransaction(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,"jsonParsed"),s=await this._rpcRequest("getConfirmedTransaction",r),i=Z(s,dn);if("error"in i)throw new et(i.error,"failed to get confirmed transaction");return i.result}async getParsedConfirmedTransactions(t,e){const r=t.map(o=>({methodName:"getConfirmedTransaction",args:this._buildArgsAtLeastConfirmed([o],e,"jsonParsed")}));return(await this._rpcBatchRequest(r)).map(o=>{const c=Z(o,dn);if("error"in c)throw new et(c.error,"failed to get confirmed transactions");return c.result})}async getConfirmedSignaturesForAddress(t,e,r){let s={},i=await this.getFirstAvailableBlock();for(;!("until"in s)&&(e--,!(e<=0||e<i));)try{const d=await this.getConfirmedBlockSignatures(e,"finalized");d.signatures.length>0&&(s.until=d.signatures[d.signatures.length-1].toString())}catch(d){if(d instanceof Error&&d.message.includes("skipped"))continue;throw d}let o=await this.getSlot("finalized");for(;!("before"in s)&&(r++,!(r>o));)try{const d=await this.getConfirmedBlockSignatures(r);d.signatures.length>0&&(s.before=d.signatures[d.signatures.length-1].toString())}catch(d){if(d instanceof Error&&d.message.includes("skipped"))continue;throw d}return(await this.getConfirmedSignaturesForAddress2(t,s)).map(d=>d.signature)}async getConfirmedSignaturesForAddress2(t,e,r){const s=this._buildArgsAtLeastConfirmed([t.toBase58()],r,void 0,e),i=await this._rpcRequest("getConfirmedSignaturesForAddress2",s),o=Z(i,Ol);if("error"in o)throw new et(o.error,"failed to get confirmed signatures for address");return o.result}async getSignaturesForAddress(t,e,r){const s=this._buildArgsAtLeastConfirmed([t.toBase58()],r,void 0,e),i=await this._rpcRequest("getSignaturesForAddress",s),o=Z(i,ql);if("error"in o)throw new et(o.error,"failed to get signatures for address");return o.result}async getAddressLookupTable(t,e){const{context:r,value:s}=await this.getAccountInfoAndContext(t,e);let i=null;return s!==null&&(i=new Ns({key:t,state:Ns.deserialize(s.data)})),{context:r,value:i}}async getNonceAndContext(t,e){const{context:r,value:s}=await this.getAccountInfoAndContext(t,e);let i=null;return s!==null&&(i=es.fromAccountData(s.data)),{context:r,value:i}}async getNonce(t,e){return await this.getNonceAndContext(t,e).then(r=>r.value).catch(r=>{throw new Error("failed to get nonce for account "+t.toBase58()+": "+r)})}async requestAirdrop(t,e){const r=await this._rpcRequest("requestAirdrop",[t.toBase58(),e]),s=Z(r,mh);if("error"in s)throw new et(s.error,`airdrop to ${t.toBase58()} failed`);return s.result}async _blockhashWithExpiryBlockHeight(t){if(!t){for(;this._pollingBlockhash;)await Cr(100);const r=Date.now()-this._blockhashInfo.lastFetch>=sl;if(this._blockhashInfo.latestBlockhash!==null&&!r)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const t=Date.now(),e=this._blockhashInfo.latestBlockhash,r=e?e.blockhash:null;for(let s=0;s<50;s++){const i=await this.getLatestBlockhash("finalized");if(r!==i.blockhash)return this._blockhashInfo={latestBlockhash:i,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},i;await Cr(Hf/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-t}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(t){const{commitment:e,config:r}=Ft(t),s=this._buildArgs([],e,"base64",r),i=await this._rpcRequest("getStakeMinimumDelegation",s),o=Z(i,Ht(C()));if("error"in o)throw new et(o.error,"failed to get stake minimum delegation");return o.result}async simulateTransaction(t,e,r){if("message"in t){const k=t.serialize(),R=ft.Buffer.from(k).toString("base64");if(Array.isArray(e)||r!==void 0)throw new Error("Invalid arguments");const F=e||{};F.encoding="base64","commitment"in F||(F.commitment=this.commitment);const D=[R,F],O=await this._rpcRequest("simulateTransaction",D),W=Z(O,Ps);if("error"in W)throw new Error("failed to simulate transaction: "+W.error.message);return W.result}let s;if(t instanceof Ge){let T=t;s=new Ge,s.feePayer=T.feePayer,s.instructions=t.instructions,s.nonceInfo=T.nonceInfo,s.signatures=T.signatures}else s=Ge.populate(t),s._message=s._json=void 0;if(e!==void 0&&!Array.isArray(e))throw new Error("Invalid arguments");const i=e;if(s.nonceInfo&&i)s.sign(...i);else{let T=this._disableBlockhashCaching;for(;;){const k=await this._blockhashWithExpiryBlockHeight(T);if(s.lastValidBlockHeight=k.lastValidBlockHeight,s.recentBlockhash=k.blockhash,!i)break;if(s.sign(...i),!s.signature)throw new Error("!signature");const R=s.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(R)&&!this._blockhashInfo.transactionSignatures.includes(R)){this._blockhashInfo.simulatedSignatures.push(R);break}else T=!0}}const o=s._compile(),c=o.serialize(),S=s._serialize(c).toString("base64"),E={encoding:"base64",commitment:this.commitment};if(r){const T=(Array.isArray(r)?r:o.nonProgramIds()).map(k=>k.toBase58());E.accounts={encoding:"base64",addresses:T}}i&&(E.sigVerify=!0);const A=[S,E],P=await this._rpcRequest("simulateTransaction",A),M=Z(P,Ps);if("error"in M){let T;if("data"in M.error&&(T=M.error.data.logs,T&&Array.isArray(T))){const k=`
    `,R=k+T.join(k);console.error(M.error.message,R)}throw new Ls({action:"simulate",signature:"",transactionMessage:M.error.message,logs:T})}return M.result}async sendTransaction(t,e,r){if("version"in t){if(e&&Array.isArray(e))throw new Error("Invalid arguments");const o=t.serialize();return await this.sendRawTransaction(o,e)}if(e===void 0||!Array.isArray(e))throw new Error("Invalid arguments");const s=e;if(t.nonceInfo)t.sign(...s);else{let o=this._disableBlockhashCaching;for(;;){const c=await this._blockhashWithExpiryBlockHeight(o);if(t.lastValidBlockHeight=c.lastValidBlockHeight,t.recentBlockhash=c.blockhash,t.sign(...s),!t.signature)throw new Error("!signature");const d=t.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(d))o=!0;else{this._blockhashInfo.transactionSignatures.push(d);break}}}const i=t.serialize();return await this.sendRawTransaction(i,r)}async sendRawTransaction(t,e){const r=pe(t).toString("base64");return await this.sendEncodedTransaction(r,e)}async sendEncodedTransaction(t,e){const r={encoding:"base64"},s=e&&e.skipPreflight,i=s===!0?"processed":e&&e.preflightCommitment||this.commitment;e&&e.maxRetries!=null&&(r.maxRetries=e.maxRetries),e&&e.minContextSlot!=null&&(r.minContextSlot=e.minContextSlot),s&&(r.skipPreflight=s),i&&(r.preflightCommitment=i);const o=[t,r],c=await this._rpcRequest("sendTransaction",o),d=Z(c,yh);if("error"in d){let S;throw"data"in d.error&&(S=d.error.data.logs),new Ls({action:s?"send":"simulate",signature:"",transactionMessage:d.error.message,logs:S})}return d.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(t){this._rpcWebSocketConnected=!1,console.error("ws error:",t.message)}_wsOnClose(t){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),t===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([e,r])=>{this._setSubscription(e,{...r,state:"pending"})})}_setSubscription(t,e){var s;const r=(s=this._subscriptionsByHash[t])==null?void 0:s.state;if(this._subscriptionsByHash[t]=e,r!==e.state){const i=this._subscriptionStateChangeCallbacksByHash[t];i&&i.forEach(o=>{try{o(e.state)}catch{}})}}_onSubscriptionStateChange(t,e){var i;const r=this._subscriptionHashByClientSubscriptionId[t];if(r==null)return()=>{};const s=(i=this._subscriptionStateChangeCallbacksByHash)[r]||(i[r]=new Set);return s.add(e),()=>{s.delete(e),s.size===0&&delete this._subscriptionStateChangeCallbacksByHash[r]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(r){r instanceof Error&&console.log(`Error when closing socket connection: ${r.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const t=this._rpcWebSocketGeneration,e=()=>t===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async r=>{const s=this._subscriptionsByHash[r];if(s!==void 0)switch(s.state){case"pending":case"unsubscribed":if(s.callbacks.size===0){delete this._subscriptionsByHash[r],s.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[s.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:i,method:o}=s;try{this._setSubscription(r,{...s,state:"subscribing"});const c=await this._rpcWebSocket.call(o,i);this._setSubscription(r,{...s,serverSubscriptionId:c,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[c]=s.callbacks,await this._updateSubscriptions()}catch(c){if(c instanceof Error&&console.error(`${o} error for argument`,i,c.message),!e())return;this._setSubscription(r,{...s,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":s.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:i,unsubscribeMethod:o}=s;if(this._subscriptionsAutoDisposedByRpc.has(i))this._subscriptionsAutoDisposedByRpc.delete(i);else{this._setSubscription(r,{...s,state:"unsubscribing"}),this._setSubscription(r,{...s,state:"unsubscribing"});try{await this._rpcWebSocket.call(o,[i])}catch(c){if(c instanceof Error&&console.error(`${o} error:`,c.message),!e())return;this._setSubscription(r,{...s,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(r,{...s,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(t,e){const r=this._subscriptionCallbacksByServerSubscriptionId[t];r!==void 0&&r.forEach(s=>{try{s(...e)}catch(i){console.error(i)}})}_wsOnAccountNotification(t){const{result:e,subscription:r}=Z(t,Dl);this._handleServerNotification(r,[e.value,e.context])}_makeSubscription(t,e){const r=this._nextClientSubscriptionId++,s=Us([t.method,e]),i=this._subscriptionsByHash[s];return i===void 0?this._subscriptionsByHash[s]={...t,args:e,callbacks:new Set([t.callback]),state:"pending"}:i.callbacks.add(t.callback),this._subscriptionHashByClientSubscriptionId[r]=s,this._subscriptionDisposeFunctionsByClientSubscriptionId[r]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[r],delete this._subscriptionHashByClientSubscriptionId[r];const o=this._subscriptionsByHash[s];ae(o!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${r}`),o.callbacks.delete(t.callback),await this._updateSubscriptions()},this._updateSubscriptions(),r}onAccountChange(t,e,r){const s=this._buildArgs([t.toBase58()],r||this._commitment||"finalized","base64");return this._makeSubscription({callback:e,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},s)}async removeAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"account change")}_wsOnProgramAccountNotification(t){const{result:e,subscription:r}=Z(t,$l);this._handleServerNotification(r,[{accountId:e.value.pubkey,accountInfo:e.value.account},e.context])}onProgramAccountChange(t,e,r,s){const i=this._buildArgs([t.toBase58()],r||this._commitment||"finalized","base64",s?{filters:s}:void 0);return this._makeSubscription({callback:e,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},i)}async removeProgramAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"program account change")}onLogs(t,e,r){const s=this._buildArgs([typeof t=="object"?{mentions:[t.toString()]}:t],r||this._commitment||"finalized");return this._makeSubscription({callback:e,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},s)}async removeOnLogsListener(t){await this._unsubscribeClientSubscription(t,"logs")}_wsOnLogsNotification(t){const{result:e,subscription:r}=Z(t,bh);this._handleServerNotification(r,[e.value,e.context])}_wsOnSlotNotification(t){const{result:e,subscription:r}=Z(t,Kl);this._handleServerNotification(r,[e])}onSlotChange(t){return this._makeSubscription({callback:t,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(t){await this._unsubscribeClientSubscription(t,"slot change")}_wsOnSlotUpdatesNotification(t){const{result:e,subscription:r}=Z(t,Vl);this._handleServerNotification(r,[e])}onSlotUpdate(t){return this._makeSubscription({callback:t,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(t){await this._unsubscribeClientSubscription(t,"slot update")}async _unsubscribeClientSubscription(t,e){const r=this._subscriptionDisposeFunctionsByClientSubscriptionId[t];r?await r():console.warn(`Ignored unsubscribe request because an active subscription with id \`${t}\` for '${e}' events could not be found.`)}_buildArgs(t,e,r,s){const i=e||this._commitment;if(i||r||s){let o={};r&&(o.encoding=r),i&&(o.commitment=i),s&&(o=Object.assign(o,s)),t.push(o)}return t}_buildArgsAtLeastConfirmed(t,e,r,s){const i=e||this._commitment;if(i&&!["confirmed","finalized"].includes(i))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(t,e,r,s)}_wsOnSignatureNotification(t){const{result:e,subscription:r}=Z(t,Gl);e.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(r),this._handleServerNotification(r,e.value==="receivedSignature"?[{type:"received"},e.context]:[{type:"status",result:e.value},e.context])}onSignature(t,e,r){const s=this._buildArgs([t],r||this._commitment||"finalized"),i=this._makeSubscription({callback:(o,c)=>{if(o.type==="status"){e(o.result,c);try{this.removeSignatureListener(i)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},s);return i}onSignatureWithOptions(t,e,r){const{commitment:s,...i}={...r,commitment:r&&r.commitment||this._commitment||"finalized"},o=this._buildArgs([t],s,void 0,i),c=this._makeSubscription({callback:(d,S)=>{e(d,S);try{this.removeSignatureListener(c)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},o);return c}async removeSignatureListener(t){await this._unsubscribeClientSubscription(t,"signature result")}_wsOnRootNotification(t){const{result:e,subscription:r}=Z(t,jl);this._handleServerNotification(r,[e])}onRootChange(t){return this._makeSubscription({callback:t,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(t){await this._unsubscribeClientSubscription(t,"root change")}}Object.freeze({CreateLookupTable:{index:0,layout:tt([nt("instruction"),Dr("recentSlot"),Et("bumpSeed")])},FreezeLookupTable:{index:1,layout:tt([nt("instruction")])},ExtendLookupTable:{index:2,layout:tt([nt("instruction"),Dr(),Be(bt(),Sr(nt(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:tt([nt("instruction")])},CloseLookupTable:{index:4,layout:tt([nt("instruction")])}});new st("AddressLookupTab1e1111111111111111111111111");Object.freeze({RequestUnits:{index:0,layout:tt([Et("instruction"),nt("units"),nt("additionalFee")])},RequestHeapFrame:{index:1,layout:tt([Et("instruction"),nt("bytes")])},SetComputeUnitLimit:{index:2,layout:tt([Et("instruction"),nt("units")])},SetComputeUnitPrice:{index:3,layout:tt([Et("instruction"),Dr("microLamports")])}});new st("ComputeBudget111111111111111111111111111111");tt([Et("numSignatures"),Et("padding"),Ue("signatureOffset"),Ue("signatureInstructionIndex"),Ue("publicKeyOffset"),Ue("publicKeyInstructionIndex"),Ue("messageDataOffset"),Ue("messageDataSize"),Ue("messageInstructionIndex")]);new st("Ed25519SigVerify111111111111111111111111111");ts.utils.isValidPrivateKey;ts.getPublicKey;tt([Et("numSignatures"),Ue("signatureOffset"),Et("signatureInstructionIndex"),Ue("ethAddressOffset"),Et("ethAddressInstructionIndex"),Ue("messageDataOffset"),Ue("messageDataSize"),Et("messageInstructionIndex"),$t(20,"ethAddress"),$t(64,"signature"),Et("recoveryId")]);new st("KeccakSecp256k11111111111111111111111111111");var ua;new st("StakeConfig11111111111111111111111111111111");class fa{constructor(t,e,r){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=t,this.epoch=e,this.custodian=r}}ua=fa;fa.default=new ua(0,0,st.default);Object.freeze({Initialize:{index:0,layout:tt([nt("instruction"),Ff(),Nf()])},Authorize:{index:1,layout:tt([nt("instruction"),bt("newAuthorized"),nt("stakeAuthorizationType")])},Delegate:{index:2,layout:tt([nt("instruction")])},Split:{index:3,layout:tt([nt("instruction"),Ie("lamports")])},Withdraw:{index:4,layout:tt([nt("instruction"),Ie("lamports")])},Deactivate:{index:5,layout:tt([nt("instruction")])},Merge:{index:7,layout:tt([nt("instruction")])},AuthorizeWithSeed:{index:8,layout:tt([nt("instruction"),bt("newAuthorized"),nt("stakeAuthorizationType"),Ur("authoritySeed"),bt("authorityOwner")])}});new st("Stake11111111111111111111111111111111111111");Object.freeze({InitializeAccount:{index:0,layout:tt([nt("instruction"),Pf()])},Authorize:{index:1,layout:tt([nt("instruction"),bt("newAuthorized"),nt("voteAuthorizationType")])},Withdraw:{index:3,layout:tt([nt("instruction"),Ie("lamports")])},UpdateValidatorIdentity:{index:4,layout:tt([nt("instruction")])},AuthorizeWithSeed:{index:10,layout:tt([nt("instruction"),Of()])}});new st("Vote111111111111111111111111111111111111111");new st("Va1idator1nfo111111111111111111111111111111");$({name:j(),website:at(j()),details:at(j()),keybaseUsername:at(j())});new st("Vote111111111111111111111111111111111111111");tt([bt("nodePubkey"),bt("authorizedWithdrawer"),Et("commission"),de(),Be(tt([de("slot"),nt("confirmationCount")]),Sr(nt(),-8),"votes"),Et("rootSlotValid"),de("rootSlot"),de(),Be(tt([de("epoch"),bt("authorizedVoter")]),Sr(nt(),-8),"authorizedVoters"),tt([Be(tt([bt("authorizedPubkey"),de("epochOfLastAuthorizedSwitch"),de("targetEpoch")]),32,"buf"),de("idx"),Et("isEmpty")],"priorVoters"),de(),Be(tt([de("epoch"),de("credits"),de("prevCredits")]),Sr(nt(),-8),"epochCredits"),tt([de("slot"),de("timestamp")],"lastTimestamp")]);const Ds=1e9;window.Buffer=ft.Buffer;const Gr={network:"",connection:{},formatBalance(n){return n=n/Ds,Number(n.toFixed(5))},toLamports(n){return n*Ds},getNetwork(){return this.network},setNetwork(n){this.network=n},setConnection(n){this.setNetwork(n),this.connection=new xh(n,"confirmed")},getConnection(){return this.connection},getBalance(n){const t=this.getConnection(),e=new st(n);return t.getBalance(e)},deposit(n,t,e,r,s){const i=this.getConnection(),o=new st(n),c=new st(t),d=new Ge({feePayer:o});return e=this.toLamports(e),d.add(Jr.transfer({fromPubkey:o,toPubkey:c,lamports:e})),(async()=>{const E=await i.getLatestBlockhash("finalized");d.recentBlockhash=E.blockhash;const P=await r.getBrowserProvider().signTransaction(d),M=await i.sendRawTransaction(P.serialize());if(!M)throw"transaction was not sent";return s&&s(),M})()}},Sh={key:0},Bh={key:0,class:"tw-mb-2"},Eh={key:0},_h={class:"tw-my-4 tw-flex tw-items-center tw-justify-between"},kh={class:"tw-flex tw-justify-center"},Ah={key:1},Ih=["href"],_d=xa({__name:"DepositSolanaPhantom",props:{provider:{}},setup(n){const t=n,e=Sa(),r=Ba(),s=Ea(),{getWeb3AuthProviders:i}=_a(e),{actualizeUserData:o}=r,{setTransacitonsModalTab:c}=s,d=Je({amount:0}),S=Je(!0),E=Je(!1),A=Je(!1),P=Je(0),M=Je(0),T=Je(null),k=Je(""),R=Je(Number(t.provider.extra.time_to_commit||60));let F={},D={},O={},W;const q=pn(()=>{var B;return((B=t.provider.extra)==null?void 0:B.main_currency)||""}),z=pn(()=>d.value.amount&&A.value&&T.value),K=pn(()=>{var B;return((B=t.provider.extra)==null?void 0:B.address)||""}),J=()=>{W=window.setInterval(()=>{R.value<=0?(R.value=0,clearInterval(W)):--R.value},1e3)},vt=async()=>{try{return E.value=!0,await dt(),P.value?A.value?(E.value=!1,{isWaitingResponse:!0,extraData:{to:K.value,checker:t.provider.extra.checker,currency:t.provider.extra.currency,mainCurrency:t.provider.extra.main_currency}}):(E.value=!1,{error:"Phantom is not connected."}):(E.value=!1,{error:"Insufficient balance."})}catch(B){return console.error("Solana onBeforeSubmit method",B),{error:String(B)}}},dt=async()=>{try{k.value=await O.connect();const B=await Gr.getBalance(k.value||"");A.value=!0,P.value=Gr.formatBalance(B)}catch(B){throw console.error("Solana connecting",B),B}},Q=(B,a)=>{T.value=B.payment_id,M.value=B.main_amount,F=a,J()},xt=async()=>{E.value=!0,clearInterval(W);try{const B=()=>{console.log("callback onWebHook")},h={txid:await Gr.deposit(k.value||"",K.value,M.value,O,B),from:k.value,to:K.value,payment_id:T.value,lamports:Gr.toLamports(M.value),main_amount:Number(M.value),currency:t.provider.extra.currency,initial_data:F};await La(t.provider.extra.webhook,{data:h},"$tY9XHdytjV"),await o(),c("payment"),T.value=null,E.value=!1}catch(B){console.log(B),E.value=!1}};return ka(()=>{D=i.value.phantom||null,O=new Ta,Gr.setConnection(t.provider.extra.network_url),S.value=!1}),Aa(()=>{O!=null&&O.hasUserApp()&&O.disconnect(),clearInterval(W)}),(B,a)=>{const h=da,g=ga,v=pa,y=ma;return Wr(),Ia(g,{loading:Dt(S)},{default:ri(()=>{var w,_;return[(w=Dt(O))!=null&&w.hasUserApp()?(Wr(),on("div",Sh,[an(v,{"filed-values":Dt(d),provider:B.provider,"is-form-valid":!0,"is-need-note":!1,"is-submitted":!(Dt(T)||Dt(E)),"on-before-submit":vt,onOnResponse:Q},{default:ri(()=>[an(g,{loading:Dt(E)},{default:ri(()=>[Dt(A)?(Wr(),on("div",Bh,sr(B.$t("available"))+" ("+sr(Dt(q))+"): "+sr(Dt(P)),1)):ds("",!0),an(h,{amount:Dt(d).amount,"onUpdate:amount":a[0]||(a[0]=m=>Dt(d).amount=m),"min-limit":B.provider.min_limit,"max-limit":B.provider.max_limit,"is-required":""},null,8,["amount","min-limit","max-limit"])]),_:1},8,["loading"])]),_:1},8,["filed-values","provider","is-submitted"]),Dt(z)&&!Dt(E)?(Wr(),on("div",Eh,[gr("div",_h,[gr("div",null,[ps(sr(B.$t("click_approve"))+": ",1),gr("span",{class:Ma(["tw-font-bold",{"tw-text-utility-orange":Dt(R)>=10&&Dt(R)<20,"tw-text-text-error-primary":Dt(R)>=0&&Dt(R)<10}])},sr(Dt(R)),3)]),gr("div",null,[gr("span",null,sr(Dt(M))+" ("+sr(Dt(q))+")",1)])]),gr("div",kh,[an(y,{"label-key":"approve",class:"tw-w-full","is-disabled":Dt(R)===0,onClick:xt},null,8,["is-disabled"])])])):ds("",!0)])):(Wr(),on("div",Ah,[ps(sr(B.$t("you_have_to_install"))+" ",1),gr("a",{target:"_blank",href:(_=Dt(D))==null?void 0:_.url,class:"tw-text-text-brand"},"Phantom",8,Ih)]))]}),_:1},8,["loading"])}}});export{_d as default};
