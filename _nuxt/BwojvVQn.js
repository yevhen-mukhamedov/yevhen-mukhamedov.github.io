import{_ as H}from"./CXUEa_s4.js";import{d as W,a0 as m,w as q,k as P,o as d,c as y,e as o,t as i,B as g,C as _,f as C,b as M,b2 as z,g as r,i as B,h as G,ah as K,s as E,j as X,H as I,Q as Y,a1 as Z,aE as x,T as ee,ak as se,A as te,x as oe,y as ne,_ as ae}from"./7PQ9d4dP.js";import{_ as le}from"./DqC-nx6a.js";import{_ as re}from"./UCCBr-NG.js";import"./BQWyzQZp.js";import"./D0WEjs_T.js";import"./DD170oM2.js";const ie=["id"],ue={class:"question-block-question"},de={key:0,class:"question-block-ask"},ce={class:"question-block-answer"},pe={key:0},me=W({__name:"QuestionBlock",props:{listQuestions:{},answer:{},onlyRead:{type:Boolean},formSubmited:{type:Boolean}},emits:["update:answer","check-form"],setup(p,{emit:v}){const c=p,k=v,f=m(!0);return q(()=>c.answer.question,()=>{Object.keys(c.answer.question).length&&(f.value=!1),k("update:answer",{...c.answer,accepted:!1,answer:null})}),P(()=>{c.onlyRead===!0&&(f.value=!1)}),(s,u)=>{const S=H,h=G,$=le;return s.answer.show?(d(),y("div",{key:0,id:`question-block-${s.answer.id}`,class:"questions-block-container"},[o("div",ue,[s.onlyRead?(d(),y("div",de,i(s.answer.question!=null?s.answer.question.answer:""),1)):(d(),g(S,{key:1,modelValue:s.answer.question,"onUpdate:modelValue":u[0]||(u[0]=l=>s.answer.question=l),"item-list":s.listQuestions,class:"tw-mb-4","default-option":"Select questions ..."},{"selected-option":_(({props:l})=>[C(i(l.text??"Select questions ..."),1)]),option:_(({props:l})=>[C(i(l.text),1)]),_:1},8,["modelValue","item-list"]))]),o("div",ce,[M($,{modelValue:s.answer.answer,"onUpdate:modelValue":u[1]||(u[1]=l=>s.answer.answer=l),"is-disabled":r(f),"placeholder-text":`${s.$t("write_your_answer")} ${s.answer.id}`,"is-required":"",onInput:u[2]||(u[2]=l=>s.$emit("check-form"))},z({_:2},[s.answer.accepted?{name:"rightIcon",fn:_(()=>[M(h,{color:"--green",name:"done-1"})]),key:"0"}:void 0]),1032,["modelValue","is-disabled","placeholder-text"]),!s.answer.answer&&s.formSubmited?(d(),y("div",pe,i(s.$t("field_required")),1)):B("",!0)])],8,ie)):B("",!0)}}}),O=p=>(oe("data-v-4552a66a"),p=p(),ne(),p),fe={class:"question-modal-title"},we={class:"question-modal-body"},_e={class:"question-modal-warning"},ve={class:"tw-flex tw-flex-col tw-gap-4"},he={class:"question-modal-warning"},be={class:"tw-mb-1 tw-font-bold tw-text-text-brand"},qe=O(()=>o("br",null,null,-1)),ye=O(()=>o("br",null,null,-1)),ge=W({__name:"WalletQuestionModal",setup(p){const v=[{id:1,answer:null,question:null,error:!1,show:!0,accepted:!1},{id:2,answer:null,question:null,error:!1,show:!1,accepted:!1},{id:3,answer:null,question:null,error:!1,show:!1,accepted:!1}],c=K(),{getQuestions:k,setQuestions:f,setQuestionsModal:s,setWalletModal:u,setWalletModalTab:S}=c,{showQuestionModal:h}=E(c),$=X(),{isDesktop:l,isMobile:R}=E($),a=m(JSON.parse(JSON.stringify(v))),Q=m([]),V=m([]),b=m(!1),w=m(!1),A=I(()=>a.value.map(e=>e.question)),T=I(()=>a.value.map(e=>e.answer)),J=I(()=>a.value.every(e=>e.accepted)),D=e=>{if(w.value)return a.value.every(t=>t.answer)?(b.value=!1,!0):(b.value=!0,!1)},F=async()=>{try{const{data:e}=await k();Q.value=e||[],V.value=e||[]}catch{console.log("some is wrong")}},j=async()=>{const e={questions:[]};w.value=!0;let t=null;if(a.value.forEach(n=>{!n.answer||!n.question?(n.error=!0,t=!0):e.questions.push({id:n.question.id,answer:n.answer})}),t!=null)return b.value=!0,!1;s(!1);try{await f(e),s(!1),u(),S(se.deposit),w.value=!1}catch{w.value=!1,console.log("some is wrong")}};return q(()=>T.value,Y(()=>{T.value.forEach((e,t)=>{e!=null&&e.trim().length?a.value[t].accepted=!0:a.value[t].accepted=!1,e!=null&&e.trim().length&&typeof a.value[t+1]<"u"&&(a.value[t+1].show=!0)})},1e3)),q(()=>A.value,e=>{const t=[];e.forEach(n=>{n!=null&&t.push(n.id)}),Q.value=V.value.filter(function(n){return!t.includes(n.id)})}),q(()=>h.value,e=>{e&&(a.value=JSON.parse(JSON.stringify(v)),F())},{immediate:!0}),(e,t)=>{const n=me,L=te,U=re;return d(),g(ee,{to:"#globalModal"},[r(h)?(d(),g(U,{key:0,class:"question-modal","modal-max-width":r(l)?"512px":"unset","fullscreen-mode":r(R),onClose:t[1]||(t[1]=N=>r(s)(!1))},{title:_(()=>[o("div",fe,[o("p",null,i(e.$t("secret_questions")),1)])]),content:_(()=>[o("div",we,[o("div",_e,i(e.$t("secret_questions_description")),1),o("div",ve,[(d(!0),y(Z,null,x(r(a),N=>(d(),g(n,{key:N.id,answer:N,"list-questions":r(Q),"only-read":!1,"form-submited":r(w),onCheckForm:t[0]||(t[0]=ke=>D("answers"))},null,8,["answer","list-questions","form-submited"]))),128))]),o("div",he,[o("p",be,i(e.$t("warning"))+"! ",1),o("p",null,i(e.$t("please_note_that_your_answers_1")),1),qe,o("p",null,i(e.$t("please_note_that_your_answers_2")),1),ye,o("p",null,i(e.$t("please_note_that_your_answers_3")),1)]),M(L,{class:"question-modal-submit tw-w-full","label-key":"continue","is-disabled":!r(J)||r(b),onClick:j},null,8,["is-disabled"])])]),_:1},8,["modal-max-width","fullscreen-mode"])):B("",!0)])}}}),Ve=ae(ge,[["__scopeId","data-v-4552a66a"]]);export{Ve as default};
