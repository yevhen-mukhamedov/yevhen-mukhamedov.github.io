import{_ as D}from"./DqC-nx6a.js";import{_ as k}from"./DbDzaoeP.js";import{_ as T}from"./r5J4__cq.js";import{d as $,m as E,s as F,a0 as l,H as p,k as N,o as V,B,C as w,b as c,g as t,e as v,t as i,a4 as L,a5 as M,a6 as P}from"./7PQ9d4dP.js";import{W as S}from"./CJGqVaXH.js";import"./BQWyzQZp.js";import"./DD170oM2.js";import"./CXUEa_s4.js";import"./D0WEjs_T.js";import"./Dty3woGA.js";import"./CML6iTNl.js";import"./JGQl4adw.js";import"./RQfXHScZ.js";import"./CHcNArxE.js";import"./BjfPoI8C.js";const I={class:"tw-flex tw-gap-4 tw-flex-col"},ae=$({__name:"WithdrawalAptosPetra",props:{provider:{}},setup(x){const y=E(),{getWithdrawable:f}=F(y),r=x,A=l(new S("petra")),a=l({address:"",amount:"0",fee:""}),m=l({mainCurrency:"",network:"",rate:""}),_=l(!0),g=p(()=>m.value.rate*a.value.amount),h=p(()=>r.provider.max_limit<f.value?r.provider.max_limit:f.value),W=p(()=>{const e=parseFloat(r.provider.min_limit),o=parseFloat(r.provider.max_limit),n=parseFloat(a.value.amount),d=n<e,u=n>h.value,s=n>o,b=!a.value.address;return!(d||u||s||b)});async function C(){try{const{data:e}=await M.get(P.WITHDRAWAL.DATA,{id:r.provider.id});a.value.fee=e.fee,m.value.mainCurrency=e.main_currency,m.value.network=e.network,m.value.rate=e.possible_rate}catch(e){console.error(e)}finally{_.value=!1}}return N(async()=>{C(),a.value.address=await A.value.connect()}),(e,o)=>{const n=D,d=k,u=T;return V(),B(L,{loading:t(_)},{default:w(()=>[c(u,{"filed-values":t(a),"is-form-valid":t(W),provider:e.provider},{default:w(()=>[v("div",I,[v("span",null,i(e.$t("fee"))+": "+i(t(a).fee),1),v("span",null,i(e.$t("possible_amount"))+": "+i(t(g)||"-")+" "+i(t(a).mainCurrency),1),c(n,{modelValue:t(a).address,"onUpdate:modelValue":o[0]||(o[0]=s=>t(a).address=s),"placeholder-text":e.$t("address"),"input-name":"address","input-type":"text","is-required":""},null,8,["modelValue","placeholder-text"]),c(d,{amount:t(a).amount,"onUpdate:amount":o[1]||(o[1]=s=>t(a).amount=s),provider:e.provider},null,8,["amount","provider"])])]),_:1},8,["filed-values","is-form-valid","provider"])]),_:1},8,["loading"])}}});export{ae as default};
