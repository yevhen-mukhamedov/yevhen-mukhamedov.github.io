import{_ as K}from"./CwMDRuuH.js";import{_ as R}from"./DPPwigSW.js";import{d as w,a as j,j as A,s as b,H as S,o as a,B as g,C as F,e as _,t as n,g as t,c as i,aH as C,i as k,U as P,f as U,W as N,Y as W,_ as L,b as f,h as q,A as B,aI as J,a7 as O,a0 as T,aJ as Y,as as G,a1 as $,O as Q,aE as X,aK as Z,F as tt}from"./7PQ9d4dP.js";import{T as et,u as at}from"./DqC-nx6a.js";import{a as st}from"./CXUEa_s4.js";import"./BQWyzQZp.js";import"./DD170oM2.js";import"./D0WEjs_T.js";const ot={class:"tw-flex tw-items-center tw-justify-between tw-bg-bg-tertiary tw-p-2"},nt={class:"ng-flex tw-text-text-secondary fg-text-14-thin"},ct={class:"tw-flex tw-gap-2 tw-items-center"},it={key:0,class:"tw-flex tw-gap-2 fg-main-12-regular tw-text-text-tertiary"},rt={class:"tw-p-2 tw-bg-bg-secondary fg-main-14-fat"},_t={key:0,class:"tw-flex tw-gap-2 fg-main-12-regular tw-text-text-tertiary tw-mt-4"},lt=w({__name:"TicketListItem",props:{ticket:{}},setup(h){const{t:o}=j(),d=h,r=A(),{isLessContainerDesktop:l}=b(r),p=S(()=>et[d.ticket.status]),u=S(()=>"status-"+p.value.name);return(c,e)=>{const y=W;return a(),g(y,{to:`${t(N).contact_us}/${c.ticket.id}`,class:"ticket-list-item"},{default:F(()=>[_("div",ot,[_("div",nt,n(t(o)("id"))+": "+n(c.ticket.id),1),_("div",ct,[t(l)?k("",!0):(a(),i("div",it,n(t(o)("date_updated"))+": "+n(t(C)(c.ticket.updated_at,{day:void 0,month:void 0,year:void 0})),1)),t(p)?(a(),i("div",{key:1,class:P(["tw-px-1 tw-py-0.5 tw-rounded-sm fg-main-12-bold tw-text-text-dark",t(u)])},n(t(o)(t(p).statusKey??"")),3)):k("",!0)])]),_("div",rt,[U(n(c.ticket.title)+" ",1),t(l)?(a(),i("div",_t,n(t(o)("date_updated"))+": "+n(t(C)(c.ticket.updated_at,{day:void 0,month:void 0,year:void 0})),1)):k("",!0)])]),_:1},8,["to"])}}}),pt=L(lt,[["__scopeId","data-v-da2a62f9"]]),ut={class:"no-tickets"},dt={class:"tw-text-center"},mt={class:"no-tickets-desc"},gt=w({__name:"NoTickets",setup(h){return(o,d)=>{const r=q,l=B;return a(),i("div",ut,[_("div",dt,[f(r,{name:"support",width:48,height:48,class:"tw-mb-5 tw-text-input-fg"}),_("p",mt,n(o.$t("if_you_have_any_problems")),1),f(l,{"is-link":!0,"label-key":"create_ticket",link:t(N).contact_us_create},null,8,["link"])])])}}}),kt=L(gt,[["__scopeId","data-v-5b710a4b"]]),ft={key:0,class:"tickets-search"},ht={class:"tickets-list"},vt=w({__name:"TicketsList",setup(h){const o=J(),{fetchTickets:d}=o,{tickets:r}=b(o),l=O(),{isLoggedIn:p}=b(l),u=T(""),c=T(!1),e=T({page:1,per_page:10,total:0,total_pages:0,next_page:null,prev_page:null}),y=({page:s,perPage:m})=>{e.value.per_page!==m?e.value.page=1:e.value.page=s,e.value.per_page=m,x()},x=async()=>{try{const s=await d(Z({search:u.value,page:e.value.page,per_page:e.value.per_page}));return e.value=s.pagination,s}catch(s){console.error(s)}};return Y(()=>{p.value&&x().then(s=>{c.value=(s==null?void 0:s.pagination.total)===0})}),G({redirectTo:"/tickets/create"}),(s,m)=>{var I;const V=K,D=R,M=B,z=pt,E=st,H=kt;return a(),i($,null,[f(V,{"title-key":"support","icon-name":"contact-us"}),t(c)?(a(),g(H,{key:1})):(a(),i($,{key:0},[t(p)?(a(),i("div",ft,[f(D,{modelValue:t(u),"onUpdate:modelValue":m[0]||(m[0]=v=>Q(u)?u.value=v:null),class:"tw-w-full","placeholder-text":s.$t("search"),"is-required":"",onInput:x},null,8,["modelValue","placeholder-text"]),f(M,{classes:"create-ticket-button","is-link":!0,"label-key":"create_ticket",size:"large",link:t(N).contact_us_create},null,8,["link"])])):k("",!0),_("div",ht,[(a(!0),i($,null,X(t(r),v=>(a(),g(z,{key:v.id,ticket:v},null,8,["ticket"]))),128)),(I=t(e))!=null&&I.total?(a(),g(E,{key:0,class:"tickets-pagination","current-page":t(e).page,total:t(e).total,pages:t(e).total_pages,"per-page":t(e).per_page,"default-per-page":10,"per-page-list":[10,15,20],onChange:y},null,8,["current-page","total","pages","per-page"])):k("",!0)])],64))],64)}}}),St=w({__name:"index",setup(h){return at(),tt({title:"Tickets"}),(o,d)=>{const r=vt;return a(),g(r)}}});export{St as default};
