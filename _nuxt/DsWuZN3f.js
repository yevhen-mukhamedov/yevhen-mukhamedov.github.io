import{_ as de}from"./CXUEa_s4.js";import{d as ue,aa as _e,X as me,L as ve,a as pe,aM as he,j as ge,I as ye,s as fe,a0 as y,H as R,k as be,aY as we,aS as ke,l as Te,a$ as O,o as a,c as n,e as h,r as Ce,g as e,B as T,b as w,C as U,i as _,E as xe,a_ as Ie,b0 as Le,a4 as Ne,O as Se,U as L,t as r,a1 as $e,aE as Ee,f as N,aH as Be,n as j,b1 as Pe,M as Y,bh as Ve,ab as Ae,au as De,p as Me,h as Fe,_ as Re}from"./7PQ9d4dP.js";import"./BQWyzQZp.js";import"./D0WEjs_T.js";const Oe={1:"live-games",2:"games-id",3:"virtual-sport-id",4:"tv-games-id",5:"poker-id",6:"sportbook-id",7:"special-games-id",8:"table-games-id"},Ue={class:"ng-leader-board"},je={class:"board"},Ye={key:1,class:"board-wrapper ng-flex-center"},ze={class:"board-table"},Ge={class:"tw-flex tw-items-center"},He={key:0,class:"ng-flex-center"},Ke={key:1,class:"ng-flex-center"},qe={key:2,class:"ng-flex-center"},Xe={key:3,class:"ng-flex-center"},Je={class:"tw-flex tw-justify-end"},Qe=["onClick"],We={class:"tw-text-ellipsis tw-overflow-hidden tw-whitespace-nowrap"},Ze={key:0,class:"ng-flex-center"},es=["onClick"],ss=["data-tooltip"],ts=["onClick"],as={key:1,class:"ng-flex-center"},os={key:0},ns={key:1},ls={key:2,class:"tw-flex tw-justify-end"},cs={key:3,class:"ng-flex-center"},rs=["onClick"],is={key:0,class:"board-shadow"},z=12,ds=100,us=10,_s=ue({__name:"LeaderBoard",emits:["profile-active","bet-active"],setup(ms,{emit:G}){const H=G,K=_e(),S=me(),{platformCommasFormat:C}=ve(),x=["6ed534e6-fe06-428f-b15f-e769cbbfe1c4","45cab422-ae18-45d9-acde-e0ddead0091a"],{t:o}=pe(),{$echo:$}=he(),{public:{PLATFORM_ID:E}}=xe(),q=ge(),X=ye(),{setAnotherUser:J,setBetInfo:Q,openModal:B}=X,{isLessContainerTablet:l,isLeaderboardAlternativeTime:W}=fe(q);let g=[{key:"casino",label:o("casino_bets"),icon:"casino"},{key:"high-rollers",label:o("high-rollers_bets"),icon:"crash"},{key:"rare-wins",label:o("rare-wins_bets"),icon:"special"}];const k=y(!0),i=y(g[0].key),P=y(new Date),d=y({casino:[],"high-rollers":[],"rare-wins":[]}),v=y([]),V=y(void 0),A=y(null),D=R({get:()=>g.find(({key:s})=>s===i.value)??g[0],set:s=>{i.value=s}}),Z=R(()=>({second:o("seconds_s"),minute:o("minutes_m"),hour:o("hours_h"),day:o("days_d")})),ee=s=>{i.value=s},se=async()=>{k.value=!0;try{const{data:s}=await Ie.casino.getNewTransactions();d.value=s,V.value=window.setInterval(()=>{P.value=new Date},1e3)}catch(s){console.error("Error in LeaderBoard.vue -> getNewTransactions:",s)}finally{k.value=!1}},te=s=>"/img/categories/"+s.game_category.toLowerCase().replace(/\s+|-/g,"_")+".svg",ae=s=>{let c;const u=Oe[s.type_id],m={id:s.game_id};u?c=S({name:`${u}`,params:m}):c=S({name:"games-id",params:m}),K.push({path:c})},M=s=>{J(s),B(Y.PROFILE_STATISTIC)},oe=s=>{Q(s),B(Y.BET_INFO),H("bet-active",s)},ne=s=>+s.payout>=+s.bet_amount,le=()=>{$.channel(`${O.transactionsCompany}.${E}`).listen(Le.leaderBoard,s=>{const[c]=Object.keys(s);if(s.casino){const u=s[c],{id:m}=u;if(!m)return;let p=-1;const b=v.value.length;p=v.value.findIndex(f=>f.id===m),p!==-1?Object.keys(v.value[p]).forEach(f=>{v.value[p][f]=u[f]}):b<ds&&v.value.push(u)}else d.value[c]=s[c]})},ce=s=>Ve(s,P.value,Z.value),re=s=>s&&s.length>z;return be(()=>{se(),le(),A.value=we(()=>{const s=document.querySelector(".layout-main"),c=l.value?window.scrollY:s==null?void 0:s.scrollTop;if(v.value.length){v.value.sort((m,p)=>new Date(p.time).getTime()-new Date(m.time).getTime());const u=v.value.pop();d.value.casino=[u,...d.value.casino],d.value.casino.length>us&&d.value.casino.pop()}ke(()=>{l.value?window.scrollTo(0,c):s==null||s.scrollTo(0,c)})},1e3),g=[{key:"casino",label:o("casino_bets"),icon:"casino"},{key:"high-rollers",label:o("high-rollers_bets"),icon:"crash"},{key:"rare-wins",label:o("rare-wins_bets"),icon:"special"}]}),Te(()=>{$.leaveChannel(`${O.transactionsCompany}.${E}`),clearInterval(V.value),clearInterval(A.value)}),(s,c)=>{var F;const u=de,m=Ae,p=De,b=Me,f=Fe,ie=Ne;return a(),n("div",Ue,[h("div",je,[Ce(s.$slots,"tabs",{activeTab:e(i),activeTabSetter:ee,tabs:e(g)},()=>[e(l)?(a(),T(u,{key:0,"model-value":e(D),"item-list":e(g),"displayed-option":"label","returned-option":"key","additional-label":e(o)("leaderboard"),"default-option":e(D),"onUpdate:modelValue":c[0]||(c[0]=t=>i.value=t)},null,8,["model-value","item-list","additional-label","default-option"])):(a(),T(m,{key:1,modelValue:e(i),"onUpdate:modelValue":c[1]||(c[1]=t=>Se(i)?i.value=t:null),tabs:e(g),type:"primary"},null,8,["modelValue","tabs"]))],!0),!e(d)[e(i)].length&&!e(k)?(a(),T(p,{key:0,"class-list":"tw-mt-4"})):(a(),n("div",Ye,[w(ie,{loading:e(k),class:"tw-w-full"},{default:U(()=>[h("div",ze,[h("div",{class:L(["fg-main-14-thin board-header",{"tw-grid-cols-2":e(l),"tw-grid-cols-6":!e(l)}])},[h("div",Ge,r(e(o)("game")),1),e(l)?_("",!0):(a(),n("div",He,r(e(o)("user")),1)),e(l)?_("",!0):(a(),n("div",Ke,r(e(o)("time")),1)),e(l)?_("",!0):(a(),n("div",qe,r(e(o)("bet_amount")),1)),e(l)?_("",!0):(a(),n("div",Xe,r(e(o)("multiplier")),1)),h("div",Je,r(e(o)("payout")),1)],2),e(d)[e(i)].length>0?(a(),T(Pe,{key:0,name:"list",tag:"div",class:"board-body"},{default:U(()=>[(a(!0),n($e,null,Ee(e(d)[e(i)],t=>(a(),n("div",{key:t.id,class:L(["fg-main-14-thin board-row",{"tw-grid-cols-2":e(l),"tw-grid-cols-6":!e(l)}])},[h("div",{class:"tw-flex tw-items-center tw-cursor-pointer",onClick:I=>ae(t)},[w(b,{alt:"category-icon",class:"board-row-icon",width:"16",height:"16",src:t.category_icon||te(t)},null,8,["src"]),h("span",We,r(t.game),1)],8,Qe),e(l)?_("",!0):(a(),n("div",Ze,[re(t.username)?(a(),n("span",{key:0,class:"tw-cursor-pointer",onClick:I=>M(t)},r(t.username.substring(0,z)+"..."),9,es)):t.username===""?(a(),n("span",{key:1,class:"board-row-name--anonymous ng-flex-center","data-tooltip":e(o)("enabled_privacy")},[w(f,{size:20,name:"anonymous"}),N(" "+r(e(o)("anonymous")),1)],8,ss)):(a(),n("span",{key:2,class:"tw-cursor-pointer",onClick:I=>M(t)},r(t.username),9,ts))])),e(l)?_("",!0):(a(),n("div",as,[e(W)?(a(),n("span",os,r(ce(t.time)),1)):(a(),n("span",ns,r(e(Be)(t.time,{day:void 0,month:void 0,year:void 0})),1))])),e(l)?_("",!0):(a(),n("div",ls,[N(r(e(C)(x,t.bet_amount))+" ",1),w(b,{alt:"currency-icon",class:"tw-ml-1",width:"17",height:"17",src:e(j)(t.currency)},null,8,["src"])])),e(l)?_("",!0):(a(),n("div",cs," x"+r(e(C)(x,t.multiplier.toFixed(2))),1)),h("div",{class:L(["board-row-currency",`board-row-currency--${ne(t)?"more":"less"}`]),onClick:I=>oe(t)},[N(r(e(C)(x,t.payout))+" ",1),w(b,{alt:"currency-icon",class:"tw-ml-1",width:"17",height:"17",src:e(j)(t.currency)},null,8,["src"])],10,rs)],2))),128))]),_:1})):_("",!0)])]),_:1},8,["loading"]),((F=e(d)[e(i)])==null?void 0:F.length)>3?(a(),n("div",is)):_("",!0)]))])])}}}),ys=Re(_s,[["__scopeId","data-v-faf5740a"]]);export{ys as default};
