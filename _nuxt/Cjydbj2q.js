import{a as de,_ as _e}from"./CML6iTNl.js";import{_ as fe}from"./DqC-nx6a.js";import{b as ve,F as pe}from"./BQWyzQZp.js";import{_ as be}from"./Dty3woGA.js";import{_ as ye,o as l,c as A,r as ge,d as Ne,m as $e,ah as he,aM as ke,a as we,s as Ce,a0 as u,H as r,b6 as xe,aO as Ae,w as Pe,g as e,t as y,b as m,C as s,O as M,B as c,f as g,i as d,T as Se,E as Ve,A as Fe}from"./7PQ9d4dP.js";import{_ as Ie}from"./UCCBr-NG.js";import"./CXUEa_s4.js";import"./D0WEjs_T.js";import"./DD170oM2.js";const Me={},Te={class:"successfull-msg"};function Ee(T,P){return l(),A("div",Te,[ge(T.$slots,"default",{},void 0,!0)])}const Be=ye(Me,[["render",Ee],["__scopeId","data-v-fd2fcf5f"]]),Re={class:"payment-p2p"},Ue={key:0,class:"agent-child"},De={key:1,class:"form-conatiner"},Ke=Ne({__name:"P2P",setup(T){const P=$e(),L=he(),{$2fa:E}=ke(),{t:H}=we(),{setP2PUserName:W}=P,{sendP2POrder:z}=L,{public:{PLATFORM_ID:j}}=Ve(),{isAgentChild:G,getUser:J,getPaymentP2P:S,getP2PUserName:K,getCurrencySymbol:B,getCurrency:Q,getBalance:R,getWithdrawable:U}=Ce(P),k=u(!0),o=u(S.value.min_limit),i=u(""),_=u(""),f=u(""),n=u(""),N=u(!1),w=u(!0),C=u(!1),X=r(()=>E.auth),Y=r(()=>E.control),v=r({get:()=>K.value,set:a=>W(a)}),$=r(()=>Number(S.value.max_limit)),p=r(()=>Number(S.value.min_limit)),Z=r(()=>["6ed534e6-fe06-428f-b15f-e769cbbfe1c4","45cab422-ae18-45d9-acde-e0ddead0091a"].includes(j)),ee=r(()=>`${H("amount")} (${B.value} ${V(String(p.value))} - ${B.value} ${V(String($.value))})`),ae=r(()=>!Y.value.value&&X.value.value),te=r(()=>xe().typeError("").required().min(p.value).max($.value)),le=()=>{o.value=Number(R.value>$.value?$.value:R.value)},oe=()=>{N.value&&n.value.length===6&&D()},D=async()=>{k.value=!0,C.value=!1,i.value="",f.value="",_.value="";try{const a={address:String(v.value),amount:o.value,code_2fa:n.value};await z(a),k.value=!1,N.value=!1,n.value="",C.value=!0}catch(a){const{message:t,error_code:F,msg:x}=a;t==="common.user_not_found"?_.value="user_not_found":t==="payment.withdrawal_wagering"?i.value="available_withdrawal_exceeded":t==="payment.not_enough_balance_operation"?i.value="current_amountexceeds":F===216?(N.value=!0,n.value=""):(f.value=x,n.value="")}},O=a=>{f.value="",C.value=!1,a==="player"&&(/[^a-z\d_@.-]/i.test(v.value)||v.value===J.value?_.value="incorrect_emailuser":_.value=""),a==="amount"&&(Number(o.value)===0||Number(o.value)>$.value||Number(o.value)<p.value?i.value="amountMaxError":i.value=""),!_.value.length&&v.value.length&&!i.value.length&&o.value?k.value=!1:k.value=!0},ne=()=>{n.value.length<6?w.value=!0:w.value=!1},V=a=>Z.value?Ae(a):a,se=()=>{o.value=p.value};Pe(()=>Q.value,()=>{se()});const q=()=>{N.value=!1,n.value="",w.value=!0};return(a,t)=>{const F=de,x=fe,h=_e,ue=ve,re=be,ce=Be,I=Fe,ie=pe,me=Ie;return l(),A("div",Re,[e(G)?(l(),A("div",Ue,y(a.$t("agent_child")),1)):(l(),A("div",De,[m(F),m(ie,{id:"p2p-form",class:"tw-flex tw-flex-col tw-gap-4",onSubmit:D},{default:s(()=>[m(x,{modelValue:e(v),"onUpdate:modelValue":t[0]||(t[0]=b=>M(v)?v.value=b:null),"placeholder-text":a.$t("username_or_email"),"input-name":"playerName","is-required":"",onInput:t[1]||(t[1]=b=>O("player"))},null,8,["modelValue","placeholder-text"]),e(_)?(l(),c(h,{key:0},{default:s(()=>[g(y(a.$t(e(_))),1)]),_:1})):d("",!0),m(ue,{modelValue:e(o),"onUpdate:modelValue":t[2]||(t[2]=b=>M(o)?o.value=b:null),modelModifiers:{number:!0},"is-disabled":e(p)>e(U),"placeholder-key":e(ee),"validation-rules":e(te),"input-name":"amount","is-max-btn":"","is-required":"",onInput:t[3]||(t[3]=b=>O("amount")),onClickMaxBtn:le},null,8,["modelValue","is-disabled","placeholder-key","validation-rules"]),e(i)?(l(),c(h,{key:1},{default:s(()=>[g(y(a.$t(e(i))),1)]),_:1})):d("",!0),e(p)>e(U)?(l(),c(h,{key:2},{default:s(()=>[g(y(a.$t("amountMinErrorFull",{min:V(String(e(p)))})),1)]),_:1})):d("",!0),e(f)?(l(),c(h,{key:3},{default:s(()=>[g(y(e(f)),1)]),_:1})):d("",!0),e(ae)?(l(),c(re,{key:4})):d("",!0),e(C)?(l(),c(ce,{key:5},{default:s(()=>[g(y(a.$t("transfer_to_player_completed_successfully")),1)]),_:1})):d("",!0),m(I,{class:"tw-w-full","label-key":"send",type:"submit"})]),_:1})])),(l(),c(Se,{to:"#globalModal"},[e(N)?(l(),c(me,{key:0,class:"need-two-fa-modal","is-footer":"",onClose:q},{title:s(()=>[g(" Need 2fa code ")]),content:s(()=>[m(x,{modelValue:e(n),"onUpdate:modelValue":t[4]||(t[4]=b=>M(n)?n.value=b:null),"placeholder-text":a.$t("code"),"is-required":"",onInput:ne},null,8,["modelValue","placeholder-text"]),e(f)?(l(),c(h,{key:0},{default:s(()=>[g(y(e(f)),1)]),_:1})):d("",!0)]),footer:s(()=>[m(I,{"is-disabled":e(w),"color-type":"secondary","label-key":"confirm",onClick:oe},null,8,["is-disabled"]),m(I,{"color-type":"secondary","label-key":"cancel",onClick:q})]),_:1})):d("",!0)]))])}}});export{Ke as default};
