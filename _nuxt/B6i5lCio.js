import{V as q,_ as vt,bd as ft,W as ht,a7 as yt,$ as Et,ab as Lt,a8 as gt,a1 as Nt,j as n,o as r,c as d,X as l,f as C,x as w,u as m,b as u,a as e,t as a,K as y,be as $t,a5 as Q,a6 as At,n as A,d as z}from"./JoFQSik9.js";import{_ as Bt}from"./L3qbADmP.js";import{_ as Tt}from"./Cel6GgYv.js";import{_ as kt}from"./ElL4sWVy.js";import{_ as Ct}from"./sQNTZNBq.js";import{g as Y}from"./BZw8aVXh.js";const wt={class:"tw-flex tw-items-center"},It={class:"tw-flex tw-flex-col tw-items-center"},Pt={key:0},Dt={key:0},Vt={key:1},St="1",zt="2",Yt="0",Kt="-1",Mt="3",B="available",K="unavailable",T="available_delete",W="completed",N="join_battle",$="leave_battle",f="playing",h="playing_leave",X="canceled",k="finished",Rt="deleted",Ot=q({__name:"NgBattleButton",props:{battle:{}},setup(E){const{t}=vt(),{show:p}=ft(),_=ht(),L=yt(),g=Et(),I=Lt(),M=gt(),{getUserBattle:i,getUserId:b}=Nt(I),{PVP_LOBBY_LINK:P,PVP_BATTLES:R,PVP_BATTLE_ID:he}=$t,s=E,O=L.meta.metaName,Z={[St]:B,[zt]:f,[Yt]:X,[Kt]:Rt,[Mt]:k},U=n(()=>L.meta.metaName===R),v=n(()=>L.meta.metaName===P),j=n(()=>{var o,V;return((o=i==null?void 0:i.value)==null?void 0:o.battle_id)&&((V=i==null?void 0:i.value)==null?void 0:V.battle_id)!==s.battle.id&&s.battle.battle_status===1}),x=n(()=>{var o;return((o=i==null?void 0:i.value)==null?void 0:o.battle_id)&&(b==null?void 0:b.value)!==s.battle.player_id&&s.battle.battle_status===1}),tt=n(()=>s.battle.battle_status===3),et=n(()=>{var o;return!((o=i==null?void 0:i.value)!=null&&o.battle_id)&&s.battle.battle_status===1&&v.value}),st=n(()=>{var o;return((o=i==null?void 0:i.value)==null?void 0:o.battle_id)===s.battle.id&&(b==null?void 0:b.value)!==s.battle.player_id&&s.battle.battle_status===1&&v.value}),at=n(()=>s.battle.battle_status===2&&U.value),nt=n(()=>s.battle.battle_status===2&&v.value&&s.battle.player_status===-1),ot=n(()=>s.battle.battle_status===2&&v.value&&s.battle.player_status!==2),lt=n(()=>s.battle.battle_status===2&&v.value&&s.battle.player_status===2),c=n(()=>j.value?K:x.value?T:tt.value?W:et.value?N:st.value?$:at.value||nt.value?f:ot.value?h:lt.value?k:Z[`${s.battle.battle_status}`]),it=n(()=>[K,W,X].includes(c.value)?"dark":[f,k,$].includes(c.value)?"secondary":"primary"),F=n(()=>[B,K,T,N,$,h,f].includes(c.value)),G=n(()=>[P,R].includes(O)),ct=n(()=>c.value===h&&G.value),rt=n(()=>c.value===T&&G.value),D=n(()=>j.value?t("in_the_match"):null),ut=n(()=>[B,T,N,$].includes(c.value)?t("open"):[f,h].includes(c.value)?t("live"):c.value===k?t("results_in"):null),_t=()=>{c.value===N&&s.battle.hover&&s.battle.hover.show&&p({message:"Here must be text about battle.hover params",position:"bottom-right"}),c.value===h?g.push(_({name:"battles-id",params:{id:s.battle.id}})):c.value===$?H():(c.value===N||c.value===B&&O===P)&&mt()},H=async()=>{await M.leaveBattle({battleId:s.battle.battle_id}),I.setUserBattle(null),g.push(_({name:"battles"}))},dt=()=>{},mt=async()=>{const{data:o}=await M.joinBattle({battleId:s.battle.battle_id});I.setUserBattle(o),o.battle_id===2&&g.push(_({name:"battles-id",params:{id:o.battle_id}}))};return(o,V)=>{const S=Q,J=Tt,pt=kt,bt=Ct;return r(),d("div",wt,[l(ct)?(r(),C(J,{key:0,class:"leave-button tw-mr-1","color-type":"secondary",size:"large",onClick:H},{default:w(()=>[m(S,{name:"leave",size:24})]),_:1})):u("",!0),m(bt,{class:"tw-w-full",link:l(_)({name:"battles-lobby-id",params:{id:s.battle.link}}),"is-link":!l(v),"color-type":l(it),size:"large",onClick:_t},{default:w(()=>[e("span",It,[e("span",null,a(l(t)(l(c))),1),l(F)||l(D)?(r(),d("span",Pt,[l(D)?(r(),d("span",Dt,a(l(D)),1)):u("",!0),l(F)?(r(),d("span",Vt,[[f,h].includes(l(c))?(r(),C(S,{key:0,name:"stream_battle",size:12})):u("",!0),y(" "+a(l(ut))+"Â  ",1),m(pt,{id:`${o.battle.battle_id}-timer`,"hidden-days":!0,"hidden-hours":!0,"end-time":o.battle.timer*1e3,class:"tw-font-bold"},null,8,["id","end-time"])])):u("",!0)])):u("",!0)])]),_:1},8,["link","is-link","color-type"]),l(rt)?(r(),C(J,{key:1,class:"delete-button tw-ml-1","color-type":"secondary",size:"large",onClick:dt},{default:w(()=>[m(S,{name:"delete",size:24})]),_:1})):u("",!0)])}}}),jt=At(Ot,[["__scopeId","data-v-d3cd6875"]]),Ft=E=>{const t=Math.floor(E/60),p=E-t*60;return`${t<10?"0"+t:t}:${p<10?"0"+p:p}`},Gt={class:"picture"},Ht=["src","alt"],Jt={class:"content"},Wt={key:0,class:"item"},Xt={class:"text center-gap"},qt={class:"info center-gap"},Qt={class:"item"},Zt={class:"text center-gap"},Ut={class:"info center-gap"},xt=["src","alt"],te={class:"item"},ee={class:"text center-gap"},se={class:"info center-gap"},ae=["src","alt"],ne={key:1,class:"item"},oe={class:"text center-gap"},le={class:"info center-gap"},ie={class:"item"},ce={class:"text center-gap"},re={class:"info center-gap"},ue={class:"item"},_e={class:"text center-gap"},de={class:"info center-gap"},me={class:"item"},pe={class:"text center-gap tooltip"},be={class:"tooltip info"},ve={class:"info center-gap"},fe=["src","alt"],Ae=q({__name:"BattleItem",props:{classList:{default:""},item:{},isColumn:{type:Boolean,default:!1}},setup(E){return(t,p)=>{const _=Q,L=Bt,g=jt;return r(),d("div",{class:A(["ng-battle-item",t.isColumn?"tw-flex-col":"",t.classList])},[e("picture",Gt,[t.isColumn?u("",!0):(r(),C(_,{key:0,name:t.item.battle_type,folder:"pvp",class:"icon"},null,8,["name"])),e("img",{src:t.item.banner_vertical,alt:t.item.link,class:A(["image",t.isColumn?"image-col":""])},null,10,Ht)]),e("div",{class:A(["wrapper",t.isColumn?"tw-mt-4":""])},[e("div",Jt,[z(t.$slots,"caption",{props:t.item}),z(t.$slots,"item",{props:t.item},()=>[t.isColumn?(r(),d("dl",Wt,[e("dt",Xt,a(t.$t("type")),1),e("dd",qt,[y(a(t.$t(t.item.battle_type))+" ",1),m(_,{name:t.item.battle_type,size:16,folder:"pvp"},null,8,["name"])])])):u("",!0),e("dl",Qt,[e("dt",Zt,a(t.$t("entry_fee")),1),e("dd",Ut,[y(a(t.item.entry_fee)+" ",1),e("img",{src:l(Y)(t.item.battle_currency),alt:t.item.battle_currency},null,8,xt)])]),e("dl",te,[e("dt",ee,a(t.$t("stake_amount")),1),e("dd",se,[y(a(t.item.stake_amount)+" ",1),e("img",{src:l(Y)(t.item.battle_currency),alt:t.item.battle_currency},null,8,ae)])]),t.item.duration&&t.isColumn?(r(),d("dl",ne,[e("dt",oe,a(t.$t("duration")),1),e("dd",le,a(l(Ft)(t.item.duration)),1)])):u("",!0),e("dl",ie,[e("dt",ce,a(t.$t("spins_count")),1),e("dd",re,a(t.item.spins_count),1)]),e("dl",ue,[e("dt",_e,a(t.$t("players")),1),e("dd",de,a(t.item.active_participant_count)+" / "+a(t.item.participant_count),1)]),e("dl",me,[e("dt",pe,[y(a(t.$t("prize"))+" ",1),m(L,null,{content:w(()=>[e("div",be,[e("div",null,a(t.$t("prize_tooltip")),1),e("div",null,a(t.$t("platform_fee"))+" "+a(t.item.company_fee)+"%",1)])]),_:1})]),e("dd",ve,[y(a(t.item.prize)+" ",1),e("img",{src:l(Y)(t.item.battle_currency),alt:t.item.battle_currency},null,8,fe)])])])]),e("div",{class:A(["actions",t.isColumn?"tw-mt-4":"tw-mt-1.5"])},[z(t.$slots,"actions",{props:t.item},()=>[m(g,{battle:t.item},null,8,["battle"])])],2)],2)],2)}}});export{Ae as _};
