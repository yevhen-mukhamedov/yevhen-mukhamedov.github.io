import{d as M,a0 as $,o as u,B as b,C as V,b as D,g as l,p as Q,aL as T,j as E,a7 as H,H as v,c as S,aE as X,S as O,a1 as R,_ as q,I as Y,aM as Z,U as I,i as W,e as x,t as z,V as ee,A as te}from"./7PQ9d4dP.js";import{W as oe}from"./CJGqVaXH.js";var B=(o=>(o[o.small=16]="small",o[o.large=24]="large",o[o.origin=20]="origin",o))(B||{});const K=M({__name:"SocialButton",props:{item:{},height:{default:""},width:{default:""},name:{default:"icon"}},setup(o){const n=o,i=$(n.item.pic||n.item.path),w=()=>{i.value=n.item.pic_hover||n.item.path_hover||n.item.pic||n.item.path};return(c,_)=>{const y=Q,d=T;return u(),b(d,{classes:"ng-social-btn","color-type":"dark",onMouseover:w,onMouseleave:_[0]||(_[0]=e=>i.value=c.item.pic||c.item.path)},{default:V(({size:e})=>[D(y,{class:"tw-max-w-min",height:c.height||l(B)[e],width:c.width||l(B)[e],src:l(i),alt:c.name||c.item.code||"icon"},null,8,["height","width","src","alt"])]),_:1})}}}),ae=M({__name:"AuthWeb3",props:{order:{}},setup(o){const n=o,{getWeb3AuthProviders:i}=E(),{postGetNonce:w,postWeb3Auth:c,setAuthModal:_}=H(),y=v(()=>{if(!n.order)return i;const e={};return Object.keys(n.order).forEach(a=>{a in i&&(e[a]=i[a])}),e}),d=async(e,p)=>{const a=new oe(e);if(!await a.hasUserApp()){window.open(p.url,"_blank");return}try{const r=await a.connect(),{data:{nonce:m}}=await w(),k=await a.signMessage(m),C={network:p.network,provider:p.id,sign:k,nonce:m,address:r};let g={};a.getDataForAuth&&(g=a.getDataForAuth()),await c({...C,...g}),_("hidden")}catch(r){console.error("f:web3AuthRequest /AuthWeb3",r)}};return(e,p)=>{const a=K;return u(!0),S(R,null,X(l(y),(h,r)=>{var m;return u(),b(a,{key:h.id,item:h,name:r,style:O({order:(m=e.order)==null?void 0:m[r]}),onClick:k=>d(r,h)},null,8,["item","name","style","onClick"])}),128)}}}),se=q(ae,[["__scopeId","data-v-fcc5b4ca"]]),ne={class:"social"},ce={key:1,class:"tw-flex tw-gap-2"},ie={class:"tw-max-w-60"},re=M({__name:"SocialAuth",props:{socials:{default:()=>[]},isWeb3:{type:Boolean,default:!0},isSocial:{type:Boolean,default:!0},order:{}},emits:["handle-error"],setup(o,{emit:n}){const i=o,{getSocialAuth:w,getWeb3AuthProviders:c}=E(),{fetchSocialAuth:_,postDisconnectSocialAuth:y,isLoggedIn:d}=H(),{getProfile:e,fetchProfile:p}=Y(),{$telegramAuth:a}=Z(),h=$({social:"",url:void 0}),r=$((e==null?void 0:e.social)||""),m=v(()=>t=>d&&(e==null?void 0:e.social)&&(e==null?void 0:e.social)!==t),k=v(()=>t=>d&&r.value===t),C=v(()=>{var A;const t=i.socials.length?i.socials:w;return(A=Object.keys(c))!=null&&A.length?t.filter(s=>!Object.keys(c).includes(s.code)):t}),g=n,U=t=>{h.value=t,r.value=t.social,d||L()},L=async()=>{const{url:t,social:A}=h.value;if(t){window.location.href=t;return}try{const{data:s}=await _({provider:A,redirect_url:window.location.origin});s.type==="usual"&&(window.location.href=s.redirect),s.type==="custom"&&(console.log("data",s),await a.auth(s))}catch(s){console.log("f:fetchSocialAuth /SocialAuth",s),g("handle-error",s)}},G=async()=>{try{await y(),await p()}catch(t){console.log("f:onDisconnectSocialAuth /SocialAuth",t),g("handle-error",t)}};return(t,A)=>{var F;const s=K,J=ee,P=se,j=te;return u(),S("div",ne,[t.isSocial?(u(),b(J,{key:0,list:l(C),"key-name":"social-auth-field","key-identify":"code",container:!1},{item:V(({item:f})=>{var N;return[D(s,{class:I({"social__active-btn":l(k)(f.code),"tw-hidden":l(m)(f.code)}),style:O({order:(N=t.order)==null?void 0:N[f.code]}),width:"20",height:"20",item:f,onClick:le=>U({social:f.code,url:f.url})},null,8,["class","style","item","onClick"])]}),_:1},8,["list"])):W("",!0),t.isWeb3?(u(),b(P,{key:1,order:t.order},null,8,["order"])):W("",!0),l(d)?(u(),S(R,{key:2},[(F=l(e))!=null&&F.social?(u(),S("div",ce,[D(j,{class:"tw-shrink-0","label-key":"disconnect",onClick:G}),x("p",ie,z(t.$t("if_you_want_change_social")),1)])):(u(),b(j,{key:0,"is-disabled":!l(h).social.length,"label-key":"connect",onClick:L},null,8,["is-disabled"]))],64)):W("",!0)])}}}),he=q(re,[["__scopeId","data-v-c484e61e"]]);export{he as _};
