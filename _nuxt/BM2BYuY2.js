import{i as ee,U as we,j as P,X as I,D as le,k as vt,a4 as Pe,p as ge,M as ht,aS as A,aT as Rt,aP as kt,E as Ut,aU as Bt,R as Dt,C as Me,V as zt,aV as rt,s as xt,S as Lt}from"./JoFQSik9.js";/**
  * vee-validate v4.12.6
  * (c) 2024 Abdelrahman Awad
  * @license MIT
  */function H(e){return typeof e=="function"}function mt(e){return e==null}const be=e=>e!==null&&!!e&&typeof e=="object"&&!Array.isArray(e);function Ke(e){return Number(e)>=0}function $t(e){const t=parseFloat(e);return isNaN(t)?e:t}function Wt(e){return typeof e=="object"&&e!==null}function qt(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}function it(e){if(!Wt(e)||qt(e)!=="[object Object]")return!1;if(Object.getPrototypeOf(e)===null)return!0;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Ae(e,t){return Object.keys(t).forEach(n=>{if(it(t[n])&&it(e[n])){e[n]||(e[n]={}),Ae(e[n],t[n]);return}e[n]=t[n]}),e}function Se(e){const t=e.split(".");if(!t.length)return"";let n=String(t[0]);for(let l=1;l<t.length;l++){if(Ke(t[l])){n+=`[${t[l]}]`;continue}n+=`.${t[l]}`}return n}const Gt={};function Ht(e){return Gt[e]}function lt(e,t,n){typeof n.value=="object"&&(n.value=E(n.value)),!n.enumerable||n.get||n.set||!n.configurable||!n.writable||t==="__proto__"?Object.defineProperty(e,t,n):e[t]=n.value}function E(e){if(typeof e!="object")return e;var t=0,n,l,a,u=Object.prototype.toString.call(e);if(u==="[object Object]"?a=Object.create(e.__proto__||null):u==="[object Array]"?a=Array(e.length):u==="[object Set]"?(a=new Set,e.forEach(function(d){a.add(E(d))})):u==="[object Map]"?(a=new Map,e.forEach(function(d,v){a.set(E(v),E(d))})):u==="[object Date]"?a=new Date(+e):u==="[object RegExp]"?a=new RegExp(e.source,e.flags):u==="[object DataView]"?a=new e.constructor(E(e.buffer)):u==="[object ArrayBuffer]"?a=e.slice(0):u.slice(-6)==="Array]"&&(a=new e.constructor(e)),a){for(l=Object.getOwnPropertySymbols(e);t<l.length;t++)lt(a,l[t],Object.getOwnPropertyDescriptor(e,l[t]));for(t=0,l=Object.getOwnPropertyNames(e);t<l.length;t++)Object.hasOwnProperty.call(a,n=l[t])&&a[n]===e[n]||lt(a,n,Object.getOwnPropertyDescriptor(e,n))}return a||e}const Ye=Symbol("vee-validate-form"),Kt=Symbol("vee-validate-field-instance"),at=Symbol("Default empty value"),Yt=typeof window<"u";function We(e){return H(e)&&!!e.__locatorRef}function te(e){return!!e&&H(e.parse)&&e.__type==="VVTypedSchema"}function Ie(e){return!!e&&H(e.validate)}function yt(e){return e==="checkbox"||e==="radio"}function Xt(e){return be(e)||Array.isArray(e)}function Jt(e){return Array.isArray(e)?e.length===0:be(e)&&Object.keys(e).length===0}function Te(e){return/^\[.+\]$/i.test(e)}function Qt(e){return gt(e)&&e.multiple}function gt(e){return e.tagName==="SELECT"}function bt(e){return Xe(e)&&e.target&&"submit"in e.target}function Xe(e){return e?!!(typeof Event<"u"&&H(Event)&&e instanceof Event||e&&e.srcElement):!1}function x(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var n,l,a;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(l=n;l--!==0;)if(!x(e[l],t[l]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(l of e.entries())if(!t.has(l[0]))return!1;for(l of e.entries())if(!x(l[1],t.get(l[0])))return!1;return!0}if(ut(e)&&ut(t))return!(e.size!==t.size||e.name!==t.name||e.lastModified!==t.lastModified||e.type!==t.type);if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(l of e.entries())if(!t.has(l[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(l=n;l--!==0;)if(e[l]!==t[l])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();for(a=Object.keys(e),n=a.length,l=n;l--!==0;){var u=a[l];if(!x(e[u],t[u]))return!1}return!0}return e!==e&&t!==t}function ut(e){return Yt?e instanceof File:!1}function Je(e){return Te(e)?e.replace(/\[|\]/gi,""):e}function W(e,t,n){return e?Te(t)?e[Je(t)]:(t||"").split(/\.|\[(\d+)\]/).filter(Boolean).reduce((a,u)=>Xt(a)&&u in a?a[u]:n,e):n}function ve(e,t,n){if(Te(t)){e[Je(t)]=n;return}const l=t.split(/\.|\[(\d+)\]/).filter(Boolean);let a=e;for(let u=0;u<l.length;u++){if(u===l.length-1){a[l[u]]=n;return}(!(l[u]in a)||mt(a[l[u]]))&&(a[l[u]]=Ke(l[u+1])?[]:{}),a=a[l[u]]}}function Le(e,t){if(Array.isArray(e)&&Ke(t)){e.splice(Number(t),1);return}be(e)&&delete e[t]}function ot(e,t){if(Te(t)){delete e[Je(t)];return}const n=t.split(/\.|\[(\d+)\]/).filter(Boolean);let l=e;for(let u=0;u<n.length;u++){if(u===n.length-1){Le(l,n[u]);break}if(!(n[u]in l)||mt(l[n[u]]))break;l=l[n[u]]}const a=n.map((u,d)=>W(e,n.slice(0,d).join(".")));for(let u=a.length-1;u>=0;u--)if(Jt(a[u])){if(u===0){Le(e,n[0]);continue}Le(a[u-1],n[u-1])}}function G(e){return Object.keys(e)}function Vt(e,t=void 0){const n=Me();return(n==null?void 0:n.provides[e])||Dt(e,t)}function st(e,t,n){if(Array.isArray(e)){const l=[...e],a=l.findIndex(u=>x(u,t));return a>=0?l.splice(a,1):l.push(t),l}return x(e,t)?n:t}function dt(e,t=0){let n=null,l=[];return function(...a){return n&&clearTimeout(n),n=setTimeout(()=>{const u=e(...a);l.forEach(d=>d(u)),l=[]},t),new Promise(u=>l.push(u))}}function Zt(e,t){return be(t)&&t.number?$t(e):e}function qe(e,t){let n;return async function(...a){const u=e(...a);n=u;const d=await u;return u!==n?d:(n=void 0,t(d,a))}}function Ge(e){return Array.isArray(e)?e:e?[e]:[]}function je(e,t){const n={};for(const l in e)t.includes(l)||(n[l]=e[l]);return n}function en(e){let t=null,n=[];return function(...l){const a=le(()=>{if(t!==a)return;const u=e(...l);n.forEach(d=>d(u)),n=[],t=null});return t=a,new Promise(u=>n.push(u))}}function tn(e,t,n){return t.slots.default?typeof e=="string"||!e?t.slots.default(n()):{default:()=>{var l,a;return(a=(l=t.slots).default)===null||a===void 0?void 0:a.call(l,n())}}:t.slots.default}function $e(e){if(pt(e))return e._value}function pt(e){return"_value"in e}function nn(e){return e.type==="number"||e.type==="range"?Number.isNaN(e.valueAsNumber)?e.value:e.valueAsNumber:e.value}function Ce(e){if(!Xe(e))return e;const t=e.target;if(yt(t.type)&&pt(t))return $e(t);if(t.type==="file"&&t.files){const n=Array.from(t.files);return t.multiple?n:n[0]}if(Qt(t))return Array.from(t.options).filter(n=>n.selected&&!n.disabled).map($e);if(gt(t)){const n=Array.from(t.options).find(l=>l.selected);return n?$e(n):t.value}return nn(t)}function Ot(e){const t={};return Object.defineProperty(t,"_$$isNormalized",{value:!0,writable:!1,enumerable:!1,configurable:!1}),e?be(e)&&e._$$isNormalized?e:be(e)?Object.keys(e).reduce((n,l)=>{const a=rn(e[l]);return e[l]!==!1&&(n[l]=ct(a)),n},t):typeof e!="string"?t:e.split("|").reduce((n,l)=>{const a=ln(l);return a.name&&(n[a.name]=ct(a.params)),n},t):t}function rn(e){return e===!0?[]:Array.isArray(e)||be(e)?e:[e]}function ct(e){const t=n=>typeof n=="string"&&n[0]==="@"?an(n.slice(1)):n;return Array.isArray(e)?e.map(t):e instanceof RegExp?[e]:Object.keys(e).reduce((n,l)=>(n[l]=t(e[l]),n),{})}const ln=e=>{let t=[];const n=e.split(":")[0];return e.includes(":")&&(t=e.split(":").slice(1).join(":").split(",")),{name:n,params:t}};function an(e){const t=n=>W(n,e)||n[e];return t.__locatorRef=e,t}function un(e){return Array.isArray(e)?e.filter(We):G(e).filter(t=>We(e[t])).map(t=>e[t])}const on={generateMessage:({field:e})=>`${e} is not valid.`,bails:!0,validateOnBlur:!0,validateOnChange:!0,validateOnInput:!1,validateOnModelUpdate:!0};let sn=Object.assign({},on);const _e=()=>sn;async function St(e,t,n={}){const l=n==null?void 0:n.bails,a={name:(n==null?void 0:n.name)||"{field}",rules:t,label:n==null?void 0:n.label,bails:l??!0,formData:(n==null?void 0:n.values)||{}},d=(await dn(a,e)).errors;return{errors:d,valid:!d.length}}async function dn(e,t){if(te(e.rules)||Ie(e.rules))return fn(t,e.rules);if(H(e.rules)||Array.isArray(e.rules)){const d={field:e.label||e.name,name:e.name,label:e.label,form:e.formData,value:t},v=Array.isArray(e.rules)?e.rules:[e.rules],f=v.length,s=[];for(let O=0;O<f;O++){const b=v[O],S=await b(t,d);if(!(typeof S!="string"&&!Array.isArray(S)&&S)){if(Array.isArray(S))s.push(...S);else{const M=typeof S=="string"?S:At(d);s.push(M)}if(e.bails)return{errors:s}}}return{errors:s}}const n=Object.assign(Object.assign({},e),{rules:Ot(e.rules)}),l=[],a=Object.keys(n.rules),u=a.length;for(let d=0;d<u;d++){const v=a[d],f=await vn(n,t,{name:v,params:n.rules[v]});if(f.error&&(l.push(f.error),e.bails))return{errors:l}}return{errors:l}}function cn(e){return!!e&&e.name==="ValidationError"}function _t(e){return{__type:"VVTypedSchema",async parse(n){var l;try{return{output:await e.validate(n,{abortEarly:!1}),errors:[]}}catch(a){if(!cn(a))throw a;if(!(!((l=a.inner)===null||l===void 0)&&l.length)&&a.errors.length)return{errors:[{path:a.path,errors:a.errors}]};const u=a.inner.reduce((d,v)=>{const f=v.path||"";return d[f]||(d[f]={errors:[],path:f}),d[f].errors.push(...v.errors),d},{});return{errors:Object.values(u)}}}}}async function fn(e,t){const l=await(te(t)?t:_t(t)).parse(e),a=[];for(const u of l.errors)u.errors.length&&a.push(...u.errors);return{errors:a}}async function vn(e,t,n){const l=Ht(n.name);if(!l)throw new Error(`No such validator '${n.name}' exists.`);const a=hn(n.params,e.formData),u={field:e.label||e.name,name:e.name,label:e.label,value:t,form:e.formData,rule:Object.assign(Object.assign({},n),{params:a})},d=await l(t,a,u);return typeof d=="string"?{error:d}:{error:d?void 0:At(u)}}function At(e){const t=_e().generateMessage;return t?t(e):"Field is invalid"}function hn(e,t){const n=l=>We(l)?l(t):l;return Array.isArray(e)?e.map(n):Object.keys(e).reduce((l,a)=>(l[a]=n(e[a]),l),{})}async function mn(e,t){const l=await(te(e)?e:_t(e)).parse(E(t)),a={},u={};for(const d of l.errors){const v=d.errors,f=(d.path||"").replace(/\["(\d+)"\]/g,(s,O)=>`[${O}]`);a[f]={valid:!v.length,errors:v},v.length&&(u[f]=v[0])}return{valid:!l.errors.length,results:a,errors:u,values:l.value}}async function yn(e,t,n){const a=G(e).map(async s=>{var O,b,S;const V=(O=n==null?void 0:n.names)===null||O===void 0?void 0:O[s],M=await St(W(t,s),e[s],{name:(V==null?void 0:V.name)||s,label:V==null?void 0:V.label,values:t,bails:(S=(b=n==null?void 0:n.bailsMap)===null||b===void 0?void 0:b[s])!==null&&S!==void 0?S:!0});return Object.assign(Object.assign({},M),{path:s})});let u=!0;const d=await Promise.all(a),v={},f={};for(const s of d)v[s.path]={valid:s.valid,errors:s.errors},s.valid||(u=!1,f[s.path]=s.errors[0]);return{valid:u,results:v,errors:f}}let ft=0;function gn(e,t){const{value:n,initialValue:l,setInitialValue:a}=bn(e,t.modelValue,t.form);if(!t.form){let f=function(V){var M;"value"in V&&(n.value=V.value),"errors"in V&&O(V.errors),"touched"in V&&(S.touched=(M=V.touched)!==null&&M!==void 0?M:S.touched),"initialValue"in V&&a(V.initialValue)};const{errors:s,setErrors:O}=On(),b=ft>=Number.MAX_SAFE_INTEGER?0:++ft,S=pn(n,l,s,t.schema);return{id:b,path:e,value:n,initialValue:l,meta:S,flags:{pendingUnmount:{[b]:!1},pendingReset:!1},errors:s,setState:f}}const u=t.form.createPathState(e,{bails:t.bails,label:t.label,type:t.type,validate:t.validate,schema:t.schema}),d=P(()=>u.errors);function v(f){var s,O,b;"value"in f&&(n.value=f.value),"errors"in f&&((s=t.form)===null||s===void 0||s.setFieldError(I(e),f.errors)),"touched"in f&&((O=t.form)===null||O===void 0||O.setFieldTouched(I(e),(b=f.touched)!==null&&b!==void 0?b:!1)),"initialValue"in f&&a(f.initialValue)}return{id:Array.isArray(u.id)?u.id[u.id.length-1]:u.id,path:e,value:n,errors:d,meta:u,initialValue:l,flags:u.__flags,setState:v}}function bn(e,t,n){const l=ee(I(t));function a(){return n?W(n.initialValues.value,I(e),I(l)):I(l)}function u(s){if(!n){l.value=s;return}n.setFieldInitialValue(I(e),s,!0)}const d=P(a);if(!n)return{value:ee(a()),initialValue:d,setInitialValue:u};const v=Vn(t,n,d,e);return n.stageInitialValue(I(e),v,!0),{value:P({get(){return W(n.values,I(e))},set(s){n.setFieldValue(I(e),s,!1)}}),initialValue:d,setInitialValue:u}}function Vn(e,t,n,l){return Pe(e)?I(e):e!==void 0?e:W(t.values,I(l),I(n))}function pn(e,t,n,l){var a,u;const d=(u=(a=l==null?void 0:l.describe)===null||a===void 0?void 0:a.call(l).required)!==null&&u!==void 0?u:!1,v=we({touched:!1,pending:!1,valid:!0,required:d,validated:!!I(n).length,initialValue:P(()=>I(t)),dirty:P(()=>!x(I(e),I(t)))});return ge(n,f=>{v.valid=!f.length},{immediate:!0,flush:"sync"}),v}function On(){const e=ee([]);return{errors:e,setErrors:t=>{e.value=Ge(t)}}}function Mn(e,t,n){return yt(n==null?void 0:n.type)?_n(e,t,n):Et(e,t,n)}function Et(e,t,n){const{initialValue:l,validateOnMount:a,bails:u,type:d,checkedValue:v,label:f,validateOnValueUpdate:s,uncheckedValue:O,controlled:b,keepValueOnUnmount:S,syncVModel:V,form:M}=Sn(n),J=b?Vt(Ye):void 0,p=M||J,q=P(()=>Se(A(e))),U=P(()=>{if(A(p==null?void 0:p.schema))return;const g=I(t);return Ie(g)||te(g)||H(g)||Array.isArray(g)?g:Ot(g)}),{id:ae,value:ue,initialValue:ne,meta:T,setState:oe,errors:he,flags:se}=gn(q,{modelValue:l,form:p,bails:u,label:f,type:d,validate:U.value?re:void 0,schema:te(t)?t:void 0}),B=P(()=>he.value[0]);V&&An({value:ue,prop:V,handleChange:F,shouldValidate:()=>s&&!se.pendingReset});const ce=(h,g=!1)=>{T.touched=!0,g&&Q()};async function me(h){var g,w;if(p!=null&&p.validateSchema){const{results:j}=await p.validateSchema(h);return(g=j[A(q)])!==null&&g!==void 0?g:{valid:!0,errors:[]}}return U.value?St(ue.value,U.value,{name:A(q),label:A(f),values:(w=p==null?void 0:p.values)!==null&&w!==void 0?w:{},bails:u}):{valid:!0,errors:[]}}const Q=qe(async()=>(T.pending=!0,T.validated=!0,me("validated-only")),h=>(se.pendingUnmount[D.id]||(oe({errors:h.errors}),T.pending=!1,T.valid=h.valid),h)),K=qe(async()=>me("silent"),h=>(T.valid=h.valid,h));function re(h){return(h==null?void 0:h.mode)==="silent"?K():Q()}function F(h,g=!0){const w=Ce(h);pe(w,g)}vt(()=>{if(a)return Q();(!p||!p.validateSchema)&&K()});function L(h){T.touched=h}function Y(h){var g;const w=h&&"value"in h?h.value:ne.value;oe({value:E(w),initialValue:E(w),touched:(g=h==null?void 0:h.touched)!==null&&g!==void 0?g:!1,errors:(h==null?void 0:h.errors)||[]}),T.pending=!1,T.validated=!1,K()}const fe=Me();function pe(h,g=!0){ue.value=fe&&V?Zt(h,fe.props.modelModifiers):h,(g?Q:K)()}function Ee(h){oe({errors:Array.isArray(h)?h:[h]})}const Qe=P({get(){return ue.value},set(h){pe(h,s)}}),D={id:ae,name:q,label:f,value:Qe,meta:T,errors:he,errorMessage:B,type:d,checkedValue:v,uncheckedValue:O,bails:u,keepValueOnUnmount:S,resetField:Y,handleReset:()=>Y(),validate:re,handleChange:F,handleBlur:ce,setState:oe,setTouched:L,setErrors:Ee,setValue:pe};if(ht(Kt,D),Pe(t)&&typeof I(t)!="function"&&ge(t,(h,g)=>{x(h,g)||(T.validated?Q():K())},{deep:!0}),!p)return D;const Ne=P(()=>{const h=U.value;return!h||H(h)||Ie(h)||te(h)||Array.isArray(h)?{}:Object.keys(h).reduce((g,w)=>{const j=un(h[w]).map(de=>de.__locatorRef).reduce((de,ie)=>{const X=W(p.values,ie)||p.values[ie];return X!==void 0&&(de[ie]=X),de},{});return Object.assign(g,j),g},{})});return ge(Ne,(h,g)=>{if(!Object.keys(h).length)return;!x(h,g)&&(T.validated?Q():K())}),Ut(()=>{var h;const g=(h=A(D.keepValueOnUnmount))!==null&&h!==void 0?h:A(p.keepValuesOnUnmount),w=A(q);if(g||!p||se.pendingUnmount[D.id]){p==null||p.removePathState(w,ae);return}se.pendingUnmount[D.id]=!0;const j=p.getPathState(w);if(Array.isArray(j==null?void 0:j.id)&&(j!=null&&j.multiple)?j!=null&&j.id.includes(D.id):(j==null?void 0:j.id)===D.id){if(j!=null&&j.multiple&&Array.isArray(j.value)){const ie=j.value.findIndex(X=>x(X,A(D.checkedValue)));if(ie>-1){const X=[...j.value];X.splice(ie,1),p.setFieldValue(w,X)}Array.isArray(j.id)&&j.id.splice(j.id.indexOf(D.id),1)}else p.unsetPathValue(A(q));p.removePathState(w,ae)}}),D}function Sn(e){const t=()=>({initialValue:void 0,validateOnMount:!1,bails:!0,label:void 0,validateOnValueUpdate:!0,keepValueOnUnmount:void 0,syncVModel:!1,controlled:!0}),n=!!(e!=null&&e.syncVModel),l=typeof(e==null?void 0:e.syncVModel)=="string"?e.syncVModel:(e==null?void 0:e.modelPropName)||"modelValue",a=n&&!("initialValue"in(e||{}))?He(Me(),l):e==null?void 0:e.initialValue;if(!e)return Object.assign(Object.assign({},t()),{initialValue:a});const u="valueProp"in e?e.valueProp:e.checkedValue,d="standalone"in e?!e.standalone:e.controlled,v=(e==null?void 0:e.modelPropName)||(e==null?void 0:e.syncVModel)||!1;return Object.assign(Object.assign(Object.assign({},t()),e||{}),{initialValue:a,controlled:d??!0,checkedValue:u,syncVModel:v})}function _n(e,t,n){const l=n!=null&&n.standalone?void 0:Vt(Ye),a=n==null?void 0:n.checkedValue,u=n==null?void 0:n.uncheckedValue;function d(v){const f=v.handleChange,s=P(()=>{const b=A(v.value),S=A(a);return Array.isArray(b)?b.findIndex(V=>x(V,S))>=0:x(S,b)});function O(b,S=!0){var V,M;if(s.value===((V=b==null?void 0:b.target)===null||V===void 0?void 0:V.checked)){S&&v.validate();return}const J=A(e),p=l==null?void 0:l.getPathState(J),q=Ce(b);let U=(M=A(a))!==null&&M!==void 0?M:q;l&&(p!=null&&p.multiple)&&p.type==="checkbox"?U=st(W(l.values,J)||[],U,void 0):(n==null?void 0:n.type)==="checkbox"&&(U=st(A(v.value),U,A(u))),f(U,S)}return Object.assign(Object.assign({},v),{checked:s,checkedValue:a,uncheckedValue:u,handleChange:O})}return d(Et(e,t,n))}function An({prop:e,value:t,handleChange:n,shouldValidate:l}){const a=Me();if(!a||!e)return;const u=typeof e=="string"?e:"modelValue",d=`update:${u}`;u in a.props&&(ge(t,v=>{x(v,He(a,u))||a.emit(d,v)}),ge(()=>He(a,u),v=>{if(v===at&&t.value===void 0)return;const f=v===at?void 0:v;x(f,t.value)||n(f,l())}))}function He(e,t){if(e)return e.props[t]}let En=0;const Fe=["bails","fieldsCount","id","multiple","type","validate"];function jt(e){const t=Object.assign({},A((e==null?void 0:e.initialValues)||{})),n=I(e==null?void 0:e.validationSchema);return n&&te(n)&&H(n.cast)?E(n.cast(t)||{}):E(t)}function jn(e){var t;const n=En++;let l=0;const a=ee(!1),u=ee(!1),d=ee(0),v=[],f=we(jt(e)),s=ee([]),O=ee({}),b=ee({}),S=en(()=>{b.value=s.value.reduce((i,r)=>(i[Se(A(r.path))]=r,i),{})});function V(i,r){const o=F(i);if(!o){typeof i=="string"&&(O.value[Se(i)]=Ge(r));return}if(typeof i=="string"){const c=Se(i);O.value[c]&&delete O.value[c]}o.errors=Ge(r),o.valid=!o.errors.length}function M(i){G(i).forEach(r=>{V(r,i[r])})}e!=null&&e.initialErrors&&M(e.initialErrors);const J=P(()=>{const i=s.value.reduce((r,o)=>(o.errors.length&&(r[o.path]=o.errors),r),{});return Object.assign(Object.assign({},O.value),i)}),p=P(()=>G(J.value).reduce((i,r)=>{const o=J.value[r];return o!=null&&o.length&&(i[r]=o[0]),i},{})),q=P(()=>s.value.reduce((i,r)=>(i[r.path]={name:r.path||"",label:r.label||""},i),{})),U=P(()=>s.value.reduce((i,r)=>{var o;return i[r.path]=(o=r.bails)!==null&&o!==void 0?o:!0,i},{})),ae=Object.assign({},(e==null?void 0:e.initialErrors)||{}),ue=(t=e==null?void 0:e.keepValuesOnUnmount)!==null&&t!==void 0?t:!1,{initialValues:ne,originalInitialValues:T,setInitialValues:oe}=wn(s,f,e),he=Fn(s,f,T,p),se=P(()=>s.value.reduce((i,r)=>{const o=W(f,r.path);return ve(i,r.path,o),i},{})),B=e==null?void 0:e.validationSchema;function ce(i,r){var o,c;const y=P(()=>W(ne.value,A(i))),m=b.value[A(i)],_=(r==null?void 0:r.type)==="checkbox"||(r==null?void 0:r.type)==="radio";if(m&&_){m.multiple=!0;const Z=l++;return Array.isArray(m.id)?m.id.push(Z):m.id=[m.id,Z],m.fieldsCount++,m.__flags.pendingUnmount[Z]=!1,m}const N=P(()=>W(f,A(i))),R=A(i),z=Y.findIndex(Z=>Z===R);z!==-1&&Y.splice(z,1);const C=P(()=>{var Z,Oe,De,nt,ze,xe;return te(B)?(De=(Oe=(Z=B).describe)===null||Oe===void 0?void 0:Oe.call(Z,A(i)).required)!==null&&De!==void 0?De:!1:te(r==null?void 0:r.schema)&&(xe=(ze=(nt=r==null?void 0:r.schema).describe)===null||ze===void 0?void 0:ze.call(nt).required)!==null&&xe!==void 0?xe:!1}),k=l++,$=we({id:k,path:i,touched:!1,pending:!1,valid:!0,validated:!!(!((o=ae[R])===null||o===void 0)&&o.length),required:C,initialValue:y,errors:Bt([]),bails:(c=r==null?void 0:r.bails)!==null&&c!==void 0?c:!1,label:r==null?void 0:r.label,type:(r==null?void 0:r.type)||"default",value:N,multiple:!1,__flags:{pendingUnmount:{[k]:!1},pendingReset:!1},fieldsCount:1,validate:r==null?void 0:r.validate,dirty:P(()=>!x(I(N),I(y)))});return s.value.push($),b.value[R]=$,S(),p.value[R]&&!ae[R]&&le(()=>{ye(R,{mode:"silent"})}),Pe(i)&&ge(i,Z=>{S();const Oe=E(N.value);b.value[Z]=$,le(()=>{ve(f,Z,Oe)})}),$}const me=dt(tt,5),Q=dt(tt,5),K=qe(async i=>await(i==="silent"?me():Q()),(i,[r])=>{const o=G(g.errorBag.value),y=[...new Set([...G(i.results),...s.value.map(m=>m.path),...o])].sort().reduce((m,_)=>{var N;const R=_,z=F(R)||L(R),C=((N=i.results[R])===null||N===void 0?void 0:N.errors)||[],k=A(z==null?void 0:z.path)||R,$=Pn({errors:C,valid:!C.length},m.results[k]);return m.results[k]=$,$.valid||(m.errors[k]=$.errors[0]),z&&O.value[k]&&delete O.value[k],z?(z.valid=$.valid,r==="silent"||r==="validated-only"&&!z.validated||V(z,$.errors),m):(V(k,C),m)},{valid:i.valid,results:{},errors:{}});return i.values&&(y.values=i.values),G(y.results).forEach(m=>{var _;const N=F(m);N&&r!=="silent"&&(r==="validated-only"&&!N.validated||V(N,(_=y.results[m])===null||_===void 0?void 0:_.errors))}),y});function re(i){s.value.forEach(i)}function F(i){const r=typeof i=="string"?Se(i):i;return typeof r=="string"?b.value[r]:r}function L(i){return s.value.filter(o=>i.startsWith(o.path)).reduce((o,c)=>o?c.path.length>o.path.length?c:o:c,void 0)}let Y=[],fe;function pe(i){return Y.push(i),fe||(fe=le(()=>{[...Y].sort().reverse().forEach(o=>{ot(f,o)}),Y=[],fe=null})),fe}function Ee(i){return function(o,c){return function(m){return m instanceof Event&&(m.preventDefault(),m.stopPropagation()),re(_=>_.touched=!0),a.value=!0,d.value++,Ve().then(_=>{const N=E(f);if(_.valid&&typeof o=="function"){const R=E(se.value);let z=i?R:N;return _.values&&(z=_.values),o(z,{evt:m,controlledValues:R,setErrors:M,setFieldError:V,setTouched:Re,setFieldTouched:X,setValues:de,setFieldValue:w,resetForm:ke,resetField:Ze})}!_.valid&&typeof c=="function"&&c({values:N,evt:m,errors:_.errors,results:_.results})}).then(_=>(a.value=!1,_),_=>{throw a.value=!1,_})}}}const D=Ee(!1);D.withControlled=Ee(!0);function Ne(i,r){const o=s.value.findIndex(y=>y.path===i&&(Array.isArray(y.id)?y.id.includes(r):y.id===r)),c=s.value[o];if(!(o===-1||!c)){if(le(()=>{ye(i,{mode:"silent",warn:!1})}),c.multiple&&c.fieldsCount&&c.fieldsCount--,Array.isArray(c.id)){const y=c.id.indexOf(r);y>=0&&c.id.splice(y,1),delete c.__flags.pendingUnmount[r]}(!c.multiple||c.fieldsCount<=0)&&(s.value.splice(o,1),et(i),S(),delete b.value[i])}}function h(i){G(b.value).forEach(r=>{r.startsWith(i)&&delete b.value[r]}),s.value=s.value.filter(r=>!r.path.startsWith(i)),le(()=>{S()})}const g={formId:n,values:f,controlledValues:se,errorBag:J,errors:p,schema:B,submitCount:d,meta:he,isSubmitting:a,isValidating:u,fieldArrays:v,keepValuesOnUnmount:ue,validateSchema:I(B)?K:void 0,validate:Ve,setFieldError:V,validateField:ye,setFieldValue:w,setValues:de,setErrors:M,setFieldTouched:X,setTouched:Re,resetForm:ke,resetField:Ze,handleSubmit:D,useFieldModel:Mt,defineInputBinds:Tt,defineComponentBinds:Nt,defineField:Be,stageInitialValue:It,unsetInitialValue:et,setFieldInitialValue:Ue,createPathState:ce,getPathState:F,unsetPathValue:pe,removePathState:Ne,initialValues:ne,getAllPathStates:()=>s.value,destroyPath:h,isFieldTouched:Ft,isFieldDirty:wt,isFieldValid:Pt};function w(i,r,o=!0){const c=E(r),y=typeof i=="string"?i:i.path;F(y)||ce(y),ve(f,y,c),o&&ye(y)}function j(i,r=!0){G(f).forEach(o=>{delete f[o]}),G(i).forEach(o=>{w(o,i[o],!1)}),r&&Ve()}function de(i,r=!0){Ae(f,i),v.forEach(o=>o&&o.reset()),r&&Ve()}function ie(i,r){const o=F(A(i))||ce(i);return P({get(){return o.value},set(c){var y;const m=A(i);w(m,c,(y=A(r))!==null&&y!==void 0?y:!1)}})}function X(i,r){const o=F(i);o&&(o.touched=r)}function Ft(i){const r=F(i);return r?r.touched:s.value.filter(o=>o.path.startsWith(i)).some(o=>o.touched)}function wt(i){const r=F(i);return r?r.dirty:s.value.filter(o=>o.path.startsWith(i)).some(o=>o.dirty)}function Pt(i){const r=F(i);return r?r.valid:s.value.filter(o=>o.path.startsWith(i)).every(o=>o.valid)}function Re(i){if(typeof i=="boolean"){re(r=>{r.touched=i});return}G(i).forEach(r=>{X(r,!!i[r])})}function Ze(i,r){var o;const c=r&&"value"in r?r.value:W(ne.value,i),y=F(i);y&&(y.__flags.pendingReset=!0),Ue(i,E(c),!0),w(i,c,!1),X(i,(o=r==null?void 0:r.touched)!==null&&o!==void 0?o:!1),V(i,(r==null?void 0:r.errors)||[]),le(()=>{y&&(y.__flags.pendingReset=!1)})}function ke(i,r){let o=E(i!=null&&i.values?i.values:T.value);o=r!=null&&r.force?o:Ae(T.value,o),o=te(B)&&H(B.cast)?B.cast(o):o,oe(o),re(c=>{var y;c.__flags.pendingReset=!0,c.validated=!1,c.touched=((y=i==null?void 0:i.touched)===null||y===void 0?void 0:y[c.path])||!1,w(c.path,W(o,c.path),!1),V(c.path,void 0)}),r!=null&&r.force?j(o,!1):de(o,!1),M((i==null?void 0:i.errors)||{}),d.value=(i==null?void 0:i.submitCount)||0,le(()=>{Ve({mode:"silent"}),re(c=>{c.__flags.pendingReset=!1})})}async function Ve(i){const r=(i==null?void 0:i.mode)||"force";if(r==="force"&&re(m=>m.validated=!0),g.validateSchema)return g.validateSchema(r);u.value=!0;const o=await Promise.all(s.value.map(m=>m.validate?m.validate(i).then(_=>({key:m.path,valid:_.valid,errors:_.errors})):Promise.resolve({key:m.path,valid:!0,errors:[]})));u.value=!1;const c={},y={};for(const m of o)c[m.key]={valid:m.valid,errors:m.errors},m.errors.length&&(y[m.key]=m.errors[0]);return{valid:o.every(m=>m.valid),results:c,errors:y}}async function ye(i,r){var o;const c=F(i);if(c&&(r==null?void 0:r.mode)!=="silent"&&(c.validated=!0),B){const{results:y}=await K((r==null?void 0:r.mode)||"validated-only");return y[i]||{errors:[],valid:!0}}return c!=null&&c.validate?c.validate(r):(!c&&(o=r==null?void 0:r.warn),Promise.resolve({errors:[],valid:!0}))}function et(i){ot(ne.value,i)}function It(i,r,o=!1){Ue(i,r),ve(f,i,r),o&&!(e!=null&&e.initialValues)&&ve(T.value,i,E(r))}function Ue(i,r,o=!1){ve(ne.value,i,E(r)),o&&ve(T.value,i,E(r))}async function tt(){const i=I(B);if(!i)return{valid:!0,results:{},errors:{}};u.value=!0;const r=Ie(i)||te(i)?await mn(i,f):await yn(i,f,{names:q.value,bailsMap:U.value});return u.value=!1,r}const Ct=D((i,{evt:r})=>{bt(r)&&r.target.submit()});vt(()=>{if(e!=null&&e.initialErrors&&M(e.initialErrors),e!=null&&e.initialTouched&&Re(e.initialTouched),e!=null&&e.validateOnMount){Ve();return}g.validateSchema&&g.validateSchema("silent")}),Pe(B)&&ge(B,()=>{var i;(i=g.validateSchema)===null||i===void 0||i.call(g,"validated-only")}),ht(Ye,g);function Be(i,r){const o=H(r)||r==null?void 0:r.label,c=F(A(i))||ce(i,{label:o}),y=()=>H(r)?r(je(c,Fe)):r||{};function m(){var C;c.touched=!0,((C=y().validateOnBlur)!==null&&C!==void 0?C:_e().validateOnBlur)&&ye(c.path)}function _(){var C;((C=y().validateOnInput)!==null&&C!==void 0?C:_e().validateOnInput)&&le(()=>{ye(c.path)})}function N(){var C;((C=y().validateOnChange)!==null&&C!==void 0?C:_e().validateOnChange)&&le(()=>{ye(c.path)})}const R=P(()=>{const C={onChange:N,onInput:_,onBlur:m};return H(r)?Object.assign(Object.assign({},C),r(je(c,Fe)).props||{}):r!=null&&r.props?Object.assign(Object.assign({},C),r.props(je(c,Fe))):C});return[ie(i,()=>{var C,k,$;return($=(C=y().validateOnModelUpdate)!==null&&C!==void 0?C:(k=_e())===null||k===void 0?void 0:k.validateOnModelUpdate)!==null&&$!==void 0?$:!0}),R]}function Mt(i){return Array.isArray(i)?i.map(r=>ie(r,!0)):ie(i)}function Tt(i,r){const[o,c]=Be(i,r);function y(){c.value.onBlur()}function m(N){const R=Ce(N);w(A(i),R,!1),c.value.onInput()}function _(N){const R=Ce(N);w(A(i),R,!1),c.value.onChange()}return P(()=>Object.assign(Object.assign({},c.value),{onBlur:y,onInput:m,onChange:_,value:o.value}))}function Nt(i,r){const[o,c]=Be(i,r),y=F(A(i));function m(_){o.value=_}return P(()=>{const _=H(r)?r(je(y,Fe)):r||{};return Object.assign({[_.model||"modelValue"]:o.value,[`onUpdate:${_.model||"modelValue"}`]:m},c.value)})}return Object.assign(Object.assign({},g),{values:Rt(f),handleReset:()=>ke(),submitForm:Ct})}function Fn(e,t,n,l){const a={touched:"some",pending:"some",valid:"every"},u=P(()=>!x(t,I(n)));function d(){const f=e.value;return G(a).reduce((s,O)=>{const b=a[O];return s[O]=f[b](S=>S[O]),s},{})}const v=we(d());return kt(()=>{const f=d();v.touched=f.touched,v.valid=f.valid,v.pending=f.pending}),P(()=>Object.assign(Object.assign({initialValues:I(n)},v),{valid:v.valid&&!G(l.value).length,dirty:u.value}))}function wn(e,t,n){const l=jt(n),a=ee(l),u=ee(E(l));function d(v,f=!1){a.value=Ae(E(a.value)||{},E(v)),u.value=Ae(E(u.value)||{},E(v)),f&&e.value.forEach(s=>{if(s.touched)return;const b=W(a.value,s.path);ve(t,s.path,E(b))})}return{initialValues:a,originalInitialValues:u,setInitialValues:d}}function Pn(e,t){return t?{valid:e.valid&&t.valid,errors:[...e.errors,...t.errors]}:e}const In=zt({name:"Form",inheritAttrs:!1,props:{as:{type:null,default:"form"},validationSchema:{type:Object,default:void 0},initialValues:{type:Object,default:void 0},initialErrors:{type:Object,default:void 0},initialTouched:{type:Object,default:void 0},validateOnMount:{type:Boolean,default:!1},onSubmit:{type:Function,default:void 0},onInvalidSubmit:{type:Function,default:void 0},keepValues:{type:Boolean,default:!1}},setup(e,t){const n=rt(e,"validationSchema"),l=rt(e,"keepValues"),{errors:a,errorBag:u,values:d,meta:v,isSubmitting:f,isValidating:s,submitCount:O,controlledValues:b,validate:S,validateField:V,handleReset:M,resetForm:J,handleSubmit:p,setErrors:q,setFieldError:U,setFieldValue:ae,setValues:ue,setFieldTouched:ne,setTouched:T,resetField:oe}=jn({validationSchema:n.value?n:void 0,initialValues:e.initialValues,initialErrors:e.initialErrors,initialTouched:e.initialTouched,validateOnMount:e.validateOnMount,keepValuesOnUnmount:l}),he=p((F,{evt:L})=>{bt(L)&&L.target.submit()},e.onInvalidSubmit),se=e.onSubmit?p(e.onSubmit,e.onInvalidSubmit):he;function B(F){Xe(F)&&F.preventDefault(),M(),typeof t.attrs.onReset=="function"&&t.attrs.onReset()}function ce(F,L){return p(typeof F=="function"&&!L?F:L,e.onInvalidSubmit)(F)}function me(){return E(d)}function Q(){return E(v.value)}function K(){return E(a.value)}function re(){return{meta:v.value,errors:a.value,errorBag:u.value,values:d,isSubmitting:f.value,isValidating:s.value,submitCount:O.value,controlledValues:b.value,validate:S,validateField:V,handleSubmit:ce,handleReset:M,submitForm:he,setErrors:q,setFieldError:U,setFieldValue:ae,setValues:ue,setFieldTouched:ne,setTouched:T,resetForm:J,resetField:oe,getValues:me,getMeta:Q,getErrors:K}}return t.expose({setFieldError:U,setErrors:q,setFieldValue:ae,setValues:ue,setFieldTouched:ne,setTouched:T,resetForm:J,validate:S,validateField:V,resetField:oe,getValues:me,getMeta:Q,getErrors:K,values:d,meta:v,errors:a}),function(){const L=e.as==="form"?e.as:e.as?xt(e.as):null,Y=tn(L,t,re);return L?Lt(L,Object.assign(Object.assign(Object.assign({},L==="form"?{novalidate:!0}:{}),t.attrs),{onSubmit:se,onReset:B}),Y):Y}}}),Tn=In;export{Tn as F,jn as a,Mn as u};
