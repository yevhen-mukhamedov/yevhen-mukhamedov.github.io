import{d as H,j as U,al as j,a as z,s as O,a0 as s,H as C,w as q,k as K,o as E,B as I,b as i,C as h,f as J,t as Q,g as o,e as R,O as W,c as X,T as Y,ab as Z,V as ee,au as ae,a4 as te,_ as se}from"./7PQ9d4dP.js";import{M as oe,C as S,_ as le}from"./D5X7BfX4.js";import{_ as ne}from"./BwlXDD88.js";import{_ as ie}from"./UCCBr-NG.js";import"./DqC-nx6a.js";import"./BQWyzQZp.js";import"./DD170oM2.js";import"./C3H6epDl.js";import"./D0WEjs_T.js";import"./CXUEa_s4.js";import"./DPPwigSW.js";const re={class:"tw-px-4"},ce={class:"tw-pt-4 game-list-wrap tw-pb-4"},ue={key:0,class:"games-list"},me=H({__name:"SearchModal",setup(pe){const V=U(),k=j(),{t:r}=z(),{getActiveCategory:$}=O(V),{getHiddenBlocks:w}=O(V),N=s("Spins"),l=s(!0),m=s([]),c=s([]),p=s("GamesCasino"),T=s([]),B={type:oe.ACCORDION,style:{accordionContainerClass:"filter-accordion"}},t=s({}),u=s(null),A=C(()=>{var e;return((e=t.value.virtuals)==null?void 0:e.isEnabled)&&!w.value.includes("virtual-sport")}),F=C(()=>{var e;return((e=t.value.tv)==null?void 0:e.isEnabled)&&!w.value.includes("tv-games")}),P=C(()=>{var e;return((e=t.value.crypto)==null?void 0:e.isEnabled)&&!w.value.includes("special_games")}),D=C(()=>{var e,a,d,_,v,b,g,f,y,n;return[{key:"Spins",label:"casino_lobby",icon:"casino",isVisible:(e=t.value.spins)==null?void 0:e.isEnabled,counter:(a=t.value.spins)==null?void 0:a.gamesCount},{key:"LiveGames",label:"live_games",icon:"live_games",isVisible:(d=t.value.live)==null?void 0:d.isEnabled,counter:(_=t.value.live)==null?void 0:_.gamesCount},{key:"Virtuals",label:"virtual_sport",icon:"virtual_games",isVisible:A.value,counter:(v=t.value.virtuals)==null?void 0:v.gamesCount},{key:"TvGames",label:"tv_games",icon:"tv_games",isVisible:F.value,counter:(b=t.value.tv)==null?void 0:b.gamesCount},{key:"TableGames",label:"table_games",icon:"table_games",isVisible:(g=t.value.table)==null?void 0:g.isEnabled,counter:(f=t.value.table)==null?void 0:f.gamesCount},{key:"Poker",label:"poker",icon:"poker",isVisible:!0,counter:(y=t.value.poker)==null?void 0:y.gamesCount},{key:"Crypto",label:"special_games",icon:"special",isVisible:P.value,counter:(n=t.value.crypto)==null?void 0:n.gamesCount}].filter(M=>M.isVisible&&M.counter>0)}),x=()=>{V.setSearchModal(!1)},L=()=>{if(u.value===null){console.error("Filter data is not set");return}const e=[{value:"",text:r("all")},...Object.keys(u.value.provider).map(a=>({value:a,text:u.value.provider[Number(a)]}))];T.value=[{target:"search",componentName:S.SEARCH_INPUT,props:{modelValue:"",classes:"tw-col-span-3",placeholderText:r("search"),isRequired:!0,searchIconSize:24},mobile:{class:"tw-col-span-6"}},{target:"sort",componentName:S.SINGLE_SELECTOR,props:{modelValue:"",additionalLabel:`${r("sort_by")}: `,defaultOption:m.value[0],itemList:m.value,isAllowEmpty:!1},mobile:{redirect:!0}},{target:"provider",componentName:S.SINGLE_SELECTOR,props:{modelValue:"",additionalLabel:`${r("providers")}: `,displayedOption:"text",returnedOption:"value",defaultOption:e[0],itemList:e,isAllowEmpty:!1},mobile:{redirect:!0}},{target:"bonus_buy",componentName:S.TOGGLER_INPUT,props:{modelValue:!1,isLabelShown:!0,classes:"tw-p-2",labelKey:"bonus_buy"},mobile:{redirect:!0}}]},G=async e=>{l.value=!0;try{const{data:a}=await k[`fetch${N.value}`](e);c.value=a.items}catch(a){console.log("SeactModal -> onChangeFilter",a)}finally{l.value=!1}};return q(p,async e=>{N.value=e,l.value=!0;try{const{data:a}=await k[`fetch${e}`]();m.value=a.sort,u.value=a.filters,L(),c.value=a.items}catch(a){console.error("SearchModal -> watch",a)}finally{l.value=!1}}),K(async()=>{try{const{data:e}=await k.fetchSpins({});m.value=e.sort,u.value=e.filters,L(),t.value=$.value,c.value=e.items}catch(e){console.error("SeactModal -> onMounted",e)}finally{l.value=!1}}),(e,a)=>{const d=Z,_=le,v=ne,b=ee,g=ae,f=te,y=ie;return E(),I(Y,{to:"#globalModal"},[i(y,{class:"search-modal","without-bg":"","modal-max-width":"1200px","is-footer":!1,onClose:x},{title:h(()=>[J(Q(o(r)("select_slot_game")),1)]),content:h(()=>[R("div",re,[i(d,{modelValue:o(p),"onUpdate:modelValue":a[0]||(a[0]=n=>W(p)?p.value=n:null),tabs:o(D),type:"secondary",class:"tw-my-4"},null,8,["modelValue","tabs"]),i(_,{"mobile-settings":B,list:o(T),"order-settings":{gridCols:6},onChange:G,onInput:G},null,8,["list"])]),i(f,{loading:o(l),class:"game-list-prewrap"},{default:h(()=>[R("div",ce,[o(c).length?(E(),X("div",ue,[i(b,{"key-name":"games-list",list:o(c),container:!1},{item:h(({item:n})=>[i(v,{game:n,size:"small",onClick:x},null,8,["game"])]),_:1},8,["list"])])):(E(),I(g,{key:1}))])]),_:1},8,["loading"])]),_:1})])}}}),ke=se(me,[["__scopeId","data-v-672832ae"]]);export{ke as default};
