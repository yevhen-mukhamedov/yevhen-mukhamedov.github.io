var E=Object.defineProperty;var m=(i,e,n)=>e in i?E(i,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):i[e]=n;var d=(i,e,n)=>m(i,typeof e!="symbol"?e+"":e,n);class v{constructor(){d(this,"originClient");d(this,"fullMessage");d(this,"publicKey");d(this,"authSign");d(this,"partOfPublicKey");d(this,"accountData");this.originClient="",this.fullMessage="",this.publicKey="",this.authSign="",this.partOfPublicKey="",this.accountData={publicKey:"",address:""}}getAccountKey(){return this.partOfPublicKey}getFullMessage(){return this.fullMessage}getDataForAuth(){return{}}}function P(i){if(i.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let t=0;t<e.length;t++)e[t]=255;for(let t=0;t<i.length;t++){const r=i.charAt(t),l=r.charCodeAt(0);if(e[l]!==255)throw new TypeError(r+" is ambiguous");e[l]=t}const n=i.length,y=i.charAt(0),p=Math.log(n)/Math.log(256),b=Math.log(256)/Math.log(n);function M(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(t.length===0)return"";let r=0,l=0,s=0;const h=t.length;for(;s!==h&&t[s]===0;)s++,r++;const c=(h-s)*b+1>>>0,a=new Uint8Array(c);for(;s!==h;){let o=t[s],w=0;for(let g=c-1;(o!==0||w<l)&&g!==-1;g--,w++)o+=256*a[g]>>>0,a[g]=o%n>>>0,o=o/n>>>0;if(o!==0)throw new Error("Non-zero carry");l=w,s++}let f=c-l;for(;f!==c&&a[f]===0;)f++;let u=y.repeat(r);for(;f<c;++f)u+=i.charAt(a[f]);return u}function A(t){if(typeof t!="string")throw new TypeError("Expected String");if(t.length===0)return new Uint8Array;let r=0,l=0,s=0;for(;t[r]===y;)l++,r++;const h=(t.length-r)*p+1>>>0,c=new Uint8Array(h);for(;t[r];){let o=e[t.charCodeAt(r)];if(o===255)return;let w=0;for(let g=h-1;(o!==0||w<s)&&g!==-1;g--,w++)o+=n*c[g]>>>0,c[g]=o%256>>>0,o=o/256>>>0;if(o!==0)throw new Error("Non-zero carry");s=w,r++}let a=h-s;for(;a!==h&&c[a]===0;)a++;const f=new Uint8Array(l+(h-a));let u=l;for(;a!==h;)f[u++]=c[a++];return f}function U(t){const r=A(t);if(r)return r;throw new Error("Non-base"+n+" character")}return{encode:M,decodeUnsafe:A,decode:U}}var K="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const x=P(K);class C extends v{disconnect(){const e=this.getBrowserProvider();e&&e.disconnect()}async connect(){const e=this.getBrowserProvider();return e?(await e.connect()).publicKey.toString():null}hasUserApp(){var e,n;return window.phantom&&!!((n=(e=window.phantom)==null?void 0:e.solana)!=null&&n.isPhantom)}send(e){const n=this.getBrowserProvider();if(n)return n.signAndSendTransaction(e);throw new Error("Phantom not found")}async signMessage(e){const n=this.getBrowserProvider();if(n){const y=new TextEncoder().encode(e),p=await n.signMessage(y,"utf8");return x.encode(p.signature)}return null}getBrowserProvider(){var e;if("phantom"in window){const n=(e=window.phantom)==null?void 0:e.solana;if(n!=null&&n.isPhantom)return n}return null}}export{C as P,v as W};
