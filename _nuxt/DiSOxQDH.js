import{_ as ke}from"./CXUEa_s4.js";import{d as oe,a as ae,o as r,B as c,b as g,C as p,T as ve,f as ge,t as u,g as o,e as s,X as be,aa as we,j as Ve,s as Ce,a7 as Se,a0 as S,H as v,aq as qe,F as $e,c as P,i as m,aK as Ue,W as Me,O as Pe,h as xe,V as Be,A as Le,_ as Ie}from"./7PQ9d4dP.js";import{F as Te,d as Fe,b as Oe,e as De}from"./BQWyzQZp.js";import{_ as Ae}from"./DqC-nx6a.js";import{c as te,_ as ze}from"./D4aeT6U_.js";import{_ as je}from"./UCCBr-NG.js";import{u as Ee}from"./DD170oM2.js";import"./D0WEjs_T.js";const Ge={class:"tw-flex tw-justify-center tw-items-center tw-p-4"},Re={class:"tw-text-base"},Ke=oe({__name:"AffiliateSuccessModal",props:{title:{},description:{}},emits:["close"],setup(se,{emit:f}){const q=f,{t:$}=ae();return(h,b)=>{const d=je;return r(),c(ve,{to:"#globalModal"},[g(d,{"modal-max-width":"384px","modal-width":"100%",onClose:b[0]||(b[0]=U=>q("close"))},{title:p(()=>[ge(u(o($)(h.title)),1)]),content:p(()=>[s("div",Ge,[s("p",Re,u(h.description),1)])]),_:1})])}}}),He={class:"affiliate"},We={class:"affiliate-wrapper"},Xe={class:"affiliate-title"},Je={class:"affiliate-form"},Qe={key:0},Ye={class:"selected-option"},Ze={class:"simple-option"},et={class:"simple-option-value"},tt={class:"simple-option-label"},ot={class:"simple-option-name"},at={class:"simple-option"},st={class:"simple-option-value"},lt={class:"selected-option"},it={class:"simple-option"},nt={class:"simple-option-value"},rt={class:"simple-option-label"},dt={class:"simple-option-name"},mt={class:"simple-option"},ct={class:"simple-option-value"},ut={class:"selected-option"},pt={class:"simple-option"},_t={class:"simple-option-value"},ft={class:"simple-option-label"},ht={class:"simple-option-name"},yt={class:"simple-option"},Nt={class:"simple-option-value"},kt={key:0},vt=oe({__name:"affiliate-network",setup(se){var L,I,T,F,O;const{t:f}=ae(),q=be(),$=we(),h=new Map(te.map(t=>[t.iso2,t])),b=Ve(),{globalData:d,getCountryCode:U}=Ce(b),le=Se(),{sendAffiliate:ie}=le,w=S(!1),y=S({title:"Success",description:""}),ne=v(()=>{var l;const t=((l=U.value)==null?void 0:l.toLowerCase())??"",n=h.get(t)??null;return n?n==null?void 0:n.phone_code:""}),re=v(()=>{var l;const t=((l=U.value)==null?void 0:l.toLowerCase())??"";return h.get(t)??null??null}),i=S({want_join_membership:!1,bank_account_number:"",agreement:!0,account_holder_name:"",bank_name:"",name:"",phone_code:ne.value,surname:"",email:"",birthday:"",telegram:"",country_code:((L=re.value)==null?void 0:L.iso2.toLowerCase())??"",city:"",currency:"",address:"",zip_code:"",player_code:"",phone:"",ref_code:"",affiliate_system_code:"",affiliate_system_token:"",affiliate_BO_Link:((T=(I=d.value.affiliate_form_settings)==null?void 0:I.affiliate_BO_Link)==null?void 0:T.default)??"link",affiliate_bo_link:((O=(F=d.value.affiliate_form_settings)==null?void 0:F.affiliate_BO_Link)==null?void 0:O.default)??"link",password:""}),x=S({}),V=v({get:()=>{var t,n,l;return h.get(((l=(n=(t=d.value.affiliate_form_settings)==null?void 0:t.country_code)==null?void 0:n.default)==null?void 0:l.toLowerCase())??"")??null},set:t=>{i.value={...i.value,country_code:(t==null?void 0:t.iso2.toUpperCase())??""}}}),de=({phoneCode:t,phone:n})=>{i.value.phone=t+n,i.value.phone_code=t},M=v(()=>Object.entries(x.value).map(([t,n])=>{let l="NgInputText",_=f("error"),C="text";switch(t){case"bank_name":_=f("bank_name_should_be_valid"),l="NgSingleSelector";break;case"commission_plan":l="NGCommissionPlanSelector";break;case"payout_method":l="NGPayoutMethodSelector";break;case"email":_=f("email_should_be_valid"),C="email";break;case"password":l="NgInputPassword";break;case"phone":l="NgPhoneNumber";break;case"password_confirmation":_=f("passwords_should_match"),l="NgInputPassword";break;case"birthday":l="NgDatepicker";break;case"country_code":l="NgCountrySelector";break;case"bank_account_number":l="NgInputNumber";break;case"affiliate_BO_Link":n.required=!1;break}const N=n;return{inputName:t,inputType:C,errorText:_,inputComponent:l,required:N.required,default:N.default,options:N.options}})),B=v(()=>Ee(M.value)),me=async()=>{if(!!await B.value.validate(i.value))try{const n=await ie(Ue(i.value));y.value={title:"Success",description:n.msg},w.value=!0}catch(n){console.log("handlerForm /affiliate-network",n),y.value={title:"Error",description:n.msg},w.value=!0}},ce=t=>{t.includes("https://")?window.open(t,"_blank"):window.open(`https://${t}`,"_blank")},ue=()=>{w.value=!1,y.value.title==="Success"&&$.push(q(Me.main_home))};return qe(async()=>{var t;(t=d==null?void 0:d.value)!=null&&t.affiliate_form_settings&&(x.value=await{...d.value.affiliate_form_settings,password:{required:!0,default:""},password_confirmation:{required:!0,default:""}})},"$lhar9pKME0"),$e({title:"Affiliate network"}),(t,n)=>{const l=ke,_=xe,C=Fe,N=Ae,pe=Oe,_e=ze,fe=De,he=Be,D=Le,ye=Te,Ne=Ke;return r(),P("div",He,[s("div",We,[s("h1",Xe,u(t.$t("sign_up")),1),g(ye,{"validation-schema":o(B),onSubmit:me},{default:p(()=>{var A,z,j,E;return[s("div",Je,[(A=o(M))!=null&&A.length?(r(),c(he,{key:0,list:o(M),"key-name":"transformed-form-field",container:!1},{item:p(({item:e})=>{var k,G,R,K,H,W,X,J,Q,Y,Z,ee;return[e.inputName!=="affiliate_BO_Link"?(r(),P("div",Qe,[e.inputComponent==="NgSingleSelector"?(r(),c(l,{key:0,modelValue:o(i)[e.inputName],"onUpdate:modelValue":a=>o(i)[e.inputName]=a,"displayed-option":"label","returned-option":"id","additional-label":t.$t("bank_name"),placeholder:t.$t("bank_name"),"is-additional-label":!0,"item-list":e.options,"input-name":e.inputName,"is-validated-separately":!1,"is-required":e.required},null,8,["modelValue","onUpdate:modelValue","additional-label","placeholder","item-list","input-name","is-required"])):m("",!0),e.inputComponent==="NGCommissionPlanSelector"?(r(),c(l,{key:1,modelValue:o(i)[e.inputName],"onUpdate:modelValue":a=>o(i)[e.inputName]=a,"default-option":(R=(G=(k=o(d))==null?void 0:k.affiliate_form_settings)==null?void 0:G.commission_plan)==null?void 0:R.values[0],"class-list":"country-selector","item-list":(W=(H=(K=o(d))==null?void 0:K.affiliate_form_settings)==null?void 0:H.commission_plan)==null?void 0:W.values},{"selected-option":p(({props:a})=>[s("div",Ye,[s("div",Ze,[s("div",et,[s("span",tt,u(t.$t(e.inputName)),1),s("span",ot,u(a),1)])])])]),option:p(({props:a})=>[s("div",at,[s("span",st,u(a),1)])]),_:2},1032,["modelValue","onUpdate:modelValue","default-option","item-list"])):m("",!0),e.inputComponent==="NGPayoutMethodSelector"?(r(),c(l,{key:2,modelValue:o(i)[e.inputName],"onUpdate:modelValue":a=>o(i)[e.inputName]=a,"default-option":(Q=(J=(X=o(d))==null?void 0:X.affiliate_form_settings)==null?void 0:J.payout_method)==null?void 0:Q.values[0],"class-list":"country-selector","item-list":(ee=(Z=(Y=o(d))==null?void 0:Y.affiliate_form_settings)==null?void 0:Z.payout_method)==null?void 0:ee.values},{"selected-option":p(({props:a})=>[s("div",lt,[s("div",it,[s("div",nt,[s("span",rt,u(t.$t(e.inputName)),1),s("span",dt,u(a),1)])])])]),option:p(({props:a})=>[s("div",mt,[s("span",ct,u(a),1)])]),_:2},1032,["modelValue","onUpdate:modelValue","default-option","item-list"])):m("",!0),e.inputComponent==="NgCountrySelector"?(r(),c(l,{key:3,modelValue:o(V),"onUpdate:modelValue":n[0]||(n[0]=a=>Pe(V)?V.value=a:null),"default-option":o(V),"class-list":"country-selector","item-list":o(te)},{"selected-option":p(({props:a})=>[s("div",ut,[s("div",pt,[a.iso2?(r(),c(_,{key:0,"is-init-color":!0,name:a.iso2,size:24,folder:"flags",class:"tw-rounded-full tw-overflow-hidden"},null,8,["name"])):m("",!0),s("div",_t,[s("span",ft,u(t.$t("country")),1),s("span",ht,u(a.name),1)])])])]),option:p(({props:a})=>[s("div",yt,[a.iso2?(r(),c(_,{key:0,"is-init-color":!0,name:a.iso2,size:24,folder:"flags",class:"tw-rounded-full tw-overflow-hidden"},null,8,["name"])):m("",!0),s("span",Nt,u(a.name),1)])]),_:1},8,["modelValue","default-option","item-list"])):m("",!0),e.inputComponent==="NgInputPassword"?(r(),c(C,{key:4,modelValue:o(i)[e.inputName],"onUpdate:modelValue":a=>o(i)[e.inputName]=a,classes:"ng-auth-input","placeholder-key":e.inputName,"input-name":e.inputName,"is-validated-separately":!1,"is-required":e.required},null,8,["modelValue","onUpdate:modelValue","placeholder-key","input-name","is-required"])):m("",!0),e.inputComponent==="NgInputText"?(r(),c(N,{key:5,modelValue:o(i)[e.inputName],"onUpdate:modelValue":a=>o(i)[e.inputName]=a,type:e.inputType,"placeholder-text":t.$t(e.inputName),"input-name":e.inputName,"is-validated-separately":!1,"is-required":e.required},null,8,["modelValue","onUpdate:modelValue","type","placeholder-text","input-name","is-required"])):m("",!0),e.inputComponent==="NgInputNumber"?(r(),c(pe,{key:6,modelValue:o(i)[e.inputName],"onUpdate:modelValue":a=>o(i)[e.inputName]=a,"placeholder-key":e.inputName,"input-name":e.inputName,"is-required":e.required,"is-validated-separately":!0,min:8,max:14},null,8,["modelValue","onUpdate:modelValue","placeholder-key","input-name","is-required"])):m("",!0),e.inputComponent==="NgPhoneNumber"?(r(),c(_e,{key:7,modelValue:o(i)[e.inputName],"onUpdate:modelValue":a=>o(i)[e.inputName]=a,type:e.inputType,"placeholder-key":e.inputName,"input-name":e.inputName,"is-validated-separately":!1,"default-code":o(i).phone_code,"is-required":e.required,onChange:de},null,8,["modelValue","onUpdate:modelValue","type","placeholder-key","input-name","default-code","is-required"])):m("",!0),e.inputComponent==="NgDatepicker"?(r(),c(fe,{key:8,modelValue:o(i)[e.inputName],"onUpdate:modelValue":a=>o(i)[e.inputName]=a,type:e.inputType,"label-text":t.$t(e.inputName),"input-name":e.inputName,"is-validated-separately":!1,"is-required":e.required,"input-type":"text","model-type":"yyyy-MM-dd",format:"yyyy-MM-dd"},null,8,["modelValue","onUpdate:modelValue","type","label-text","input-name","is-required"])):m("",!0)])):m("",!0)]}),_:1},8,["list"])):m("",!0)]),(E=(j=(z=o(d))==null?void 0:z.affiliate_form_settings)==null?void 0:j.affiliate_BO_Link)!=null&&E.default?(r(),P("div",kt,[g(D,{class:"link-bo","color-type":"link","label-key":"affiliate_bo","is-with-icon":"","icon-position":"right",onClick:n[1]||(n[1]=e=>{var k;return ce((k=o(d))==null?void 0:k.affiliate_form_settings.affiliate_BO_Link.default)})},{default:p(()=>[g(_,{name:"redirect",size:24})]),_:1})])):m("",!0),s("div",null,[g(D,{classes:"tw-w-full tw-mt-4 tw-flex-shrink-0","color-type":"primary",type:"submit","label-key":o(f)("registration_zimpler_tab")},null,8,["label-key"])])]}),_:1},8,["validation-schema"])]),o(w)?(r(),c(Ne,{key:0,title:o(y).title,description:o(y).description,onClose:ue},null,8,["title","description"])):m("",!0)])}}}),Ut=Ie(vt,[["__scopeId","data-v-08163e25"]]);export{Ut as default};
