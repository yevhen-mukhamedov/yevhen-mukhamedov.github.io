import{d as F,a as L,aM as M,ai as R,aT as G,s as v,j,a0 as k,k as D,aU as x,ar as K,F as W,g as t,o as a,c as r,e,B as p,i as c,t as o,b as _,a1 as y,C as B,W as q,p as H,A as J,h as O,aL as Q,a4 as X,n as C,_ as Y}from"./7PQ9d4dP.js";import{_ as Z}from"./ao6LVzqx.js";import{_ as tt,a as et}from"./Cqh3YmQg.js";import"./Z4E70_i9.js";import"./BQWyzQZp.js";import"./C3H6epDl.js";import"./D0WEjs_T.js";import"./CXUEa_s4.js";import"./Cm3F6K_u.js";import"./BwlXDD88.js";const st={key:0,class:"tw-py-8"},nt={class:"pvp-error"},at={class:"pvp-error-title"},ot={class:"pvp-error-text"},it={key:1,class:"tw-font-bold"},ct={key:1,class:"tw-py-8"},rt={class:"status-bar"},_t={key:0,class:"tw-flex tw-items-center tw-mr-4"},lt={class:"status-bar-items"},mt={class:"status-bar-item"},ut={key:0,class:"tw-mr-4"},pt={class:"tw-flex tw-items-center"},dt={class:"tw-mr-1"},bt={key:0,class:"status-bar-item @tablet:tw-hidden"},wt={class:"tw-mr-4"},yt={class:"tw-flex tw-items-center tw-text-text-brand"},ht={class:"tw-mr-1"},ft={class:"status-bar-item"},gt={key:0,class:"tw-mr-4"},vt={class:"tw-flex tw-items-center"},kt={class:"tw-mr-1"},xt={class:"tw-mr-4 @tablet:tw-hidden"},Bt={class:"tw-flex tw-items-center"},Ct={class:"tw-mr-1"},Tt={class:"tw-mr-4 @tablet:tw-hidden"},It={class:"tw-flex tw-items-center"},Nt={class:"tw-mr-1"},Pt=F({__name:"[id]",setup(St){const{t:l}=L(),{$emitter:h}=M(),T=R(),d=G(),{gameError:i}=v(d),I=j(),{isLessContainerTablet:b,isLessContainerDesktop:N}=v(I),m=k({}),s=k({}),P=n=>{n&&!n.spins_left&&setTimeout(()=>{d.setGameError({title:l("Attentions"),description:l("you_have_no_spins_left"),status:!0,button:{text:l("go_to_lobby"),path:`${q.pvp_battle_lobby}-${s.value.link}`}})},5e3),m.value=n},S=()=>{window.location.reload()};return D(async()=>{const{data:n}=await d.fetchBattleInfo({id:T.params.id});s.value=n,m.value=n.player_data,h.on(x.PVP_BATTLE_STAT,P)}),K(()=>{h.off(x.PVP_BATTLE_STAT)}),W({title:()=>{var n;return((n=s.value)==null?void 0:n.game_name)??"PVP Battle"}}),(n,Et)=>{var f,g;const w=H,E=Z,$=J,u=O,A=tt,U=Q,V=et,z=X;return t(i).status?(a(),r("div",st,[e("section",nt,[t(i).image?(a(),p(w,{key:0,src:t(i).image,alt:"error"},null,8,["src"])):c("",!0),e("h3",at,o(t(i).title),1),e("p",ot,o(t(i).description),1),t(i).amount?(a(),r("span",it,o(t(i).amount),1)):c("",!0),t(i).timer?(a(),p(E,{key:2,id:"bet-amount-error","hidden-days":!0,"hidden-hours":!0,"end-time":t(i).timer*1e3,onCountdownFinished:S},null,8,["end-time"])):c("",!0),(g=(f=t(i))==null?void 0:f.button)!=null&&g.text?(a(),p($,{key:3,"label-key":t(i).button.text,link:t(i).button.path,"is-link":"",class:"pvp-error-btn"},null,8,["label-key","link"])):c("",!0)])])):(a(),r("div",ct,[e("div",rt,[t(N)?c("",!0):(a(),r("div",_t,[_(u,{name:"pvp",size:24,class:"tw-mr-2"}),e("span",null,o(t(l)("pvp_battle")),1)])),e("div",lt,[e("div",mt,[t(b)?c("",!0):(a(),r("span",ut,o(t(l)("bet_amount")),1)),e("span",pt,[e("span",dt,o(t(m).bet_amount),1),_(w,{src:("getCurrencyIconUrl"in n?n.getCurrencyIconUrl:t(C))(t(s).battle_currency),alt:t(s).battle_currency},null,8,["src","alt"])])]),t(b)?c("",!0):(a(),r("div",bt,[e("span",wt,o(t(l)("spins_left")),1),e("span",yt,[e("span",ht,o(t(m).spins_left),1),_(u,{name:"spins",size:16})])])),e("div",ft,[t(s).battle_type==="max_winning"?(a(),r(y,{key:0},[t(b)?c("",!0):(a(),r("span",gt,o(t(l)("winnings")),1)),e("span",vt,[e("span",kt,o(Number(t(m).winnings).toFixed(2)),1),_(w,{src:("getCurrencyIconUrl"in n?n.getCurrencyIconUrl:t(C))(t(s).battle_currency),alt:t(s).battle_currency},null,8,["src","alt"])])],64)):c("",!0),t(s).battle_type==="max_multiplying"?(a(),r(y,{key:1},[e("span",xt,o(t(l)("multiplier")),1),e("span",Bt,[e("span",Ct," x"+o(Number(t(m).max_multiplayer).toFixed(1)),1),_(u,{name:"max_multiplying",folder:"pvp",size:24})])],64)):c("",!0),t(s).battle_type==="consecutive_wins"?(a(),r(y,{key:2},[e("span",Tt,o(t(l)("consecutive_wins")),1),e("span",It,[e("span",Nt,o(t(m).max_consecutive_wins),1),_(u,{name:"consecutive_wins",folder:"pvp",size:24})])],64)):c("",!0)])]),_(A,{class:"tw-ml-auto tw-mr-3",battle:t(s)},null,8,["battle"]),_(U,{"is-link":"","color-type":"secondary",link:{name:"battles-lobby-id",params:{id:t(s).link}}},{default:B(()=>[_(u,{name:"stat",size:20})]),_:1},8,["link"])]),_(z,{loading:!t(s).nux_game_id},{default:B(()=>[t(s).nux_game_id?(a(),p(V,{key:0,"game-id":t(s).nux_game_id,battle:t(s),"stat-info":t(m),"is-battle":""},null,8,["game-id","battle","stat-info"])):c("",!0)]),_:1},8,["loading"])]))}}}),jt=Y(Pt,[["__scopeId","data-v-c8b91c53"]]);export{jt as default};
