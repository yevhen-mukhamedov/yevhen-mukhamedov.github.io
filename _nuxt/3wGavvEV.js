import{V as dt,_ as vt,a8 as ft,i as r,k as yt,o as b,f as I,u as a,x as i,K as S,t as u,X as t,a as e,c as W,T as wt,a6 as bt,$ as zt,W as At,ab as ht,a1 as rt,j as A,p as kt,b as X,ac as qt,ad as lt,ae as _t,af as Rt,a4 as O,ag as Pt,a5 as Nt,ah as Ft,ai as Dt,a2 as jt,a0 as Ht,z as Kt}from"./JoFQSik9.js";import{_ as Qt}from"./K-WBeQ-v.js";import{M as $t,C as q,_ as Ct,a as St}from"./BrvGPcun.js";import{_ as Vt}from"./sQNTZNBq.js";import{_ as Wt}from"./B6i5lCio.js";import{_ as Lt}from"./1-N0yLDQ.js";import{_ as Bt}from"./BQxgWOyN.js";import{_ as gt}from"./Cf_ozb67.js";import{_ as Xt}from"./ChQlXKMR.js";import{_ as Yt}from"./BKAhWZth.js";import{_ as Jt}from"./L3qbADmP.js";import{_ as Zt}from"./B92FZ1g3.js";import{_ as te}from"./C87lQMtF.js";import{F as ee}from"./BM2BYuY2.js";import{_ as Et}from"./Bcnv4IFf.js";import{_ as ae}from"./3N86B1rU.js";import{g as le}from"./BZw8aVXh.js";import"./ClZaf3ID.js";import"./D8aEg3BZ.js";import"./DTX8-FfK.js";import"./DdIClELx.js";import"./Cel6GgYv.js";import"./ElL4sWVy.js";import"./LijCuOwn.js";import"./CXQSc-M8.js";const ne={class:"games-modal-content"},oe={key:0,class:"games-list"},se=dt({__name:"ChooseGameBattleModal",emits:["close","getGame"],setup(Y,{emit:g}){const{t:L}=vt(),G=g,o=ft(),R=r(!0),U=r([]),j=r([]),P={type:$t.ACCORDION},Z=(c,f)=>{const C=[{value:"",text:L("all")},...Object.keys(c.category).map(x=>({value:x,text:c.category[Number(x)]}))],v=[{value:"",text:L("all")},...Object.keys(c.provider).map(x=>({value:x,text:c.provider[Number(x)]}))];j.value=[{target:"search",componentName:q.SEARCH_INPUT,props:{modelValue:""},mobile:{class:"tw-col-span-4"}},{target:"category",componentName:q.SINGLE_SELECTOR,props:{modelValue:"",additionalLabel:`${L("type")}: `,displayedOption:"text",returnedOption:"value",defaultOption:C[0],itemList:C,isAllowEmpty:!1},mobile:{redirect:!0}},{target:"provider",componentName:q.SINGLE_SELECTOR,props:{modelValue:"",additionalLabel:`${L("providers")}: `,displayedOption:"text",returnedOption:"value",defaultOption:v[0],itemList:v,isAllowEmpty:!1},mobile:{redirect:!0}},{target:"sort",componentName:q.SINGLE_SELECTOR,props:{modelValue:"",additionalLabel:`${L("sort_by")}: `,defaultOption:f[0],itemList:f,isAllowEmpty:!1},mobile:{redirect:!0}}]},V=async c=>{R.value=!0;try{const{data:f}=await o.fetchBattleGames(c);U.value=f.items}catch(f){console.log("onChangeFilter ChooseGameBattleModal.vue",f)}finally{setTimeout(()=>{R.value=!1},200)}};return yt(async()=>{try{const{data:c}=await o.fetchBattleGames();U.value=c.items,Z(c.filters,c.sort)}catch(c){console.log("onMounted ChooseGameBattleModal.vue",c)}finally{R.value=!1}}),(c,f)=>{const C=Ct,v=ae,x=Lt,w=Bt,k=gt,M=Et;return b(),I(wt,{to:"#globalModal"},[a(M,{"modal-max-width":"1024px","without-bg":"",onClose:f[0]||(f[0]=B=>G("close"))},{title:i(()=>[S(u(t(L)("select_slot_game")),1)]),content:i(()=>[a(k,{loading:t(R)},{default:i(()=>[e("div",ne,[a(C,{"mobile-settings":P,list:t(j),class:"filters",onChange:V},null,8,["list"]),t(U).length?(b(),W("div",oe,[a(x,{"key-name":"games-list",list:t(U),container:!1},{item:i(({item:B})=>[a(v,{game:B,size:"small","is-linkable":!1,onClick:z=>G("getGame",B)},null,8,["game","onClick"])]),_:1},8,["list"])])):(b(),I(w,{key:1}))])]),_:1},8,["loading"])]),_:1})])}}}),ie=bt(se,[["__scopeId","data-v-bc21bc5b"]]),D=Y=>(Ft("data-v-e73bb46f"),Y=Y(),Dt(),Y),re={key:0},ue={key:0,class:"tw-flex tw-flex-col tw-items-center tw-p-4 tw-pt-6"},ce={class:"tw-mt-4"},me={class:"tw-mt-2"},pe={key:1},_e={class:"input-item tw-mt-0"},de={class:"tw-flex tw-items-center"},ve=["src","alt"],fe={class:"tw-flex tw-flex-col"},ye={class:"ng-multiselect-label"},be={class:"tw-text-text-tertiary tw-mr-[2px]"},ge={class:"tw-flex tw-items-center"},xe=["src","alt"],we={class:"tw-flex tw-flex-col"},he={class:"tw-text-text-tertiary tw-mr-[2px]"},ke={class:"tooltip info"},Ne={class:"input-item"},$e={class:"input-item"},Ce={class:"tw-flex tw-items-center"},Se={class:"tw-flex tw-flex-col"},Ve={class:"ng-multiselect-label"},Le={class:"tooltip info"},Be={class:"input-item"},Ee={class:"tooltip info"},Oe=D(()=>e("br",null,null,-1)),Te=D(()=>e("br",null,null,-1)),Ie={class:"input-item"},Ge={class:"tooltip info"},Ue={class:"input-item"},Me={class:"tooltip info"},ze=D(()=>e("br",null,null,-1)),Ae=D(()=>e("br",null,null,-1)),qe={class:"input-item"},Re={class:"tooltip info"},Pe=D(()=>e("br",null,null,-1)),Fe=D(()=>e("br",null,null,-1)),De={class:"input-item"},je={class:"tooltip info"},He=D(()=>e("br",null,null,-1)),Ke=D(()=>e("br",null,null,-1)),Qe={class:"tw-mt-6 tw-flex tw-justify-center"},We=dt({__name:"CreateBattleModal",emits:["close"],setup(Y,{emit:g}){const L=zt(),G=At(),{t:o}=vt(),R=g,U=ft(),j=ht(),{getTiers:P,getBalance:Z}=rt(j);let V;const c=r(""),f=r(""),C=r(null),v=r(""),x=r(0),w=r(0),k=r(""),M=r(0),B=r(0),z=r(!1),H=r(!1),tt=r(!1),J=r(null),m=r({}),et=r(!0),K=r([]),_=r(!1),p=A(()=>m.value.data.entry_fee_type.map(l=>({value:l,text:o(l.includes("points")?"points":"USD"),currency:l.includes("points")?"/img/GEM.png":le("USD"),balance:l.includes("points")?P.value.points:Z.value}))),h=A(()=>m.value.data.battle_type.map(l=>({value:l,text:o(l)}))),E=A(()=>{var l;return{balance_entry_fee:x.value,battle_entry_time:B.value,battle_type:v.value,entry_fee_type:c.value,game_id:((l=C.value)==null?void 0:l.game_id)??0,is_private:z.value,participant_count:M.value,spins_count:w.value,stake_amount:k.value}}),d=A(()=>m.value.data),N=A(()=>c.value.includes("points")),y=A(()=>N.value?"points":"USD"),at=A(()=>N.value?Number(m.value.data.points_entry_fee.min):Number(m.value.data.balance_entry_fee.min)),ot=A(()=>N.value?Number(m.value.data.points_entry_fee.max):Number(m.value.data.balance_entry_fee.max)),ut=()=>{T(),x.value=at.value},st=l=>{var s;if(f.value=`${l.name} / ${l.soft}`,C.value=l,(s=l.pvp_data)!=null&&s.gameBattleAmount){K.value=l.pvp_data.gameBattleAmount.map(F=>({value:F,text:`${F} ${o(N.value?"points":"USD")}`}));const[$]=l.pvp_data.gameBattleAmount;k.value=$}H.value=!1},ct=async()=>{const{data:l}=await U.createNewBattle(E.value);j.setUserBattle(l),L.push(G({name:"battles-lobby-id",params:{id:l.battle_link}}))},mt=l=>{m.value=l,c.value=m.value.data.entry_fee_type[0],v.value=m.value.data.battle_type[0],x.value=Number(m.value.data.balance_entry_fee.min)??0,w.value=Number(m.value.data.spins_count.min)??0,M.value=Number(m.value.data.participant_range.min)??0,B.value=Number(m.value.data.battle_entry_time),T(),et.value=!1},T=()=>{const l=N.value?m.value.data.points_entry_fee:m.value.data.balance_entry_fee,s={min:m.value.data.min_battle_entry_time,max:m.value.data.battle_entry_time},$=m.value.data.participant_range,F=m.value.data.spins_count;V=qt().shape({balance_entry_fee:lt().min(+l.min).max(+l.max).required(),battle_entry_time:lt().min(+s.min).max(+s.max).required(),battle_type:_t().required(),entry_fee_type:_t().required(),game_id:lt().required(),is_private:Rt(),participant_count:lt().min(+$.min).max(+$.max).required(),spins_count:lt().min(+F.min).max(+F.max).required(),stake_amount:_t().required()})},xt=()=>{var l;if(!((l=C.value)!=null&&l.game_id))return!1;V.validate(E.value).then(()=>{_.value=!0}).catch(()=>{_.value=!1})};return kt(E,()=>{xt()}),yt(async()=>{try{const{data:l}=await U.fetchCreateBattleSettings();mt(l),xt()}catch(l){J.value=l.msg,tt.value=!0,et.value=!1}}),(l,s)=>{const $=Nt,F=Vt,pt=Yt,Q=Jt,Ot=Zt,it=te,Tt=St,It=ee,Gt=gt,Ut=Et,Mt=ie;return b(),W("div",null,[(b(),I(wt,{to:"#globalModal"},[a(Ut,{"modal-max-width":"384px",onClose:s[10]||(s[10]=n=>R("close"))},{title:i(()=>[S(u(t(o)("create_pvp_battle")),1)]),content:i(()=>[a(Gt,{loading:t(et)},{default:i(()=>[t(J)?(b(),W("div",re,[t(tt)?(b(),W("div",ue,[a($,{name:"pvp",size:64,class:"tw-text-text-brand"}),e("div",ce,u(t(o)("sorry_pvp_create_text")),1),e("div",me,u(t(o)("contact_pvp_create_text")),1),a(F,{class:"tw-w-full tw-mt-4","label-key":"contact_support","is-link":!0,link:{name:"tickets-create"}})])):(b(),W("span",pe,u(t(J)),1))])):X("",!0),t(tt)?X("",!0):(b(),I(It,{key:1,class:"create-form",onSubmit:ct},{default:i(()=>[e("div",_e,[a(pt,{modelValue:t(c),"onUpdate:modelValue":s[0]||(s[0]=n=>O(c)?c.value=n:null),"default-option":t(p)[0],"returned-option":"value","item-list":t(p),onChange:ut},{"selected-option":i(({props:n})=>[e("div",de,[e("img",{src:n.currency,alt:n.currency,width:"24",height:"24",class:"tw-mr-2"},null,8,ve),e("div",fe,[e("span",ye,u(t(o)("balance")),1),e("span",null,[S(u(n.balance)+" ",1),e("span",be,u(n.text),1)])])])]),option:i(({props:n})=>[e("div",ge,[e("img",{src:n.currency,alt:n.currency,width:"24",height:"24",class:"tw-mr-2"},null,8,xe),e("div",we,[e("span",null,[S(u(n.balance)+" ",1),e("span",he,u(n.text),1)])])])]),_:1},8,["modelValue","default-option","item-list"]),a(Q,null,{content:i(()=>[e("div",ke,u(t(o)("balance_select_tooltip")),1)]),target:i(()=>[a($,{size:20,name:"info",class:"tw-text-text-tertiary"})]),_:1})]),e("div",Ne,[a(Ot,{modelValue:t(f),"onUpdate:modelValue":s[1]||(s[1]=n=>O(f)?f.value=n:null),"is-required":!0,"is-readonly":!0,"placeholder-text":l.$t("game"),"input-name":"game-id",class:"input-games",onClick:s[2]||(s[2]=n=>H.value=!0)},null,8,["modelValue","placeholder-text"])]),e("div",$e,[a(pt,{modelValue:t(v),"onUpdate:modelValue":s[3]||(s[3]=n=>O(v)?v.value=n:null),"default-option":t(h)[0],"additional-label":t(o)("battle_type"),"returned-option":"value","displayed-option":"text","item-list":t(h)},{"selected-option":i(({props:n})=>[e("div",Ce,[a($,{name:n.value,folder:"pvp",size:24,class:"tw-text-text-tertiary tw-mr-2"},null,8,["name"]),e("div",Se,[e("span",Ve,u(t(o)("battle_type")),1),e("span",null,u(n.text),1)])])]),_:1},8,["modelValue","default-option","additional-label","item-list"]),a(Q,null,{content:i(()=>[e("div",Le,u(t(o)("battle_type_tooltip")),1)]),target:i(()=>[a($,{size:20,name:"info",class:"tw-text-text-tertiary"})]),_:1})]),e("div",Be,[a(it,{modelValue:t(x),"onUpdate:modelValue":s[4]||(s[4]=n=>O(x)?x.value=n:null),"is-required":!0,"placeholder-key":"jackpot_entry_price","suffix-key":t(y),min:+t(at),max:+t(ot),"input-name":"entry-price"},null,8,["modelValue","suffix-key","min","max"]),a(Q,null,{content:i(()=>[e("div",Ee,[S(u(t(o)("jackpot_entry_price_tooltip"))+" ",1),Oe,Te,S(" "+u(t(o)("range"))+": "+u(t(at))+" "+u(t(y))+" - "+u(t(ot))+" "+u(t(y)),1)])]),target:i(()=>[a($,{size:20,name:"info",class:"tw-text-text-tertiary"})]),_:1})]),e("div",Ie,[a(pt,{modelValue:t(k),"onUpdate:modelValue":s[5]||(s[5]=n=>O(k)?k.value=n:null),"default-option":t(K)[0],"is-disabled":!t(K).length,"returned-option":"value","displayed-option":"text","additional-label":t(o)("stake_amount"),placeholder:t(K).length?t(o)("select_stake_amount"):t(o)("select_game"),"item-list":t(K)},null,8,["modelValue","default-option","is-disabled","additional-label","placeholder","item-list"]),a(Q,null,{content:i(()=>[e("div",Ge,u(t(o)("stake_amount_tooltip")),1)]),target:i(()=>[a($,{size:20,name:"info",class:"tw-text-text-tertiary"})]),_:1})]),e("div",Ue,[a(it,{modelValue:t(w),"onUpdate:modelValue":s[6]||(s[6]=n=>O(w)?w.value=n:null),"is-required":!0,min:+t(d).spins_count.min||0,max:+t(d).spins_count.max||0,"placeholder-key":"number_of_spins","input-name":"spins-number"},null,8,["modelValue","min","max"]),a(Q,null,{content:i(()=>[e("div",Me,[S(u(t(o)("number_of_spins_tooltip"))+" ",1),ze,Ae,S(" "+u(`${t(o)("range")}: ${t(d).spins_count.min} - ${t(d).spins_count.max}`),1)])]),target:i(()=>[a($,{size:20,name:"info",class:"tw-text-text-tertiary"})]),_:1})]),e("div",qe,[a(it,{modelValue:t(M),"onUpdate:modelValue":s[7]||(s[7]=n=>O(M)?M.value=n:null),"is-required":!0,min:+t(d).participant_range.min||0,max:+t(d).participant_range.max||0,"placeholder-key":"participants","input-name":"participants"},null,8,["modelValue","min","max"]),a(Q,null,{content:i(()=>[e("div",Re,[S(u(t(o)("participants_tooltip"))+" ",1),Pe,Fe,S(" "+u(`${t(o)("range")}: ${t(d).participant_range.min} - ${t(d).participant_range.max}`),1)])]),target:i(()=>[a($,{size:20,name:"info",class:"tw-text-text-tertiary"})]),_:1})]),e("div",De,[a(it,{modelValue:t(B),"onUpdate:modelValue":s[8]||(s[8]=n=>O(B)?B.value=n:null),"is-required":!0,min:+t(d).min_battle_entry_time||0,max:+t(d).battle_entry_time||0,"placeholder-key":"start_time","suffix-key":"min","input-name":"start-time"},null,8,["modelValue","min","max"]),a(Q,null,{content:i(()=>[e("div",je,[S(u(t(o)("start_time_tooltip"))+" ",1),He,Ke,S(" "+u(`${t(o)("range")}: ${t(d).min_battle_entry_time} ${t(o)("minutes")} - ${t(d).battle_entry_time} ${t(o)("minutes")}`),1)])]),target:i(()=>[a($,{size:20,name:"info",class:"tw-text-text-tertiary"})]),_:1})]),a(Tt,{modelValue:t(z),"onUpdate:modelValue":s[9]||(s[9]=n=>O(z)?z.value=n:null),"input-name":"tournament",name:"tournament","toggle-type":t(Pt).check,class:"tw-mt-4","label-key":"private_tournament"},null,8,["modelValue","toggle-type"]),e("div",Qe,[a(F,{type:"submit","label-key":"create_match","is-disabled":!t(_)},null,8,["is-disabled"])])]),_:1}))]),_:1},8,["loading"])]),_:1})])),t(H)?(b(),I(Mt,{key:0,onClose:s[11]||(s[11]=n=>H.value=!1),onGetGame:st})):X("",!0)])}}}),Xe=bt(We,[["__scopeId","data-v-e73bb46f"]]),Ye={class:"tw-mt-6 tw-pb-16 @tablet:tw-pb-10"},Je={class:"tw-flex tw-items-center fg-title-20-fat"},Ze={class:"battles-tabs"},ta={key:0,class:"battles-list"},nt=300,ea=dt({__name:"index",setup(Y){const{t:g}=vt(),L=jt(),{isLoggedIn:G}=rt(L),{switchUser:o}=L,R=Ht(),{isMultiBalance:U}=rt(R),j=ht(),{getUserBattle:P,getCurrency:Z}=rt(j),V=r(!0),c=r(!1),f=r(!1),C=r(!1),v=r(null),x=ft(),w=r("available"),k=r([]),M=[{key:"available",label:"available"},{key:"active",label:"active"},{key:"completed",label:"completed"}],B=A(()=>!V.value&&v.value&&k.value.length),z=r({}),H=r([]),tt={type:$t.ACCORDION},J=async _=>{V.value=!0,z.value=_;let p={status:w.value,..._};G.value&&(p={...p,my_battles:C.value}),await m(p),setTimeout(()=>{V.value=!1},nt)},m=async(_={},p=!1)=>{p&&(c.value=!0);const{data:h}=await x.fetchBattles(_);return p?k.value.push(...h.items):k.value=h.items,v.value=h.pagination,p&&setTimeout(()=>{c.value=!1},nt),h},et=({filters:_,sort:p})=>{const h=[{value:"",text:g("all")},..._.battle_types.map(y=>({value:y,text:g(y)}))],E=[{value:"",text:g("all")},..._.providers.map(y=>({value:y.id,text:y.name}))],d=[...p.map(y=>({key:y,text:g(y)}))],N=[{value:"",text:g("all")},..._.prize.map(y=>({value:y,text:g(y)}))];H.value=[{target:"q",componentName:q.SEARCH_INPUT,props:{modelValue:""}},{target:"battle_type",componentName:q.SINGLE_SELECTOR,props:{modelValue:"",additionalLabel:`${g("type")}: `,displayedOption:"text",returnedOption:"value",defaultOption:h[0],itemList:h,isAllowEmpty:!1},mobile:{redirect:!0}},{target:"provider",componentName:q.SINGLE_SELECTOR,props:{modelValue:"",additionalLabel:`${g("providers")}: `,displayedOption:"text",returnedOption:"value",defaultOption:E[0],itemList:E,isAllowEmpty:!1},mobile:{redirect:!0}},{target:"prize",componentName:q.SINGLE_SELECTOR,props:{modelValue:"",additionalLabel:`${g("prize")}: `,displayedOption:"text",returnedOption:"value",defaultOption:N[0],itemList:N,isAllowEmpty:!1},mobile:{redirect:!0}},{target:"sort",componentName:q.SINGLE_SELECTOR,props:{modelValue:"default",additionalLabel:`${g("sort_by")}: `,displayedOption:"text",returnedOption:"key",defaultOption:d[0],itemList:d,isAllowEmpty:!1},mobile:{redirect:!0}}]},K=async()=>{var _;c.value=!0,await m({status:w.value,...z.value,page:(_=v.value)==null?void 0:_.next_page},!0),setTimeout(()=>{c.value=!1},nt)};return kt(w,async _=>{V.value=!0,await m({status:_,...z.value}),setTimeout(()=>{V.value=!1},nt)}),yt(async()=>{var h,E,d,N;const{filters:_,sort:p}=await m({status:w.value});et({filters:_,sort:p}),G.value&&U.value&&((h=P.value)==null?void 0:h.player_origin_currency)!==Z.value&&(((E=P.value)==null?void 0:E.battle_status)===1||((d=P.value)==null?void 0:d.battle_status)===2)&&o((N=P.value)==null?void 0:N.player_origin_currency),setTimeout(()=>{V.value=!1},nt)}),(_,p)=>{const h=Nt,E=Qt,d=St,N=Vt,y=Ct,at=Wt,ot=Lt,ut=Bt,st=gt,ct=Xt,mt=Xe;return b(),W("div",Ye,[e("h1",Je,[a(h,{name:"pvp",size:24,class:"tw-text-input-fg tw-mr-2"}),S(" "+u(t(g)("battles")),1)]),e("div",Ze,[a(E,{modelValue:t(w),"onUpdate:modelValue":p[0]||(p[0]=T=>O(w)?w.value=T:null),tabs:M,type:"primary"},null,8,["modelValue"]),t(G)?(b(),I(d,{key:0,modelValue:t(C),"onUpdate:modelValue":p[1]||(p[1]=T=>O(C)?C.value=T:null),name:"is-my-battles","input-name":"myBattles","label-key":"show_my_battles","toggle-position":"right",class:"tw-ms-4 @tablet:tw-ms-0 @tablet:tw-mt-4",onChange:J},null,8,["modelValue"])):X("",!0),t(G)?(b(),I(N,{key:1,"label-key":t(g)("create_battle"),class:"tw-ml-auto @tablet:tw-ml-0 @tablet:tw-w-full @tablet:tw-mt-4",size:"large",onClick:p[2]||(p[2]=T=>f.value=!0)},null,8,["label-key"])):X("",!0)]),a(y,{"mobile-settings":tt,list:t(H),class:"filter-list",onChange:J},null,8,["list"]),a(st,{loading:t(V),class:"tw-mt-6"},{default:i(()=>[t(k).length?(b(),W("div",ta,[a(ot,{"key-name":"battles-list",list:t(k),container:!1},{item:i(({item:T})=>[a(at,{item:T},null,8,["item"])]),_:1},8,["list"])])):(b(),I(ut,{key:1}))]),_:1},8,["loading"]),t(B)?(b(),I(ct,{key:0,item:{total:t(v).total,total_pages:t(v).total,page:t(v).per_page*t(v).page},"item-count":t(k).length,class:"tw-mt-8"},Kt({_:2},[t(v).next_page?{name:"action",fn:i(()=>[a(st,{loading:t(c)},{default:i(()=>[a(N,{"label-key":"show_more","color-type":"secondary",onClick:K})]),_:1},8,["loading"])]),key:"0"}:void 0]),1032,["item","item-count"])):X("",!0),t(f)?(b(),I(mt,{key:1,onClose:p[3]||(p[3]=T=>f.value=!1)})):X("",!0)])}}}),Sa=bt(ea,[["__scopeId","data-v-041d515e"]]);export{Sa as default};
