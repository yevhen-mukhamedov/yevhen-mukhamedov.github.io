import{d as Fe,aa as qe,m as Ee,j as Oe,X as je,ah as We,I as Ae,ax as Ge,bd as He,s as S,a0 as b,H as k,k as Ke,w as Xe,o as a,B as m,b as o,C as w,e as s,t as i,g as e,M as oe,i as r,c as u,U as Ye,a2 as Je,bt as Qe,O as ne,ag as Ze,W as et,f as $,n as z,a1 as tt,aE as st,T as at,E as ot,ak as nt,A as lt,p as it,h as rt,az as ct,V as ut,a4 as dt,Y as _t,_ as mt}from"./7PQ9d4dP.js";import{_ as vt}from"./Cl6uPZ89.js";import{_ as pt}from"./DqC-nx6a.js";import{_ as ft}from"./CXUEa_s4.js";import{_ as gt}from"./D8jXsFdl.js";import{_ as yt}from"./CwMDRuuH.js";import{_ as ht}from"./BwlXDD88.js";import{_ as wt}from"./UCCBr-NG.js";import"./BQWyzQZp.js";import"./DD170oM2.js";import"./D0WEjs_T.js";const kt={class:"tw-flex tw-items-center"},bt={class:"profile"},Ct={class:"user"},St={class:"user-avatar"},$t={key:0,class:"user-info"},It={class:"user-name"},Pt={class:"user-date"},Nt={key:1,class:"user-settings"},Tt={class:"user-settings-actions"},Ut={key:0,class:"tier-progress"},xt={class:"tier-title"},Rt={class:"tier-level"},Bt={key:0},Lt={class:"profile-statistics"},Mt={key:0},Dt={class:"statistics-header"},Vt={class:"statistics-title fg-text-16-fat"},zt={class:"statistics-wrapper"},Ft={key:1,class:"tw-flex tw-flex-col tw-items-center tw-justify-center tw-h-36"},qt={class:"tw-text-text-tertiary tw-mt-4"},Et={key:2},Ot={class:"statistics-header"},jt={class:"statistics-title fg-text-16-fat"},Wt={class:"statistics-wrapper"},At={key:3},Gt={class:"statistics-header"},Ht={class:"statistics-title fg-text-16-fat"},Kt={class:"statistics-bonuses"},Xt={class:"tw-flex"},Yt={class:"bonuses-title"},Jt={key:0,class:"bonuses-progress"},Qt={key:1,class:"bonuses-wager fg-text-14-thin"},Zt={key:4,class:"favorites"},es={class:"favorite-list"},ts=Fe({__name:"ProfileStatistic",setup(ss){const{public:{PLATFORM_ID:le}}=ot(),ie=qe(),R=Ee(),re=Oe(),ce=je(),ue=We(),F=Ae(),q=Ge(),E=He(),{updateShortProfile:de,fetchTotals:_e,openModal:O,closeModal:I}=F,{fetchData:me}=R,{fetchBonuses:ve}=q,{fetchFavouritesCasino:pe}=E,{setWalletModal:fe,setWalletModalTab:ge}=ue,{getAvatar:j,getNickname:P,getUserData:d,getTiers:v,getPaymentP2P:ye}=S(R),{setP2PUserName:he}=R,{isMultiBalance:N}=S(re),{getFavouritesCasino:W}=S(E),{getTotals:B,getAnotherUser:l}=S(F),{getBonuses:A,getActiveBonusCurrency:we}=S(q),T=b(""),h=b(""),y=b(!1),L=b(!1),M=b(null),ke=b({deposit_amount:d.value.deposit_amount,requirement_multiplier:d.value.requirement_multiplier,requirement_amount:d.value.requirement_amount,amount_already_wagered:d.value.amount_already_wagered,remaining_wager:d.value.remaining_wager,withdrawable:d.value.withdrawable,balance:d.value.balance}),C=b(0),G=[{label:"Global",key:0}],D=k(()=>{var n,c;const t=[...G];return(c=(n=B.value)==null?void 0:n.categories)!=null&&c.length?[...t,...B.value.categories]:t}),be=k(()=>{var t;return((t=D.value)==null?void 0:t.find(n=>n.key===C.value))||G[0]}),f=k(()=>{var t;return(t=A.value)!=null&&t.length?A.value.find(n=>n.activated):null}),Ce=k(()=>{var t;return typeof((t=f.value)==null?void 0:t.wager)=="number"}),H=k(()=>{var t;return((t=l.value)==null?void 0:t.user_id)||d.value.user_id}),Se=k(()=>y.value?"photo":"star"),$e=k(()=>{var t,n;return((t=ye.value)==null?void 0:t.enabled)&&l.value&&d.value.user_id!==((n=l.value)==null?void 0:n.user_id)}),K=k(()=>["6ed534e6-fe06-428f-b15f-e769cbbfe1c4","45cab422-ae18-45d9-acde-e0ddead0091a"].includes(le)),Ie=()=>{var t;he((t=l==null?void 0:l.value)==null?void 0:t.username),I(),fe(),ge(nt.p2p)},Pe=()=>{y.value=!y.value,h.value=P.value,T.value=j.value},Ne=t=>{var g;const c=(g=t.target.files)==null?void 0:g[0];if(c){const p=URL.createObjectURL(c),U=new FileReader;U.onload=()=>{URL.revokeObjectURL(p)},T.value=p,M.value=c,U.readAsDataURL(c)}},Te=async()=>{try{const t=new FormData;t.append("nickname",h.value.trim()),M.value&&t.append("avatar",M.value),await de(t),await me(),y.value=!1,h.value=P.value}catch(t){console.error("updateData profile/modals/ProfileStatistic",t)}},Ue=()=>{O(oe.USER_STATISTIC)},X=async()=>{const t={user_id:H.value};C.value&&(t.category_id=C.value),await _e(t)},xe=async()=>{try{L.value=!0,await pe({user_id:H.value}),await X(),await ve()}catch(t){console.error("getData ProfileStatistic",t)}finally{L.value=!1}};return Ke(async()=>{var t;h.value=P.value,T.value=((t=l.value)==null?void 0:t.avatar)||j.value,await xe()}),Xe(ie.currentRoute,()=>{I()}),(t,n)=>{const c=lt,g=it,p=rt,U=vt,Re=pt,Y=ct,Be=ft,J=gt,Q=ut,Le=dt,Me=_t,De=yt,Ve=ht,ze=wt;return a(),m(at,{to:"#globalModal"},[o(ze,{key:"profile-statistic-modal","modal-width":"100%","modal-max-width":"512px","is-footer":!1,class:"profile-modal",onClose:e(I)},{title:w(()=>[s("div",kt,[s("h2",null,i(e(l)?t.$t("user_information"):t.$t("profile")),1),e(l)?r("",!0):(a(),m(c,{key:0,classes:"edit-profile","color-type":"secondary","label-key":t.$t("edit_profile"),onClick:n[0]||(n[0]=V=>e(O)(e(oe).USER_SETTINGS))},null,8,["label-key"]))])]),content:w(()=>{var V,Z,ee,te,se,ae;return[s("div",bt,[s("div",Ct,[s("div",St,[o(g,{src:e(T),class:"user-avatar-img",alt:"avatar"},null,8,["src"]),e(K)?r("",!0):(a(),u("div",{key:0,class:Ye(["user-avatar-icon",{edit:e(y)}])},[e(y)||!e(v).banner?(a(),m(p,{key:0,name:e(Se),size:12},null,8,["name"])):(a(),m(g,{key:1,src:e(v).banner},null,8,["src"])),Je(o(U,{class:"user-avatar-input",accept:".jpg,.jpeg,.png",onInput:Ne},null,512),[[Qe,e(y)]])],2))]),e(y)?(a(),u("div",Nt,[o(Re,{modelValue:e(h),"onUpdate:modelValue":n[2]||(n[2]=_=>ne(h)?h.value=_:null),modelModifiers:{trim:!0},"input-name":"user_name","is-required":!0,"is-validated-separately":"","validation-rules":Ze().required().trim(),onInput:n[3]||(n[3]=_=>h.value=_)},null,8,["modelValue","validation-rules"]),s("div",Tt,[o(c,{"label-key":"cancel","color-type":"secondary",onClick:Pe}),o(c,{"label-key":"save","is-disabled":!e(h).trim(),onClick:Te},null,8,["is-disabled"])])])):(a(),u("div",$t,[s("div",It,[s("p",null,i(((V=e(l))==null?void 0:V.nickname)||e(P)),1),!e(l)&&!e(K)?(a(),u("button",{key:0,class:"user-name-edit",onClick:n[1]||(n[1]=_=>y.value=!e(y))},[o(p,{name:"edit",size:13})])):r("",!0)]),s("div",Pt,[s("p",null,i(t.$t("member_since"))+" "+i(((Z=e(l))==null?void 0:Z.since_date)||((ee=e(d))==null?void 0:ee.member_since)),1),e($e)?(a(),m(c,{key:0,class:"tip-button","color-type":"secondary","is-with-icon":"","icon-position":"left","label-key":t.$t("leave_tip"),onClick:Ie},{default:w(()=>[o(p,{name:"tip",size:20})]),_:1},8,["label-key"])):r("",!0)])]))]),!e(l)&&e(v).level?(a(),u("div",Ut,[s("div",xt,[s("p",null,i(t.$t("your_progress")),1),s("p",null,i(e(v).progress)+"%",1)]),(a(),m(Y,{key:e(v).progress,value:e(v).progress},null,8,["value"])),s("div",Rt,[s("div",null,[o(g,{class:"tier-level--image",src:e(v).banner,alt:"tier icon"},null,8,["src"]),s("p",null,i(e(v).level),1)]),e(v).nextLevel?(a(),u("div",Bt,[o(g,{class:"tier-level--image",src:e(v).nextBanner||e(v).banner,alt:"tier icon"},null,8,["src"]),s("p",null,i(e(v).nextLevel),1)])):r("",!0)])])):r("",!0),s("div",Lt,[s("div",null,[!e(l)||!((te=e(l))!=null&&te.hide_all_statistic)?(a(),u("div",Mt,[s("div",Dt,[s("div",Vt,[o(p,{name:"multi",size:20,class:"tw-text-fg-tertiary"}),s("p",null,i(t.$t("statistic")),1)]),s("div",null,[e(N)?(a(),m(c,{key:0,"label-key":t.$t("show_more"),"icon-position":"right",class:"statistics-showmore fg-text-14-fat","is-with-icon":"",onClick:Ue},{default:w(()=>[o(p,{name:"right",width:18})]),_:1},8,["label-key"])):r("",!0),!e(N)&&((se=e(D))!=null&&se.length)?(a(),m(Be,{key:1,modelValue:e(C),"onUpdate:modelValue":[n[4]||(n[4]=_=>ne(C)?C.value=_:null),X],"item-list":e(D),"default-option":e(be),"displayed-option":"label","returned-option":"key","is-validated-separately":!1},null,8,["modelValue","item-list","default-option"])):r("",!0)])]),o(Le,{loading:e(L),class:"statistic-preloader"},{default:w(()=>[s("div",zt,[o(Q,{list:e(B),container:!1},{item:w(({item:_,index:x})=>[["currency","categories"].includes(x)?r("",!0):(a(),m(J,{key:0,name:x,value:_},null,8,["name","value"]))]),_:1},8,["list"])])]),_:1},8,["loading"])])):(a(),u("div",Ft,[o(p,{name:"hidden",size:80,class:"tw-text-fg-tertiary"}),s("p",qt,i(t.$t("statistic_hidden_by_user")),1)])),e(l)?r("",!0):(a(),u("div",Et,[s("div",Ot,[s("div",jt,[o(p,{name:"wallet",size:20,class:"tw-text-fg-tertiary"}),s("p",null,i(t.$t("wagering_requirements")),1)])]),s("div",Wt,[o(Q,{list:e(ke),container:!1},{item:w(({item:_,index:x})=>[o(J,{name:x,value:_},null,8,["name","value"])]),_:1},8,["list"])])])),e(f)&&!e(l)?(a(),u("div",At,[s("div",Gt,[s("div",Ht,[o(p,{name:"bonuses",size:20,class:"tw-text-fg-tertiary"}),s("p",null,i(t.$t("your_active_bonus")),1)]),e(f)?(a(),m(Me,{key:0,to:e(ce)(e(et).promotions),class:"statistics-showmore fg-text-14-fat"},{default:w(()=>[e(N)?(a(),m(c,{key:0,"label-key":t.$t("show_more"),"icon-position":"right",class:"statistics-showmore fg-text-14-fat","is-with-icon":"",onClick:e(I)},{default:w(()=>[o(p,{name:"right",width:18})]),_:1},8,["label-key","onClick"])):r("",!0)]),_:1},8,["to"])):r("",!0)]),s("div",Kt,[s("div",Xt,[o(g,{src:e(f).banner,alt:"active bonus",class:"bonuses-img"},null,8,["src"]),s("p",Yt,[$(i(t.$t(e(f).name))+" ",1),e(N)?(a(),m(g,{key:0,width:20,height:20,src:("getCurrencyIconUrl"in t?t.getCurrencyIconUrl:e(z))(e(we)),alt:"currency-icon"},null,8,["src"])):r("",!0)])]),e(Ce)?(a(),u("div",Jt,[o(Y,{value:e(f).user_wager,max:e(f).wager},null,8,["value","max"])])):r("",!0),e(f).balance_id===e(d).user_id?(a(),u("div",Qt,[s("div",null,[$(i(t.$t("wager"))+" ",1),s("div",null,[$(i(e(f).user_wager)+" ",1),o(g,{src:("getCurrencyIconUrl"in t?t.getCurrencyIconUrl:e(z))(e(d).currency),alt:"currency icon"},null,8,["src"])])]),s("div",null,[$(i(t.$t("user_wager"))+" ",1),s("div",null,[$(i(e(f).wager-e(f).user_wager)+" ",1),o(g,{src:("getCurrencyIconUrl"in t?t.getCurrencyIconUrl:e(z))(e(d).currency),alt:"currency icon",class:"tw-min-w-4 tw-min-h-4"},null,8,["src"])])])])):r("",!0)])])):r("",!0),(ae=e(W))!=null&&ae.length?(a(),u("div",Zt,[o(De,{"title-key":"casino_favorites","icon-name":"star",class:"tw-font-bold tw-text-lg"}),s("div",es,[(a(!0),u(tt,null,st(e(W).slice(0,3),_=>(a(),m(Ve,{key:_.game_id,game:_},null,8,["game"]))),128))])])):r("",!0)])])])]}),_:1},8,["onClose"])])}}}),vs=mt(ts,[["__scopeId","data-v-4e2df842"]]);export{vs as default};
