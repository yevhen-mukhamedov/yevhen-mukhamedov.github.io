import{_ as H}from"./Bxl7epld.js";import{_ as L}from"./sQNTZNBq.js";import{V as $,a7 as M,_ as O,br as T,a1 as U,i as X,j as h,k as Y,c as n,u,x as S,a as e,t as s,X as t,n as I,b as p,f as z,F as f,r as B,o,aD as C,a5 as G,a6 as J,av as Q}from"./JoFQSik9.js";import{_ as W}from"./Cel6GgYv.js";import{_ as Z}from"./C-hKiTOT.js";import{u as tt}from"./CkHyjaJP.js";import{T as N}from"./CHDbCGUn.js";import{u as et}from"./C9Q4lrjy.js";import"./BMBJnSAB.js";import"./B92FZ1g3.js";import"./BM2BYuY2.js";import"./DJse-9-j.js";import"./56Y_7FHu.js";const st={class:"ticket-header"},at={class:"ticket-header-date"},ot={class:"tw-text-base tw-font-bold tw-me-2"},nt={class:"tw-text-text-brand tw-text-base"},ct={class:"ticket-header-status"},it={class:"messages-list"},rt={class:"tw-flex tw-justify-between fg-main-14-fat"},_t={key:0},lt={key:1},dt={class:"tw-text-text-tertiary tw-text-right fg-main-14-thin"},ut={class:"tw-text-text-secondary fg-main-14-thin tw-mt-2"},pt={key:0,class:"tw-flex tw-flex-wrap tw-gap-2 tw-mt-2"},mt=["href"],kt=["src"],ht={key:0,class:"ticket-thank"},ft={class:"ticket-thank-title"},wt={class:"ticket-thank-desc"},gt={class:"ticket-thank-desc"},yt=$({__name:"SingleTicket",props:{ticketId:{}},setup(w){const i=M(),m=w,{t:a}=O(),g=T(),{ticket:r}=U(g),{fetchSingleTicket:V}=T(),y=X(!0),{setBreadcrumbs:j}=tt();j([{label:a("support"),path:"/tickets"},{label:`${a("ticket_capitalize")} #${i.params.id.toString()}`}]);const k=h(()=>N[r.value.status]),D=h(()=>_=>Object.values(N).find(l=>l.name===_)),E=h(()=>"status-"+k.value.name),F=async()=>{await g.closeTicket(m.ticketId)};return Y(async()=>{await V({ticket_id:m.ticketId,page:1})}),(_,l)=>{var x,b,v;const R=H,K=L,P=G,q=W,A=Z;return o(),n(f,null,[u(R,{"title-key":"ticket_capitalize","icon-name":"contact-us"},{additionalTitle:S(()=>[e("span",null,"#"+s(_.ticketId),1)]),_:1}),e("div",st,[e("div",at,[e("span",ot,s(t(a)("date_created"))+":",1),e("span",nt,s(t(C)(t(r).created_at)),1)]),e("div",ct,[e("span",null,s(t(a)("status"))+":",1),t(k)?(o(),n("div",{key:0,class:I(["tw-p-1 tw-rounded fg-main-12-fat tw-text-text-dark",t(E)])},s(t(a)(t(k).titleKey??"")),3)):p("",!0)]),t(r).status!==((x=t(D)("closed"))==null?void 0:x.status)?(o(),z(K,{key:0,"label-key":"close_ticket","color-type":"outline",class:"ticket-header-button",onClick:F})):p("",!0)]),e("div",it,[(o(!0),n(f,null,B((b=t(r).messages)==null?void 0:b.data,c=>(o(),n("div",{key:c.id,class:I(["message-wrapper",{"message-wrapper--support":c.author===2}])},[e("div",rt,[c.author===1?(o(),n("span",_t,s(t(a)("me")),1)):(o(),n("span",lt,s(t(a)("support_manager")),1)),e("div",dt,s(t(C)(c.created_at)),1)]),e("div",ut,s(c.content),1),c.attachments.length?(o(),n("div",pt,[(o(!0),n(f,null,B(c.attachments,d=>(o(),n("a",{key:d.id,href:d.url,target:"_blank",class:"attachment-img"},[e("img",{src:d.url,alt:"attachment img"},null,8,kt),e("span",null,s(d.name),1)],8,mt))),128))])):p("",!0)],2))),128))]),(v=t(i).query)!=null&&v.new&&t(y)?(o(),n("div",ht,[u(q,{class:"ticket-thank-btn","color-type":"outlined",onClick:l[0]||(l[0]=c=>y.value=!1)},{default:S(()=>[u(P,{name:"close",size:12})]),_:1}),e("h2",ft,s(t(a)("thank_you_for")),1),e("p",wt,s(t(a)("we_appreciate")),1),e("p",gt,s(t(a)("while_we_do_our_best")),1)])):p("",!0),u(A,{"ticket-id":_.ticketId},null,8,["ticket-id"])],64)}}}),xt=J(yt,[["__scopeId","data-v-11d8967b"]]),Et=$({__name:"[id]",setup(w){return et(),(i,m)=>{const a=xt;return o(),z(a,{"ticket-id":(i._.provides[Q]||i.$route).params.id},null,8,["ticket-id"])}}});export{Et as default};
