import D from"./CaQrbSZi.js";import{M as H,C as v,_ as W}from"./D5X7BfX4.js";import{_ as j}from"./BwlXDD88.js";import{d as z,a as K,ax as J,s as w,ai as Q,j as X,a7 as Y,a0 as u,H as x,aq as Z,k as ee,F as te,o as r,c as h,g as a,B as L,i as m,b as i,C as S,U as oe,V as ae,at as se,aa as ne,W as re,A as ie}from"./7PQ9d4dP.js";import ce from"./DsWuZN3f.js";import"./ao6LVzqx.js";import"./Z4E70_i9.js";import"./Do2gu6g3.js";import"./UCCBr-NG.js";import"./D0WEjs_T.js";import"./DqC-nx6a.js";import"./BQWyzQZp.js";import"./DD170oM2.js";import"./C3H6epDl.js";import"./CXUEa_s4.js";import"./DPPwigSW.js";const le={class:"tw-mt-10 tw-mb-20"},ue={key:1,class:"tw-my-8"},me={key:2,class:"tw-mt-8"},ke=z({__name:"[id]",setup(pe){const{t:n}=K(),p=J(),{getCurrentBonus:c}=w(p),d=Q(),A=X(),N=Y(),{isLeaderBoard:k}=w(A),{isLoggedIn:I}=w(N),f=u([]),s=u([]),o=u(null),C=u({}),R={type:H.ACCORDION,style:{accordionContainerClass:"tw-flex tw-flex-col tw-gap-4"}},E=x(()=>{var e,t;return((t=(e=c.value)==null?void 0:e.info)==null?void 0:t.categories)||[]}),O=x(()=>{var e,t;return((t=(e=c.value)==null?void 0:e.info)==null?void 0:t.providers)||[]}),G=()=>{f.value=[{target:"search",componentName:v.SEARCH_INPUT,props:{placeholderText:n("search"),isRequired:!0,modelValue:"",classes:"tw-col-span-4"},mobile:{class:"tw-col-span-6"}},{target:"category",componentName:v.SINGLE_SELECTOR,props:{modelValue:"",additionalLabel:`${n("categories")}: `,placeholder:n("categories"),displayedOption:"category",returnedOption:"id",isAllowEmpty:!0,itemList:E.value,classList:"tw-col-span-1"},mobile:{redirect:!0}},{target:"provider",componentName:v.SINGLE_SELECTOR,props:{modelValue:"",additionalLabel:`${n("providers")}: `,placeholder:n("providers"),displayedOption:"soft",returnedOption:"id",isAllowEmpty:!0,itemList:O.value,classList:"tw-col-span-1"},mobile:{redirect:!0}}]},B=async e=>{C.value={...e,category:e.category?[e.category]:void 0,provider:e.provider?[e.provider]:void 0},s.value=[],o.value.current_page=1,await g()},P=async()=>{o.value.page=+o.value.next_page,await g()},M=e=>{e&&Array.isArray(e)&&(s.value=[...s.value,...e])},g=async()=>{var e;try{const t=await p.getBonusGames(+d.params.id,{...C.value,...o.value});if(M(t.data.items),o.value=t.data.pagination,!((e=o.value)!=null&&e.next_page))return;const _=new URL(o.value.next_page.toString()),l=new URLSearchParams(_.search);if(!l.has("page"))return;const y=l.get("page");o.value={...o.value,next_page:y}}catch(t){console.error("getGames pages/bonus-wagering/[id].vue",t)}},T=async()=>{try{await p.getBonusById(+d.params.id,!0)}catch(e){console.error("getBonusByIdCallAction pages/bonus-wagering/[id].vue",e),e.error_code===417&&ne().push({path:re.promotions})}};return Z("getBonusByIdCallAction",async()=>await T(),{watch:[I]}),ee(async()=>{d.params.id&&(await g(),G())}),te({title:"Bonus Wager"}),(e,t)=>{var b;const _=D,l=W,y=j,$=ae,F=ie,U=se,V=ce;return r(),h("div",le,[a(c)?(r(),L(_,{key:0,bonus:a(c)},null,8,["bonus"])):m("",!0),i(l,{class:"tw-mt-4",list:a(f),"order-settings":{gridCols:6},"mobile-settings":R,onChange:B,onInput:B},null,8,["list"]),a(s).length?(r(),h("section",ue,[i($,{"key-name":"leader-board-tab","key-identify":"game_id",list:a(s),class:oe(["ng-casino-recent-grid","ng-casino-recent-grid-activity"])},{item:S(({item:q})=>[i(y,{class:"tw-mt-1",game:q},null,8,["game"])]),_:1},8,["list"]),(b=a(o))!=null&&b.next_page?(r(),L(U,{key:0,"class-list":"tw-my-8","item-count":a(s).length,item:a(o)},{action:S(()=>[i(F,{"label-key":"show_more","color-type":"outline",class:"content-btn",onClick:P})]),_:1},8,["item-count","item"])):m("",!0)])):m("",!0),a(k)?(r(),h("section",me,[i(V)])):m("",!0)])}}});export{ke as default};
