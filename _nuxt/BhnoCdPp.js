import{_ as Y}from"./CXUEa_s4.js";import{_ as de}from"./D4aeT6U_.js";import{_ as Z}from"./DqC-nx6a.js";import{b as ce}from"./BQWyzQZp.js";import{_ as ee}from"./DbDzaoeP.js";import{d as G,j as K,ah as _e,m as te,s as z,a0 as g,H as U,k as ae,o as _,c as M,g as t,t as V,i as x,e as w,B,C as L,O as P,b as E,ag as Q,U as me,w as pe,f as ue,bN as X,bj as he,a1 as fe,aE as ge,a2 as ye,bk as we,b6 as be}from"./7PQ9d4dP.js";import{c as ie}from"./Dty3woGA.js";import{_ as ve}from"./r5J4__cq.js";const Ve={key:0,class:"tw-mb-4"},Ce={class:"tw-flex tw-items-center tw-gap-1"},ke={class:"tw-flex tw-flex-col"},xe={class:"fg-main-12-regular tw-text-text-tertiary"},$e={class:"tw-flex tw-flex-col"},Ne={class:"fg-main-12-regular tw-text-text-tertiary"},Fe=G({__name:"WithdrawalsCryptoBlock",props:{provider:{type:Object,default:()=>{}}},emits:["input","update:modelValue"],setup(O,{emit:q}){const k=O,i=K(),p=_e(),W=te(),{isMultiBalance:h}=z(i),{getCurrency:T}=z(W),I=q,S=g(""),b=g(""),N=g(""),s=g(""),c=g([]),A=g(0),n=g(!1),C=U(()=>{var a;return!((a=k.provider)!=null&&a.only)}),u=U(()=>!h.value||C.value),d=U(()=>h.value?y.value.length:c.value.length),F=U(()=>h.value?C.value?S.value:b.value?b.value:T.value:S.value),y=U(()=>{var r,v;return(v=(r=k.provider)==null?void 0:r.extra)!=null&&v.standards?Object.keys(k.provider.extra.standards).map(l=>{var $,m,H,ne,oe,re,le,se;return{label:(m=($=k.provider)==null?void 0:$.extra)==null?void 0:m.standards[l].tokenStandard,code:((ne=(H=k.provider)==null?void 0:H.extra)==null?void 0:ne.standards[l].token)+"."+((re=(oe=k.provider)==null?void 0:oe.extra)==null?void 0:re.standards[l].tokenStandard),value:(se=(le=k.provider)==null?void 0:le.extra)==null?void 0:se.standards[l].identifier}}):c.value}),f=U(()=>y.value.length?y.value:c.value),j=U(()=>{var a,r,v;return(v=(r=(a=k.provider)==null?void 0:a.extra)==null?void 0:r.tagged_currencies)==null?void 0:v.includes(F.value)}),D=U(()=>({currency:u.value?S.value||T.value:b.value||T.value,token:b.value,address:N.value,tag:s.value,amount:A.value})),R=async()=>{n.value=!0;try{const a={id:k.provider.id,currency:b.value?b.value:F.value},{data:r}=await p.fetchDepositCryptoData(a);N.value=r.address,s.value=r.tag?r.tag:""}catch(a){console.log(a)}finally{n.value=!1,e()}},o=()=>{b.value="",c.value=[],R()},e=()=>{I("update:modelValue",D.value),I("input",D.value)};return ae(()=>{y.value.length&&(b.value=y.value[0].code),R()}),(a,r)=>{const v=Y,l=ee,$=Z;return _(),M("div",null,[t(d)||!t(h)?(_(),M("p",Ve,V(a.$t("choose_currency_and_standard")),1)):x("",!0),w("div",{class:me(["tw-grid tw-gap-4 tw-justify-center",[t(d)&&t(u)?"tw-grid-cols-2":"tw-grid-cols-1"]])},[t(u)?(_(),B(v,{key:0,modelValue:t(S),"onUpdate:modelValue":r[0]||(r[0]=m=>P(S)?S.value=m:null),"item-list":O.provider.extra.currency_list,"default-option":O.provider.extra.currency_list[0],"modal-overflow":!0,onChange:o},{"selected-option":L(({props:m})=>[w("div",Ce,[w("div",ke,[w("span",xe,V(a.$t("currency")),1),w("span",null,V(m),1)])])]),_:1},8,["modelValue","item-list","default-option"])):x("",!0),t(d)?(_(),B(v,{key:1,modelValue:t(b),"onUpdate:modelValue":r[1]||(r[1]=m=>P(b)?b.value=m:null),"item-list":t(f),"returned-option":"code","displayed-option":"code","default-option":t(f)[0],"modal-overflow":!0,onChange:R},{"selected-option":L(({props:m})=>[w("div",$e,[w("span",Ne,V(a.$t("network")),1),w("span",null,V(m.label),1)])]),_:1},8,["modelValue","item-list","default-option"])):x("",!0),E(l,{amount:t(A),"onUpdate:amount":r[2]||(r[2]=m=>P(A)?A.value=m:null),provider:O.provider,onInput:e},null,8,["amount","provider"]),E($,{modelValue:t(N),"onUpdate:modelValue":r[3]||(r[3]=m=>P(N)?N.value=m:null),"input-name":"address","placeholder-text":a.$t("address"),"is-required":"","is-validated-separately":"","validation-rules":Q().required().trim(),onInput:e},null,8,["modelValue","placeholder-text","validation-rules"]),t(j)?(_(),B($,{key:2,modelValue:t(s),"onUpdate:modelValue":r[4]||(r[4]=m=>P(s)?s.value=m:null),"input-name":"tag","placeholder-text":a.$t("tag"),"is-required":"","is-validated-separately":"","validation-rules":Q().required().trim(),onInput:e},null,8,["modelValue","placeholder-text","validation-rules"])):x("",!0)],2)])}}}),Se={key:0,class:"tw-p-2 tw-bg-bg-secondary tw-flex tw-flex-col tw-gap-2"},Ue={key:0},qe={key:1},J=".",Te=G({__name:"FeeBlock",props:{provider:{},amount:{},currency:{},amountData:{}},emits:["input"],setup(O,{emit:q}){const k=te(),i=K(),{getCurrency:p}=z(k),{getCryptoNumberOfDecimals:W}=i,h=o=>o.includes(J),T=(o,e)=>e?o+J+e:o,I=o=>{const e={ETH:"ERC20",TRX:"TRC20",BNB:"BEP20"};return o in e?e[o]:null},S=o=>o.split(J)[0],b=(o,e=null,a)=>{if(!a)return null;e=I(e??"");const r=h(o);let v;r?v=o:v=T(o,e??"");const l=a.data[a.all_sign]!==void 0,$=a.data[v]!==void 0;if(!l&&!$)return null;let m=null;return l&&(m=a.data[a.all_sign]),$&&(m=a.data[v]),m},N=(o,e,a)=>(o=Math.abs(o),e.type===a.percent?e.feeValue/100*o:e.type===a.userCurrency?e.feeValue:0),s=O,c=q,A=g(0),n=g(0),C=g(0),u=g(null),d=g(0),F=g({}),y=g({percent:""}),f=U(()=>{var o;return s.provider.extra&&s.provider.extra.fee&&d.value&&((o=s.amountData)==null?void 0:o.amount)}),j=U(()=>s.provider.extra.rates),D=(o,e,a,r="amount")=>{var $,m;let v=0,l;switch(r){case"amount":l=($=a[e])==null?void 0:$.pxrecision,v=X(o,Number(l));break;case"fullAmount":l=(m=a[e])==null?void 0:m.precision,v=X(o,W);break;case"stake":break;default:throw new Error("Unknown type")}return v},R=(o,e)=>{const a=K(),{getFiatNumberOfDecimals:r}=z(a);return X(o,e||r.value)};return pe(()=>s.amountData,o=>{const{amount:e}=o;if(!e)return;const a=b(o.currency,o.network,F.value);if(!a)return;let r=N(o.amount,a,y.value);u.value=a.type,u.value===y.value.percent&&(C.value=a.feeValue);const v=S(o.currency),l=p.value,$=ie(r,v,l,j.value),m=ie(e,v,l,j.value);r=D(r,v,j.value),n.value=Number($);const H=Number(m)-Number($);A.value=H<0?0:R(H,W),d.value=r??0,c("input",{fee:d,userFee:$})},{deep:!0}),ae(()=>{F.value=s.provider.extra.fee,F.value&&(y.value=F.value.types)}),(o,e)=>t(f)?(_(),M("div",Se,[w("div",null,[ue(V(o.$t("fee"))+": ",1),t(u)===t(y).percent?(_(),M("span",Ue,V(t(C))+"% ("+V(t(n))+" "+V(t(p))+") ",1)):(_(),M("span",qe,V(t(n))+" "+V(t(p)),1))]),w("div",null,[ue(V(o.$t("total_withdrawal_amount"))+": ",1),w("span",null,V(t(A))+" "+V(t(p)),1)])])):x("",!0)}}),Be={class:"withdrawal-common-container ng-filter-panel"},We={key:0},Ae={class:"withdrawal-common-option ng-input-text active selected"},Me={class:"input-placeholder multi-selector-counted-label"},Oe={class:"tw-pt-4"},Ee={class:"withdrawal-common-option"},Ie=["onUpdate:modelValue","name"],Pe=G({__name:"WithdrawalCommon",props:{provider:{}},setup(O){const q=g({});let k=[];const i=g({}),p=g([]),W=g([]),h=g({}),T=O,I=U(()=>!0),S=U(()=>!!(W.value.includes("crypto")&&!h.value.crypto)),b=(n,C)=>{var u;if(n.visible_control)for(const d in h.value)h.value[d]=n.visible_control[d]!==C,h.value[d]?i.value[d]=void 0:(u=q.value[d].list)!=null&&u.length?i.value[d]=q.value[d].list[0].code:i.value[d]=null},N=n=>["amount"].includes(n),s=n=>{i.value.phone=n.phone,i.value.phone_code=n.phoneCode},c=(n,C)=>{const{parentFieldValidation:u,validate:d}=n;return u&&d&&C&&d[C]?d[C].mask||"":n.mask||""},A=n=>{let u=n.name==="phone"||String(n.name).includes("mobile")?be().typeError("field should be a number"):Q();return n.length&&!n.validate&&(u=u.max(n.length)),n.name==="email"&&(u=u.email("invalid email address")),n.required&&(u=u.required("field is required")),u};return ae(()=>{const{allFields:n,requiredFields:C,fieldFormat:u,fieldVariables:d,hiddenFields:F}=he(T.provider);k=u,q.value=k,Object.keys(d).forEach(y=>{F[y]||(i.value[y]=d[y])}),p.value=C,W.value=n,h.value=F}),(n,C)=>{const u=Y,d=de,F=Z,y=ce,f=ee,j=Fe,D=Te,R=ve;return _(),B(R,{"filed-values":t(i),provider:n.provider,"is-form-valid":t(I)},{default:L(()=>{var o;return[w("div",Be,[(_(!0),M(fe,null,ge(t(q),(e,a,r)=>{var v;return _(),M("div",{key:`${r}${a}`,class:me({"tw-hidden":e.type==="hidden"||t(h)[e.name]})},[!t(S)&&!t(h)[e.name]?(_(),M("div",We,[e.type==="array"?(_(),B(u,{key:0,modelValue:t(i)[a],"onUpdate:modelValue":l=>t(i)[a]=l,"item-list":e.list,"returned-option":"code","default-option":e.list[0],"is-disabled":e.disabled,"modal-overflow":!0,onChange:l=>b(e,t(i)[a])},{"selected-option":L(({props:{label:l}})=>[w("div",Ae,[w("span",Me,V(n.$t(e.name))+":",1),w("span",Oe,V(n.$t(l.toLowerCase().replace(".","_"))),1)])]),option:L(({props:{label:l}})=>[w("div",Ee,V(n.$t(l.toLowerCase().replace(".","_"))),1)]),_:2},1032,["modelValue","onUpdate:modelValue","item-list","default-option","is-disabled","onChange"])):x("",!0),e.type==="phone"?(_(),B(d,{key:1,onChange:s})):x("",!0),e.type==="string"&&!N(e.name)?(_(),B(F,{key:2,modelValue:t(i)[a],"onUpdate:modelValue":l=>t(i)[a]=l,"input-name":e.name,"placeholder-text":n.$t(e.name),"is-disabled":e.disabled,"is-required":e.required,"is-validated-separately":"","validation-rules":A(e),mask:c(e,(v=t(i)[e.parentFieldValidation])==null?void 0:v.toLowerCase()),regex:e.regex||""},null,8,["modelValue","onUpdate:modelValue","input-name","placeholder-text","is-disabled","is-required","validation-rules","mask","regex"])):x("",!0),e.type==="numeric"&&!N(e.name)?(_(),B(y,{key:3,modelValue:t(i)[a],"onUpdate:modelValue":l=>t(i)[a]=l,"placeholder-key":e.name,disabled:e.disabled,min:n.provider.min_limit,max:n.provider.max_limit,"is-required":e.required},null,8,["modelValue","onUpdate:modelValue","placeholder-key","disabled","min","max","is-required"])):x("",!0),a==="amount"?(_(),B(f,{key:4,amount:t(i)[a],"onUpdate:amount":l=>t(i)[a]=l,provider:n.provider},null,8,["amount","onUpdate:amount","provider"])):x("",!0)])):x("",!0),e.type==="component"&&e.name==="crypto"&&!t(h)[e.name]?(_(),B(j,{key:1,modelValue:t(i)[a],"onUpdate:modelValue":l=>t(i)[a]=l,provider:n.provider},null,8,["modelValue","onUpdate:modelValue","provider"])):x("",!0),e.type==="hidden"&&!N(e.name)?ye((_(),M("input",{key:2,"onUpdate:modelValue":l=>t(i)[a]=l,name:a,type:"hidden"},null,8,Ie)),[[we,t(i)[a]]]):x("",!0)],2)}),128))]),(o=n.provider.extra)!=null&&o.fee?(_(),B(D,{key:0,provider:n.provider,"amount-data":n.amountData,onInput:n.setComponentData},null,8,["provider","amount-data","onInput"])):x("",!0)]}),_:1},8,["filed-values","provider","is-form-valid"])}}}),tt=Object.freeze(Object.defineProperty({__proto__:null,default:Pe},Symbol.toStringTag,{value:"Module"})),je={class:"withdrawal-manual-c2c-container tw-flex tw-flex-col tw-gap-4"},Re=["innerHTML"],De={class:"tw-flex tw-gap-2 tw-items-end"},Le={key:0,class:"tw-flex tw-flex-col tw-gap-2 tw-min-w-24"},He={class:"tw-text-white tw-font-bold tw-text-base"},ze=G({__name:"WithdrawalManualC2CSaveField",props:{provider:{},error:{}},setup(O){var S,b,N;const q=O,k=te(),{getCurrency:i}=z(k),p=g({amount:0,converted_amount:0,converted_currency:((b=(S=q.provider.extra_data)==null?void 0:S.selected_currencies[0])==null?void 0:b.code)||i.value,name:"",address:"",bank:((N=q.provider.extra_data)==null?void 0:N.bank)||"",actual_name:"",cellphone_number:""}),W=g(""),h=g(q.provider.extra_data.selected_currencies[0]),T=U(()=>h.value&&h.value.exact_value?(Number(p.value.amount)/Number(h.value.exact_value)).toFixed(2):p.value.amount),I=s=>{p.value.cellphone_number=`${s.phoneCode}${s.phone}`};return pe(()=>T.value,s=>{p.value.converted_amount=Number(s)}),(s,c)=>{const A=ee,n=ce,C=Y,u=Z,d=de,F=ve;return _(),B(F,{"filed-values":t(p),provider:s.provider,"is-form-valid":!0},{default:L(()=>{var y;return[w("div",je,[(y=s.provider.extra)!=null&&y.text?(_(),M("div",{key:0,class:"disclaimer-container fg-main-14-regular",innerHTML:s.provider.extra.text},null,8,Re)):x("",!0),E(A,{amount:t(p).amount,"onUpdate:amount":c[0]||(c[0]=f=>t(p).amount=f),provider:s.provider},null,8,["amount","provider"]),w("div",De,[E(n,{modelValue:t(T),"onUpdate:modelValue":c[1]||(c[1]=f=>P(T)?T.value=f:null),"input-name":"converted_amount","label-key":"converted_amount","is-label-shown":"","is-required":"","is-readonly":""},null,8,["modelValue"]),s.provider.extra_data.selected_currencies?(_(),M("div",Le,[w("span",He,V(s.$t("currency")),1),E(C,{modelValue:t(h),"onUpdate:modelValue":c[2]||(c[2]=f=>P(h)?h.value=f:null),"item-list":s.provider.extra_data.selected_currencies,"default-option":s.provider.extra_data.selected_currencies[0],"displayed-option":"code","modal-overflow":!0},null,8,["modelValue","item-list","default-option"])])):x("",!0)]),E(u,{modelValue:t(p).name,"onUpdate:modelValue":c[3]||(c[3]=f=>t(p).name=f),"input-name":"name","is-required":"","placeholder-text":s.$t("account_name")},null,8,["modelValue","placeholder-text"]),E(u,{modelValue:t(p).address,"onUpdate:modelValue":c[4]||(c[4]=f=>t(p).address=f),"input-name":"address","is-required":"","placeholder-text":s.$t("address_account_number")},null,8,["modelValue","placeholder-text"]),E(u,{modelValue:t(p).bank,"onUpdate:modelValue":c[5]||(c[5]=f=>t(p).bank=f),"input-name":"bank","is-required":"","placeholder-text":s.$t("bank_name")},null,8,["modelValue","placeholder-text"]),E(u,{modelValue:t(p).actual_name,"onUpdate:modelValue":c[6]||(c[6]=f=>t(p).actual_name=f),"input-name":"actual_name","is-required":"","placeholder-text":s.$t("actual_name")},null,8,["modelValue","placeholder-text"]),E(d,{modelValue:t(W),"onUpdate:modelValue":c[7]||(c[7]=f=>P(W)?W.value=f:null),"input-name":"phone","placeholder-key":"cellphone_number","is-required":"",onChange:I},null,8,["modelValue"])])]}),_:1},8,["filed-values","provider"])}}}),at=Object.freeze(Object.defineProperty({__proto__:null,default:ze},Symbol.toStringTag,{value:"Module"}));export{tt as W,at as a};
