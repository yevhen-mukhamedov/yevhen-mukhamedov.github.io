import{d as de,I as fe,a7 as Le,s as X,m as be,a as ke,j as ze,H as E,a0 as f,ag as J,bl as qe,aV as je,k as ue,l as Oe,o as i,B as c,C as O,e as s,t as y,g as e,b as l,i as w,O as D,c as M,h as ge,A as $e,V as Ke,a4 as Ae,_ as ce,a9 as He,U as Ie,aL as Re,aM as Ye,J as Je,bG as We,w as Ze,a1 as Fe,K as Qe,p as Xe,T as et,ab as tt}from"./7PQ9d4dP.js";import{c as Be,_ as Ve,e as st,d as at}from"./BQWyzQZp.js";import{_ as xe}from"./DqC-nx6a.js";import{c as he,_ as lt}from"./D4aeT6U_.js";import{_ as De}from"./CXUEa_s4.js";import{_ as ot}from"./sLJFuQGL.js";import{_ as Ee}from"./C3H6epDl.js";import{_ as nt}from"./Cl6uPZ89.js";import{_ as it}from"./UCCBr-NG.js";import"./DD170oM2.js";import"./D0WEjs_T.js";import"./CJGqVaXH.js";import"./CHcNArxE.js";import"./BjfPoI8C.js";const rt={class:"tw-flex tw-flex-col tw-gap-4"},dt={class:"settings-wrapper"},ut={class:"settings-title-wrapper"},ct={class:"settings-title"},pt={class:"tw-flex tw-flex-col tw-gap-4"},mt={class:"inputs-wrapper"},_t={class:"inputs-wrapper"},ft={class:"inputs-wrapper"},gt={class:"inputs-wrapper"},vt={class:"inputs-wrapper"},yt={class:"tw-flex tw-items-center"},wt={class:"tw-w-full tw-overflow-hidden"},ht={class:"country-label fg-text-12-thin"},bt={class:"country-name fg-text-14-thin"},kt={class:"tw-flex tw-items-center tw-overflow-hidden"},$t={class:"country-name fg-text-14-thin"},Vt={class:"inputs-wrapper"},xt={class:"inputs-wrapper"},Ct={class:"custom-field-wrapper"},St={key:0,class:"settings-form-actions"},Tt={key:0,class:"settings-wrapper"},Ut={class:"settings-title-wrapper"},Mt={class:"settings-title"},Nt=de({__name:"ProfileSettings",setup(ne){const B=fe(),N=Le(),{getProfileInfo:F,getProfileCustomFields:k,getProfile:K}=X(B),{fetchProfile:P,updateProfile:H}=B,{getAuthError:S}=X(N),L=new Map(he.map(a=>[a.iso2,a])),g=be(),{getUserData:_}=X(g),{t:V}=ke(),o=ze(),{getRegFormSettings:C,getFieldValidations:x,getSocialAuth:G,globalData:p,getCountryCode:z}=X(o),W=E(()=>{var a;return!!((a=G.value)!=null&&a.length)}),Z=E(()=>S.value?{error_code:S.value.code,status:S.value.errors,msg:S.value.msg}:null),t=f({bank_account_number:"",account_holder_name:"",bank_name:"",nickname:"",name:"",surname:"",phone:"",phone_code:"",birthday:"",country_code:"",city:"",address:"",telegram:"",zip_code:"",personal_number:""}),d=f(),j=f({userId:_.value.main_user,email:_.value.email,username:_.value.username}),m=f(!1),ee=f(!1),te=f(Z.value),T=E(()=>{const a=he.filter(r=>r.iso2===t.value.country_code);return m.value?a[0]:a!=null&&a.length?a[0].name:""}),ie=E(()=>C.value&&C.value.bank_name?C.value.bank_name.options.find(a=>a.id===t.value.bank_name):null),ae=E(()=>{var U,q,A;const a=((q=(U=p.value.reg_form_settings)==null?void 0:U.country_code)==null?void 0:q.default)||((A=z.value)==null?void 0:A.toLowerCase()),r=L.get(a)??null;return r?r==null?void 0:r.phone_code:""}),le=a=>{te.value=a},v=E(()=>Object.entries(C.value||{}).map(([a,r])=>{let U="NgInputText",q=null,A=V("error"),b="text";switch(a){case"account_holder_name":A=V("account_holder_name_should_be_valid"),b="text",U="NgInputText";break;case"bank_account_number":U="NgInputText",A=V("bank_account_number_should_be_valid"),b="text";break;case"bank_name":U="NgSingleSelector",A=V("bank_name_should_be_valid"),b="selector",q=ie.value;break}const I=r;return{inputName:a,inputType:b,errorText:A,inputComponent:U,defaultOptions:q,editable:I.editByUser,required:I.required,options:I.options}}).filter(a=>a.inputName in k.value)),ve=E(()=>{var b;const a=J().nullable().transform((I,Y)=>Y===""?null:I).test({message:`${V("you_must_be_adult")}`,test:I=>{if(!I)return!0;const Y=new Date(I),Q=new Date;return Q.setFullYear(Q.getFullYear()-18),Y<=Q}}),r={nickname:J().required(),birthday:a,personal_number:J()},U=(b=x.value)==null?void 0:b.personal_number;let q=J();if(U){switch(U==null?void 0:U.label.toLowerCase()){case qe.CPF:q=J().checkCPF();break;case qe.CUIT_CUIL:q=J().checkCUIT_CUIL();break}r.personal_number=q}const A=["account_holder_name","bank_account_number","bank_name"];for(const[I,Y]of Object.entries(C.value))A.includes(I)&&Y.editByUser&&(r[I]=J().required());return{validationSchema:je(r)}}),{handleSubmit:re,resetForm:ye}=Be(ve.value),u=f({}),h=re(async()=>{u.value={};try{ee.value=!0,await H(t.value),await P(),pe()}catch(a){a&&typeof a=="object"&&(u.value=a)}finally{ee.value=!1,m.value=!1,ye()}}),se=()=>{m.value=!m.value,t.value={...t.value,...F.value,...k.value},t.value={...t.value,personal_number:t.value.personal_number??""}},pe=()=>{t.value={...t.value,...F.value,...k.value},t.value={...t.value,personal_number:t.value.personal_number??""},d.value={...t.value,...F.value,...k.value}},oe=a=>{t.value.phone=a.phone,t.value.phone_code=a.phoneCode},R=E(()=>F.value.phone_code+F.value.phone);return ue(()=>{pe()}),Oe(()=>{N.setAuthError(null)}),(a,r)=>{const U=ge,q=$e,A=Ve,b=xe,I=lt,Y=st,Q=De,me=Ke,_e=ot,$=Ae;return i(),c($,{loading:e(ee)},{default:O(()=>{var Ce,Se,Te,Ue,Me,Ne,Pe;return[s("div",rt,[s("div",dt,[s("div",ut,[s("h2",ct,y(a.$t("user_settings")),1),e(m)?w("",!0):(i(),c(q,{key:0,classes:"settings-edit","color-type":"secondary","label-key":a.$t("edit"),"is-with-icon":!0,onClick:se},{default:O(()=>[l(U,{name:"edit",size:20})]),_:1},8,["label-key"]))]),(Ce=Object.keys(e(u)))!=null&&Ce.length?(i(),c(A,{key:0,error:e(u),type:"message",class:"tw-mb-4"},null,8,["error"])):w("",!0),s("form",pt,[s("div",mt,[l(b,{modelValue:e(j).userId,"onUpdate:modelValue":r[0]||(r[0]=n=>e(j).userId=n),"is-validated-separately":!1,"is-disabled":!0,"is-required":!0,"placeholder-text":a.$t("user_id"),"input-name":"userId","input-type":"text",class:"settings-input"},null,8,["modelValue","placeholder-text"]),l(b,{modelValue:e(t).personal_number,"onUpdate:modelValue":r[1]||(r[1]=n=>e(t).personal_number=n),"is-disabled":!e(m)||!!((Se=e(d))!=null&&Se.personal_number),"is-required":!1,"placeholder-text":a.$t(((Ue=(Te=e(x))==null?void 0:Te.personal_number)==null?void 0:Ue.label)||"personal_number"),"input-name":"personal_number","input-type":"text",class:"settings-input",mask:(Ne=(Me=e(x))==null?void 0:Me.personal_number)==null?void 0:Ne.mask,"is-success-icon":""},null,8,["modelValue","is-disabled","placeholder-text","mask"])]),s("div",_t,[l(b,{modelValue:e(j).username,"onUpdate:modelValue":r[2]||(r[2]=n=>e(j).username=n),"is-validated-separately":!1,"is-disabled":!0,"is-required":!1,type:"text","placeholder-text":a.$t("username"),"input-name":"username",class:"settings-input"},null,8,["modelValue","placeholder-text"]),l(b,{modelValue:e(t).nickname,"onUpdate:modelValue":r[3]||(r[3]=n=>e(t).nickname=n),"is-validated-separately":!1,"is-disabled":!e(m),"is-required":!0,"placeholder-text":a.$t("nickname"),"input-type":"text","input-name":"nickname"},null,8,["modelValue","is-disabled","placeholder-text"])]),s("div",ft,[l(b,{modelValue:e(t).name,"onUpdate:modelValue":r[4]||(r[4]=n=>e(t).name=n),"is-validated-separately":!1,"is-disabled":!e(m),"is-required":!1,"placeholder-text":a.$t("name"),"input-name":"name","input-type":"text",class:"settings-input"},null,8,["modelValue","is-disabled","placeholder-text"]),l(b,{modelValue:e(t).surname,"onUpdate:modelValue":r[5]||(r[5]=n=>e(t).surname=n),"is-validated-separately":!1,"is-disabled":!e(m),"is-required":!1,"placeholder-text":a.$t("surname"),"input-name":"surname","input-type":"text",class:"settings-input"},null,8,["modelValue","is-disabled","placeholder-text"])]),s("div",gt,[l(b,{modelValue:e(j).email,"onUpdate:modelValue":r[6]||(r[6]=n=>e(j).email=n),"is-validated-separately":!1,"is-disabled":!0,"is-required":!0,"placeholder-text":a.$t("email"),"input-name":"email","input-type":"text",class:"settings-input"},null,8,["modelValue","placeholder-text"]),e(m)?(i(),c(I,{key:0,class:"settings-input settings-phone","initial-phone-number":e(R),"default-code":e(ae),"is-required":!1,"input-name":"phone",onChange:oe},null,8,["initial-phone-number","default-code"])):(i(),c(b,{key:1,modelValue:e(R),"onUpdate:modelValue":r[7]||(r[7]=n=>D(R)?R.value=n:null),"is-validated-separately":!1,"is-disabled":!e(m),"is-required":!1,"placeholder-text":a.$t("phone"),"input-name":"wholePhone","input-type":"text",class:"settings-input"},null,8,["modelValue","is-disabled","placeholder-text"]))]),s("div",vt,[e(m)?(i(),c(Y,{key:0,modelValue:e(t).birthday,"onUpdate:modelValue":r[8]||(r[8]=n=>e(t).birthday=n),"is-validated-separately":!1,"is-disabled":!1,"is-required":!1,"input-name":"birthday","input-type":"text","model-type":"yyyy-MM-dd",format:"yyyy-MM-dd","label-text":a.$t("birthday"),class:"settings-inputl"},null,8,["modelValue","label-text"])):(i(),c(b,{key:1,modelValue:e(t).birthday,"onUpdate:modelValue":r[9]||(r[9]=n=>e(t).birthday=n),"is-validated-separately":!1,"is-disabled":!e(m),"is-required":!1,"placeholder-text":a.$t("birthday"),"input-name":"birthday","input-type":"text",class:"settings-input"},null,8,["modelValue","is-disabled","placeholder-text"])),e(m)?(i(),c(Q,{key:2,modelValue:e(t).country_code,"onUpdate:modelValue":r[10]||(r[10]=n=>e(t).country_code=n),"item-list":e(he),"returned-option":"iso2",placeholder:a.$t("country"),"default-option":e(T),class:"settings-input settings-country","modal-overflow":!0},{"selected-option":O(({props:n})=>[s("div",yt,[n.iso2?(i(),c(U,{key:0,"is-init-color":!0,name:n.iso2,size:24,folder:"flags",class:"country-flag"},null,8,["name"])):(i(),c(U,{key:1,name:"address",size:24,class:"country-flag"})),s("div",wt,[s("p",ht,y(a.$t("country")),1),s("p",bt,y(n.name),1)])])]),option:O(({props:n})=>[s("div",kt,[l(U,{"is-init-color":!0,name:n.iso2,size:24,folder:"flags",class:"country-flag"},null,8,["name"]),s("p",$t,y(n.name),1)])]),_:1},8,["modelValue","item-list","placeholder","default-option"])):(i(),c(b,{key:3,modelValue:e(T),"onUpdate:modelValue":r[11]||(r[11]=n=>D(T)?T.value=n:null),"is-validated-separately":!1,"is-disabled":!e(m),"is-required":!1,"placeholder-text":a.$t("country"),"input-name":"selectedCountry","input-type":"text",class:"settings-input settings-country"},null,8,["modelValue","is-disabled","placeholder-text"]))]),s("div",Vt,[l(b,{modelValue:e(t).city,"onUpdate:modelValue":r[12]||(r[12]=n=>e(t).city=n),"is-validated-separately":!1,"is-disabled":!e(m),"is-required":!1,"placeholder-text":a.$t("city"),"input-name":"city","input-type":"text",class:"settings-input"},null,8,["modelValue","is-disabled","placeholder-text"]),l(b,{modelValue:e(t).address,"onUpdate:modelValue":r[13]||(r[13]=n=>e(t).address=n),"is-validated-separately":!1,"is-disabled":!e(m),"is-required":!1,"placeholder-text":a.$t("address"),"input-name":"address","input-type":"text",class:"settings-input"},null,8,["modelValue","is-disabled","placeholder-text"])]),s("div",xt,[l(b,{modelValue:e(t).telegram,"onUpdate:modelValue":r[14]||(r[14]=n=>e(t).telegram=n),"is-validated-separately":!1,"is-disabled":!e(m),"is-required":!1,"placeholder-text":a.$t("telegram"),"input-name":"telegram","input-type":"text",class:"settings-input"},null,8,["modelValue","is-disabled","placeholder-text"]),l(b,{modelValue:e(t).zip_code,"onUpdate:modelValue":r[15]||(r[15]=n=>e(t).zip_code=n),"is-validated-separately":!1,"is-disabled":!e(m),"is-required":!1,"placeholder-text":a.$t("zip_code"),"input-name":"zip_code","input-type":"text",class:"settings-input"},null,8,["modelValue","is-disabled","placeholder-text"])]),s("div",Ct,[l(me,{list:e(v),"key-name":"transformed-form-field",container:!1},{item:O(({item:n})=>[n.inputComponent==="NgSingleSelector"?(i(),c(Q,{key:0,modelValue:e(t)[n.inputName],"onUpdate:modelValue":we=>e(t)[n.inputName]=we,"displayed-option":"label","returned-option":"id","additional-label":a.$t("bank_name"),placeholder:a.$t("bank_name"),"is-additional-label":!0,"default-option":n.defaultOptions,"item-list":n.options,"input-name":n.inputName,"is-validated-separately":!1,"is-required":n.required,"is-disabled":!e(m)||!n.editable},null,8,["modelValue","onUpdate:modelValue","additional-label","placeholder","default-option","item-list","input-name","is-required","is-disabled"])):w("",!0),n.inputComponent==="NgInputText"?(i(),c(b,{key:1,modelValue:e(t)[n.inputName],"onUpdate:modelValue":we=>e(t)[n.inputName]=we,type:n.inputType,"placeholder-text":a.$t(n.inputName),"input-name":n.inputName,"is-validated-separately":!1,"is-required":n.required,"is-disabled":!e(m)||!n.editable},null,8,["modelValue","onUpdate:modelValue","type","placeholder-text","input-name","is-required","is-disabled"])):w("",!0)]),_:1},8,["list"])]),e(m)?(i(),M("div",St,[l(q,{"color-type":"secondary","label-key":"cancel",onClick:se}),l(q,{"color-type":"primary","label-key":"save",onClick:e(h)},null,8,["onClick"])])):w("",!0)])]),e(W)?(i(),M("div",Tt,[s("div",Ut,[s("h2",Mt,y(a.$t("connect_social_media")),1)]),s("div",null,[(i(),c(_e,{key:`social-auth-${!!((Pe=e(K))!=null&&Pe.social)}}`,"is-web3":!1,onHandleError:le})),e(te)?(i(),c(A,{key:0,error:e(te),type:"message",class:"tw-mt-4"},null,8,["error"])):w("",!0)])])):w("",!0)])]}),_:1},8,["loading"])}}}),Pt=ce(Nt,[["__scopeId","data-v-390ea592"]]),Ge=[{value:"-12",label:"(GMT -12:00) Eniwetok, Kwajalein"},{value:"-11",label:"(GMT -11:00) Midway Island, Samoa"},{value:"-10",label:"(GMT -10:00) Hawaii"},{value:"-9",label:"(GMT -9:00) Alaska"},{value:"-8",label:"(GMT -8:00) Pacific Time (US & Canada)"},{value:"-7",label:"(GMT -7:00) Mountain Time (US & Canada)"},{value:"-6",label:"(GMT -6:00) Central Time (US & Canada), Mexico City"},{value:"-5",label:"(GMT -5:00) Eastern Time (US & Canada), Bogota, Lima"},{value:"-4",label:"(GMT -4:00) Atlantic Time (Canada), Caracas, La Paz"},{value:"-3.5",label:"(GMT -3:30) Newfoundland"},{value:"-3",label:"(GMT -3:00) Brazil, Buenos Aires, Georgetown"},{value:"-2",label:"(GMT -2:00) Mid-Atlantic"},{value:"-1",label:"(GMT -1:00) Azores, Cape Verde Islands"},{value:"0",label:"(GMT) Western Europe Time, London, Lisbon, Casablanca"},{value:"+1",label:"(GMT +1:00) Brussels, Copenhagen, Madrid, Paris"},{value:"+2",label:"(GMT +2:00) Kaliningrad, South Africa"},{value:"+3",label:"(GMT +3:00) Baghdad, Riyadh, Moscow, St. Petersburg"},{value:"+3.5",label:"(GMT +3:30) Tehran"},{value:"+4",label:"(GMT +4:00) Abu Dhabi, Muscat, Baku, Tbilisi"},{value:"+4.5",label:"(GMT +4:30) Kabul"},{value:"+5",label:"(GMT +5:00) Ekaterinburg, Islamabad, Karachi, Tashkent"},{value:"+5.5",label:"(GMT +5:30) Bombay, Calcutta, Madras, New Delhi"},{value:"+5.75",label:"(GMT +5:45) Kathmandu"},{value:"+6",label:"(GMT +6:00) Almaty, Dhaka, Colombo"},{value:"+7",label:"(GMT +7:00) Bangkok, Hanoi, Jakarta"},{value:"+8",label:"(GMT +8:00) Beijing, Perth, Singapore, Hong Kong"},{value:"+9",label:"(GMT +9:00) Tokyo, Seoul, Osaka, Sapporo, Yakutsk"},{value:"+9.5",label:"(GMT +9:30) Adelaide, Darwin"},{value:"+10",label:"(GMT +10:00) Eastern Australia, Guam, Vladivostok"},{value:"+11",label:"(GMT +11:00) Magadan, Solomon Islands, New Caledonia"},{value:"+12",label:"(GMT +12:00) Auckland, Wellington, Fiji, Kamchatka"}],qt={class:"general-settings"},It={class:"general-settings-wrapper"},Ft={class:"settings-wrapper"},Gt={class:"settings-title-wrapper"},zt={class:"settings-title"},jt={key:0,class:"settings-form-actions"},At={class:"settings-wrapper"},Bt={class:"settings-title-wrapper"},Dt={class:"settings-title"},Et={class:"tw-flex tw-flex-col tw-gap-2"},Lt={class:"settings-switch-wrapper"},Ot={class:"fg-text-14-fat"},Kt={class:"fg-text-14-thin tw-text-text-secondary"},Ht={class:"settings-switch-wrapper"},Rt={class:"fg-text-14-fat"},Yt={class:"fg-text-14-thin tw-text-text-secondary"},Jt={key:0,class:"settings-wrapper"},Wt={class:"settings-title-wrapper"},Zt={class:"settings-title"},Qt={class:"tw-flex tw-flex-col tw-gap-2"},Xt={class:"settings-switch-wrapper settings-consents"},es={class:"fg-text-14-thin"},ts={class:"settings-switch-wrapper settings-consents"},ss={class:"fg-text-14-thin"},as={class:"settings-switch-wrapper settings-consents"},ls={class:"fg-text-14-thin"},os={class:"settings-switch-wrapper settings-consents"},ns={class:"fg-text-14-thin"},is={class:"settings-switch-wrapper settings-consents"},rs={class:"fg-text-14-thin"},ds={class:"settings-switch-wrapper settings-consents"},us={class:"fg-text-14-thin"},cs=de({__name:"GeneralSettings",setup(ne){const{setLocale:B,setLocaleMessage:N}=ke(),F=ze(),{globalData:k,extraData:K}=X(F),{saveLangCode:P,fetchLocale:H}=F,{fetchSettings:S,updateSettings:L}=be(),g=f(!1),_=f(!1),V=f({language:"en",time_zone:"0"}),o=f({language:"",time_zone:"0",odds_type:"",ghost_mode:!1,hide_all_statistic:!1,consents_email:!1,consents_sms:!1,consents_telephone:!1,consents_postmail:!1,consents_site_notification:!1,consents_push_notification:!1}),C=E(()=>{var t;if((t=k.value)!=null&&t.languages){const d=k.value.languages.find(j=>j.code===o.value.language);return(d==null?void 0:d.fullName)||o.value.language}return o.value.language}),x=E(()=>{const t=Ge.find(d=>d.value===o.value.time_zone);return(t==null?void 0:t.label)||o.value.time_zone}),G=async()=>{try{await L(o.value)}catch(t){console.log("fetchUpdateSettings generalSettings.vue",t)}},p=async()=>{_.value=!0,await G(),await W(o.value.language),B(o.value.language),P(o.value.language),g.value=!1,_.value=!1,V.value.language=o.value.language,V.value.time_zone=o.value.time_zone},z=()=>{o.value.language=V.value.language,o.value.time_zone=V.value.time_zone,g.value=!g.value},W=async t=>{try{const d=await H(t);N(t,d),P(t),B(t)}catch(d){console.log("switchLanguage generalSettings.vue",d)}},Z=async()=>{_.value=!0;try{const t=await S();V.value=t,o.value={...o.value,...t}}catch(t){console.log("getData generalSettings.vue",t)}finally{_.value=!1}};return ue(()=>{var t;o.value.language=((t=k.value)==null?void 0:t.lang)||"en",Z()}),(t,d)=>{const j=ge,m=$e,ee=De,te=xe,T=Ee,ie=Ae;return i(),M("div",qt,[l(ie,{loading:e(_)},{default:O(()=>{var ae,le;return[s("div",It,[s("div",Ft,[s("div",Gt,[s("h2",zt,y(t.$t("location")),1),e(g)?w("",!0):(i(),c(m,{key:0,classes:"settings-edit","color-type":"secondary","label-key":t.$t("edit"),"is-with-icon":!0,onClick:d[0]||(d[0]=v=>g.value=!e(g))},{default:O(()=>[l(j,{name:"edit",size:20})]),_:1},8,["label-key"]))]),s("form",{class:"tw-flex tw-flex-col tw-gap-4",onSubmit:He(p,["prevent"])},[s("div",null,[e(g)?(i(),c(ee,{key:0,modelValue:e(o).language,"onUpdate:modelValue":d[1]||(d[1]=v=>e(o).language=v),"item-list":e(k).languages,"default-option":e(C),placeholder:t.$t("language"),"displayed-option":"label","returned-option":"code",class:"pagination-perpage"},null,8,["modelValue","item-list","default-option","placeholder"])):(i(),c(te,{key:1,modelValue:e(C),"onUpdate:modelValue":d[2]||(d[2]=v=>D(C)?C.value=v:null),"placeholder-text":t.$t("language"),"is-disabled":!e(g)},null,8,["modelValue","placeholder-text","is-disabled"]))]),s("div",null,[e(g)?(i(),c(ee,{key:0,modelValue:e(o).time_zone,"onUpdate:modelValue":d[3]||(d[3]=v=>e(o).time_zone=v),"item-list":e(Ge),"default-option":e(x),"displayed-option":"label","returned-option":"value",class:"pagination-perpage"},null,8,["modelValue","item-list","default-option"])):(i(),c(te,{key:1,modelValue:e(x),"onUpdate:modelValue":d[4]||(d[4]=v=>D(x)?x.value=v:null),"placeholder-text":t.$t("time_zone"),"is-disabled":!e(g)},null,8,["modelValue","placeholder-text","is-disabled"]))]),e(g)?(i(),M("div",jt,[l(m,{"color-type":"secondary","label-key":"cancel",onClick:z}),l(m,{"color-type":"primary","label-key":"save",type:"submit"})])):w("",!0)],32)]),s("div",At,[s("div",Bt,[s("h2",Dt,y(t.$t("privacy")),1)]),s("div",Et,[s("div",Lt,[s("div",null,[s("h3",Ot,y(t.$t("ghost_mode")),1),s("span",Kt,y(t.$t("your_bets_wont_appear")),1)]),l(T,{modelValue:e(o).ghost_mode,"onUpdate:modelValue":d[5]||(d[5]=v=>e(o).ghost_mode=v),onChange:p},null,8,["modelValue"])]),s("div",Ht,[s("div",null,[s("h3",Rt,y(t.$t("hide_all_statistic")),1),s("span",Yt,y(t.$t("users_cannot_see_your_wins")),1)]),l(T,{modelValue:e(o).hide_all_statistic,"onUpdate:modelValue":d[6]||(d[6]=v=>e(o).hide_all_statistic=v),onChange:p},null,8,["modelValue"])])])]),(ae=e(K))!=null&&ae.crm&&((le=e(K))==null?void 0:le.crm.type)==="fast_track"?(i(),M("div",Jt,[s("div",Wt,[s("h2",Zt,y(t.$t("consents")),1)]),s("div",Qt,[s("div",Xt,[s("span",es,y(t.$t("email")),1),l(T,{modelValue:e(o).consents_email,"onUpdate:modelValue":d[7]||(d[7]=v=>e(o).consents_email=v),onChange:p},null,8,["modelValue"])]),s("div",ts,[s("span",ss,y(t.$t("sms")),1),l(T,{modelValue:e(o).consents_sms,"onUpdate:modelValue":d[8]||(d[8]=v=>e(o).consents_sms=v),onChange:p},null,8,["modelValue"])]),s("div",as,[s("span",ls,y(t.$t("telephone")),1),l(T,{modelValue:e(o).consents_telephone,"onUpdate:modelValue":d[9]||(d[9]=v=>e(o).consents_telephone=v),onChange:p},null,8,["modelValue"])]),s("div",os,[s("span",ns,y(t.$t("postmail")),1),l(T,{modelValue:e(o).consents_postmail,"onUpdate:modelValue":d[10]||(d[10]=v=>e(o).consents_postmail=v),onChange:p},null,8,["modelValue"])]),s("div",is,[s("span",rs,y(t.$t("site_notification")),1),l(T,{modelValue:e(o).consents_site_notification,"onUpdate:modelValue":d[11]||(d[11]=v=>e(o).consents_site_notification=v),onChange:p},null,8,["modelValue"])]),s("div",ds,[s("span",us,y(t.$t("push_notification")),1),l(T,{modelValue:e(o).consents_push_notification,"onUpdate:modelValue":d[12]||(d[12]=v=>e(o).consents_push_notification=v),onChange:p},null,8,["modelValue"])])])])):w("",!0)])]}),_:1},8,["loading"])])}}}),ps=ce(cs,[["__scopeId","data-v-5cba3652"]]),ms={class:"verify"},_s={class:"settings-switch-wrapper"},fs={class:"tw-flex tw-items-center"},gs={class:"tw-text-base"},vs={class:"tw-flex tw-items-center"},ys={class:"file-status"},ws={key:0,class:"tw-flex tw-items-center tw-mr-2"},hs={key:1,class:"tw-relative"},bs={key:2},ks=de({__name:"SecurityVerifyBlock",props:{title:{},icon:{},type:{},status:{}},setup(ne){const B={0:{desc:"empty",icon:"",color:"",text:""},1:{desc:"waiting_for_review",icon:"recents",class:"pending",text:"verification_pending"},2:{desc:"confirmed",icon:"done-1",class:"confirmed",text:"confirmed"},3:{desc:"not_verified",icon:"info",class:"reject",text:"not_confirmed_bad_quality"},5:{desc:"reject",icon:"info",class:"reject",text:"reject"}},N=ne,F=fe(),{getProfile:k}=X(F),{fetchProfileVerification:K,fetchProfileVerificationDelete:P,fetchProfile:H}=F,S=f(0),L=f({}),g=E(()=>B[S.value]),_=async o=>{var G;const x=(G=o.target.files)==null?void 0:G[0];if(x){const p=new FormData;p.append("type",N.type),p.append("file",x);try{L.value={},await K(p),await H()}catch(z){console.log("handleFileUploads SecurityVerifyBlock",z),z&&typeof z=="object"&&(L.value=z)}}},V=async()=>{try{await P({type:N.type,file_to_delete:k.value.confirmed[`${N.type.toLowerCase()}_confirmation_file`]}),await H()}catch(o){console.log("deleteFile SecurityVerifyBlock",o)}};return ue(()=>{S.value=N.status}),(o,C)=>{var W;const x=ge,G=Re,p=nt,z=Ve;return i(),M("div",ms,[s("div",_s,[s("div",fs,[l(x,{name:o.icon,size:29,class:"tw-me-2 tw-text-fg-tertiary"},null,8,["name"]),s("span",gs,y(o.$t(o.title)),1)]),s("div",vs,[s("div",ys,[e(S)!==0?(i(),M("div",ws,[l(x,{name:e(g).icon,size:20,class:Ie(["tw-mr-2",`${e(g).class}-icon`])},null,8,["name","class"]),s("span",{class:Ie(["status-text",e(g).class])},y(o.$t(e(g).text)),3)])):w("",!0),e(S)!==1&&e(S)!==2?(i(),M("div",hs,[l(G,{size:"origin"},{default:O(()=>[l(x,{name:"photo",size:22,class:"tw-cursor-pointer"})]),_:1}),l(p,{class:"verify-upload","input-name":"files",accept:".jpg, .jpeg",onInput:_})])):w("",!0),e(S)===1?(i(),M("div",bs,[l(G,{size:"origin","color-type":"red",onClick:V},{default:O(()=>[l(x,{name:"delete",size:22,class:"tw-cursor-pointer"})]),_:1})])):w("",!0)])])]),(W=Object.keys(e(L)))!=null&&W.length?(i(),c(z,{key:0,error:e(L),type:"message",class:"tw-mt-4"},null,8,["error"])):w("",!0)])}}}),$s=ce(ks,[["__scopeId","data-v-0cc2679b"]]),Vs={class:"tw-flex tw-flex-col tw-gap-4"},xs={key:0,class:"settings-wrapper"},Cs={class:"settings-switch-wrapper"},Ss={class:"tw-flex tw-items-center tw-justify-between tw-h-12"},Ts={class:"tw-flex tw-items-center"},Us={class:"fg-text-16-fat tw-mb-1"},Ms={class:"fg-text-14-thin tw-text-text-secondary"},Ns={key:0},Ps={key:0,class:"tw-flex tw-flex-col tw-gap-4 tw-mt-4"},qs={class:"tw-flex tw-gap-2 tw-justify-end tw-w-full"},Is={class:"tw-flex tw-gap-2 tw-justify-end tw-w-full"},Fs={key:1,class:"tw-flex tw-flex-col tw-gap-4 tw-justify-start tw-items-start"},Gs={class:"settings-2fa-info"},zs={class:"fg-text-14-fat"},js={class:"settings-qr"},As={class:"tw-flex tw-gap-2 tw-justify-end tw-w-full"},Bs={class:"settings-wrapper tw-flex tw-flex-col tw-gap-4"},Ds={class:"settings-title-wrapper"},Es={class:"settings-title"},Ls={key:0,class:"tw-flex tw-flex-col tw-gap-4"},Os={key:0,class:"tw-text-text-error-primary tw-text-sm tw-mt-1 tw-px-4"},Ks={class:"tw-flex tw-gap-2 tw-justify-end tw-w-full"},Hs={key:1,class:"settings-wrapper"},Rs={class:"fg-text-16-fat tw-mb-1"},Ys={class:"tw-text-base tw-text-text-secondary tw-my-4"},Js={class:"tw-grid tw-gap-2"},Ws=de({__name:"SecuritySettings",setup(ne){const{t:B}=ke(),{$2fa:N}=Ye(),F=fe(),{getProfile:k}=X(F),{fetchProfile:K,updateContacts:P}=F,H=be(),{getUserData:S}=X(H),{show:L}=Je(),g=f(!1),_=f(""),V=f(""),o=f(""),C=f(""),x=f(""),G=f(!1),p=f(""),z=f(!1),W=f(""),Z=f(""),t=f({}),d=f({}),j=f({}),m=f({}),{handleSubmit:ee}=Be({validationSchema:je({oldPassword:J().required(B("field_required")),newPassword:J().required(B("field_required")),confirmPassword:J().required().oneOf([We("newPassword")],B("passwords_do_not_match"))})}),te=E(()=>N.auth.value),T=E(()=>N.control.value),ie=E(()=>{var u;return((u=k.value)==null?void 0:u.kyc)&&Object.values(k.value.kyc).includes("1")&&!S.value.is_zimpler});Ze(T,()=>{G.value=!1,_.value=""});const ae=async()=>{try{const{data:u}=await N.enable(_.value);z.value=!0,W.value=u.qr,Z.value=u.key,t.value={}}catch(u){console.log(u),u&&typeof u=="object"&&(t.value=u)}},le=async()=>{try{await N.disable({code:p.value,password:_.value}),_.value="",p.value="",j.value={}}catch(u){console.log(u),u&&typeof u=="object"&&(j.value=u)}},v=async()=>{try{await N.check({password:_.value,code:p.value}),z.value=!1,p.value="",_.value="",d.value={}}catch(u){console.log(u),u&&typeof u=="object"&&(d.value=u)}},ve=()=>{Qe(Z.value),L({message:"copied",position:"bottom-right",type:"error"})},re=()=>{G.value=!1,z.value=!1,p.value="",_.value=""},ye=ee(async()=>{try{await P({password:V.value,new_pwd:o.value,confirm_pwd:C.value}),V.value="",o.value="",C.value="",g.value=!1,m.value={}}catch(u){console.log(u),u&&typeof u=="object"&&(m.value=u)}});return ue(async()=>{try{await K()}catch(u){console.log("onMounted SecuritySettings",u)}}),(u,h)=>{var A,b,I,Y,Q,me,_e;const se=ge,pe=Ee,oe=Ve,R=at,a=$e,r=xe,U=Xe,q=$s;return i(),M("div",Vs,[e(te)?(i(),M("div",xs,[s("div",Cs,[s("div",Ss,[s("div",Ts,[l(se,{name:"2fa",size:29,class:"tw-mr-2 tw-text-fg-tertiary"}),s("div",null,[s("h3",Us,y(u.$t("profile_two_factor")),1),s("span",Ms,y(u.$t("enable_two_factor")),1)])]),l(pe,{modelValue:e(T),"onUpdate:modelValue":[h[0]||(h[0]=$=>D(T)?T.value=$:null),h[1]||(h[1]=$=>G.value=!e(G))]},null,8,["modelValue"])]),e(G)?(i(),M("div",Ns,[e(z)?(i(),M("div",Fs,[s("div",Gs,[s("span",zs,y(u.$t("twofa_secure_info")),1),l(se,{name:"info",size:16,class:"tw-ml-2"})]),(I=Object.keys(e(d)))!=null&&I.length?(i(),c(oe,{key:0,error:e(d),type:"message",class:"tw-w-full"},null,8,["error"])):w("",!0),s("div",js,[l(U,{src:e(W),alt:"QR code",class:"tw-rounded-md tw-w-40 tw-h-40"},null,8,["src"])]),l(r,{modelValue:e(Z),"onUpdate:modelValue":h[5]||(h[5]=$=>D(Z)?Z.value=$:null),"placeholder-key":"2FA key","is-readonly":"","is-required":"","is-label-shown":"","input-name":"two_fa_qr_key",onClick:ve},{rightIcon:O(()=>[l(se,{size:20,name:"copy"})]),_:1},8,["modelValue"]),l(r,{modelValue:e(p),"onUpdate:modelValue":h[6]||(h[6]=$=>D(p)?p.value=$:null),"placeholder-key":"2FA code","is-required":"","is-label-shown":"","input-name":"two_fa_code"},null,8,["modelValue"]),s("div",As,[l(a,{"label-key":"cancel","color-type":"secondary",class:"tw-w-28",onClick:re}),l(a,{"label-key":"confirm","is-disabled":!e(p),class:"tw-w-28",onClick:v},null,8,["is-disabled"])])])):(i(),M("div",Ps,[e(T)?(i(),M(Fe,{key:1},[(b=Object.keys(e(j)))!=null&&b.length?(i(),c(oe,{key:0,error:e(j),type:"message"},null,8,["error"])):w("",!0),l(R,{modelValue:e(_),"onUpdate:modelValue":h[3]||(h[3]=$=>D(_)?_.value=$:null),"placeholder-key":"Password","is-required":"","is-label-shown":"","input-name":"password"},null,8,["modelValue"]),l(r,{modelValue:e(p),"onUpdate:modelValue":h[4]||(h[4]=$=>D(p)?p.value=$:null),"placeholder-key":"2FA code","is-required":"","is-label-shown":"","input-name":"two_fa_code"},null,8,["modelValue"]),s("div",Is,[l(a,{"label-key":"cancel","color-type":"secondary",class:"tw-w-28",onClick:re}),l(a,{"label-key":"confirm","is-disabled":!e(_)||!e(p),class:"tw-w-28",onClick:le},null,8,["is-disabled"])])],64)):(i(),M(Fe,{key:0},[(A=Object.keys(e(t)))!=null&&A.length?(i(),c(oe,{key:0,error:e(t),type:"message"},null,8,["error"])):w("",!0),l(R,{modelValue:e(_),"onUpdate:modelValue":h[2]||(h[2]=$=>D(_)?_.value=$:null),"placeholder-key":"Password","is-required":"","is-label-shown":"","input-name":"password"},null,8,["modelValue"]),s("div",qs,[l(a,{"label-key":"cancel","color-type":"secondary",class:"tw-w-28",onClick:re}),l(a,{"label-key":"confirm","is-disabled":!e(_),class:"tw-w-28",onClick:ae},null,8,["is-disabled"])])],64))]))])):w("",!0)])])):w("",!0),s("div",Bs,[s("div",Ds,[s("h2",Es,y(u.$t("password")),1),e(g)?w("",!0):(i(),c(a,{key:0,classes:"settings-edit","color-type":"secondary","label-key":u.$t("edit"),"is-with-icon":!0,onClick:h[7]||(h[7]=$=>g.value=!e(g))},{default:O(()=>[l(se,{name:"edit",size:20})]),_:1},8,["label-key"]))]),e(g)?(i(),M("form",Ls,[(Y=Object.keys(e(m)))!=null&&Y.length?(i(),c(oe,{key:0,error:e(m),type:"message",class:"tw-mt-4"},null,8,["error"])):w("",!0),l(R,{modelValue:e(V),"onUpdate:modelValue":h[8]||(h[8]=$=>D(V)?V.value=$:null),"placeholder-key":"enter_old_password","is-required":"","is-label-shown":"","is-validated-separately":!1,"input-name":"oldPassword"},null,8,["modelValue"]),l(R,{modelValue:e(o),"onUpdate:modelValue":h[9]||(h[9]=$=>D(o)?o.value=$:null),"placeholder-key":"new_password","is-validated-separately":!1,"is-required":"","is-label-shown":"","input-name":"newPassword"},null,8,["modelValue"]),s("div",null,[l(R,{modelValue:e(C),"onUpdate:modelValue":h[10]||(h[10]=$=>D(C)?C.value=$:null),"placeholder-key":"password_confirmation","is-validated-separately":!1,"is-required":"","is-label-shown":"","input-name":"confirmPassword",onInput:u.checkPassword},null,8,["modelValue","onInput"]),e(x)?(i(),M("div",Os,y(u.$t(e(x))),1)):w("",!0)]),s("div",Ks,[l(a,{"label-key":"cancel","color-type":"secondary",class:"tw-w-28",onClick:h[11]||(h[11]=$=>g.value=!e(g))}),l(a,{"label-key":"confirm",class:"tw-w-28",onClick:e(ye)},null,8,["onClick"])])])):w("",!0)]),e(ie)?(i(),M("div",Hs,[s("div",null,[s("h3",Rs,y(u.$t("account_verification")),1),s("p",Ys,y(u.$t("identity_verification")),1),s("div",Js,[(Q=e(k))!=null&&Q.kyc.need_identity?(i(),c(q,{key:e(k).confirmed.identity_confirmed,title:"identity_proof",icon:"photo",type:"identity",status:e(k).confirmed.identity_confirmed},null,8,["status"])):w("",!0),(me=e(k))!=null&&me.kyc.need_id?(i(),c(q,{key:e(k).confirmed.id_confirmed,title:"id_proof",icon:"id",type:"ID",status:e(k).confirmed.id_confirmed},null,8,["status"])):w("",!0),(_e=e(k))!=null&&_e.kyc.need_address?(i(),c(q,{key:e(k).confirmed.address_confirmed,title:"address_proof",icon:"address",type:"address",status:e(k).confirmed.address_confirmed},null,8,["status"])):w("",!0)])])])):w("",!0)])}}}),Zs=ce(Ws,[["__scopeId","data-v-36f9dd39"]]),Qs={class:"tw-flex tw-items-center"},Xs={class:"tw-p-4"},ea={class:"tw-mt-4"},ta=de({__name:"UserSettings",setup(ne){const B=fe(),{getActiveTab:N}=X(B),{fetchProfile:F,closeModal:k}=B,K=[{key:"profile",label:"profile"},{key:"general",label:"general"},{key:"security",label:"security"}],P=f(""),H=async()=>{try{await F()}catch(S){console.log("getData UserSettings",S)}};return ue(async()=>{await H(),P.value="profile",N.value&&(P.value=N.value)}),(S,L)=>{const g=tt,_=Pt,V=ps,o=Zs,C=it;return i(),c(et,{to:"#globalModal"},[l(C,{"modal-width":"100%","modal-max-width":"516px","is-footer":!1,"fullscreen-mode":!0,class:"user-settings",onClose:e(k)},{title:O(()=>[s("div",Qs,[s("h2",null,y(S.$t("user_settings")),1)])]),content:O(()=>[s("div",Xs,[l(g,{modelValue:e(P),"onUpdate:modelValue":L[0]||(L[0]=x=>D(P)?P.value=x:null),tabs:K,type:"primary"},null,8,["modelValue"]),s("div",ea,[e(P)==="profile"?(i(),c(_,{key:0})):e(P)==="general"?(i(),c(V,{key:1})):e(P)==="security"?(i(),c(o,{key:2})):w("",!0)])])]),_:1},8,["onClose"])])}}}),ga=ce(ta,[["__scopeId","data-v-b0ff29a0"]]);export{ga as default};
