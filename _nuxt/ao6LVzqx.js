import{aA as z,aB as j,d as H,a0 as N,w as W,k as X,ar as Z,g as l,o as g,c as T,e as h,t as P,r as Y,i as f,a1 as C,U as K,f as q,X as x,ai as J,aa as Q,m as tt,s as et,H as E,bm as c,bn as u,B as st,b as O,ao as nt,h as at}from"./7PQ9d4dP.js";import{d as _}from"./Z4E70_i9.js";var R={exports:{}};(function(B,$){(function(v,a){B.exports=a()})(z,function(){var v="minute",a=/[+-]\d\d(?::?\d\d)?/g,y=/([+-]|\d\d)/g;return function(L,p,i){var e=p.prototype;i.utc=function(t){var n={date:t,utc:!0,args:arguments};return new p(n)},e.utc=function(t){var n=i(this.toDate(),{locale:this.$L,utc:!0});return t?n.add(this.utcOffset(),v):n},e.local=function(){return i(this.toDate(),{locale:this.$L,utc:!1})};var m=e.parse;e.parse=function(t){t.utc&&(this.$u=!0),this.$utils().u(t.$offset)||(this.$offset=t.$offset),m.call(this,t)};var o=e.init;e.init=function(){if(this.$u){var t=this.$d;this.$y=t.getUTCFullYear(),this.$M=t.getUTCMonth(),this.$D=t.getUTCDate(),this.$W=t.getUTCDay(),this.$H=t.getUTCHours(),this.$m=t.getUTCMinutes(),this.$s=t.getUTCSeconds(),this.$ms=t.getUTCMilliseconds()}else o.call(this)};var M=e.utcOffset;e.utcOffset=function(t,n){var D=this.$utils().u;if(D(t))return this.$u?0:D(this.$offset)?M.call(this):this.$offset;if(typeof t=="string"&&(t=function(A){A===void 0&&(A="");var w=A.match(a);if(!w)return null;var k=(""+w[0]).match(y)||["-",0,0],V=k[0],F=60*+k[1]+ +k[2];return F===0?0:V==="+"?F:-F}(t),t===null))return this;var I=Math.abs(t)<=16?60*t:t,r=this;if(n)return r.$offset=I,r.$u=t===0,r;if(t!==0){var U=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(r=this.local().add(I+U,v)).$offset=I,r.$x.$localOffset=U}else r=this.utc();return r};var b=e.format;e.format=function(t){var n=t||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return b.call(this,n)},e.valueOf=function(){var t=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*t},e.isUTC=function(){return!!this.$u},e.toISOString=function(){return this.toDate().toISOString()},e.toString=function(){return this.toDate().toUTCString()};var S=e.toDate;e.toDate=function(t){return t==="s"&&this.$offset?i(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():S.call(this)};var s=e.diff;e.diff=function(t,n,D){if(t&&this.$u===t.$u)return s.call(this,t,n,D);var I=this.local(),r=i(t).local();return s.call(I,r,n,D)}}})})(R);var ot=R.exports;const ut=j(ot),it=["id"],rt={key:0,class:"ng-countdown-col"},lt={class:"ng-countdown-value"},ct=h("span",{class:"ng-countdown-sep"},":",-1),dt={class:"ng-countdown-col"},ft={class:"ng-countdown-value"},ht=h("span",{class:"ng-countdown-sep"},":",-1),vt={class:"ng-countdown-col"},pt={class:"ng-countdown-value"},mt=h("span",{class:"ng-countdown-sep"},":",-1),_t={class:"ng-countdown-col"},gt={class:"ng-countdown-value"},d=60,G=24,$t=H({__name:"NgCountdown",props:{endDate:{},endTime:{},endMinutes:{},hiddenDays:{type:Boolean},hiddenHours:{type:Boolean},hiddenMinutes:{type:Boolean},hiddenSeconds:{type:Boolean},id:{},isBonus:{type:Boolean}},emits:["countdownFinished"],setup(B,{emit:$}){_.extend(ut);const v=$,a=B,y=N(!1),L=N(null),p=N(0),i=N(0),e=N(0),m=N(0);W(()=>a.endTime,()=>{o(),S()});const o=()=>{clearInterval(L.value||void 0),L.value=null},M=()=>{o(),p.value=0,i.value=0,e.value=0,m.value=0},b=()=>a.endDate?_(a.endDate).utc().valueOf():a.endTime?_().add(a.endTime,"millisecond").utc():a.endMinutes?_().add(a.endMinutes,"minutes").utc():null,S=()=>{const s=b();if(!(s&&_(s).diff(_(),"millisecond")>0)){v("countdownFinished",a.id);return}L.value=window.setInterval(()=>{const n=_(s).diff(_(),"second");n===0&&(M(),v("countdownFinished",a.id)),p.value=Math.floor(n%d).toString().padStart(2,"0"),i.value=Math.floor(n%(d*d)/d).toString().padStart(2,"0"),e.value=Math.floor(n%(d*d*G)/(d*d)).toString().padStart(2,"0"),m.value=Math.floor(n/(d*d*G)).toString().padStart(2,"0"),y.value=!0},1e3)};return X(()=>{S()}),Z(()=>{M()}),(s,t)=>l(y)?(g(),T("span",{key:0,id:s.endDate,class:K(["ng-countdown",{"ng-countdown-bonus":s.isBonus}])},[s.hiddenDays?f("",!0):(g(),T("span",rt,[h("span",lt,P(l(m)),1),Y(s.$slots,"days")])),s.hiddenHours?f("",!0):(g(),T(C,{key:1},[s.hiddenDays?f("",!0):Y(s.$slots,"divider",{key:0},()=>[ct]),h("span",dt,[h("span",ft,P(l(e)),1),Y(s.$slots,"hours")])],64)),s.hiddenMinutes?f("",!0):(g(),T(C,{key:2},[s.hiddenHours?f("",!0):Y(s.$slots,"divider",{key:0},()=>[ht]),h("span",vt,[h("span",pt,P(l(i)),1),Y(s.$slots,"minutes")])],64)),s.hiddenSeconds?f("",!0):(g(),T(C,{key:3},[s.hiddenMinutes?f("",!0):Y(s.$slots,"divider",{key:0},()=>[mt]),h("span",_t,[h("span",gt,P(l(p)),1),Y(s.$slots,"seconds")])],64))],10,it)):s.isBonus?f("",!0):(g(),T(C,{key:1},[q(" --:-- ")],64))}}),yt=H({__name:"FixedPvpButton",props:{isGameMenu:{type:Boolean,default:!1},isStatic:{type:Boolean}},setup(B){const $=B,v=x(),a=J(),y=Q(),{PVP_LOBBY_LINK:L,PVP_BATTLE_ID:p}=nt,i=tt(),{getUserBattle:e}=et(i),m=N(!1),o=E(()=>e.value?e.value.battle_status===c.PLAYING_KEY&&e.value.player_status!==c.PLAYING_KEY&&e.value.player_started?u.START_PLAYING:e.value.battle_status===c.PLAYING_KEY&&e.value.player_status!==c.PLAYING_KEY&&!e.value.player_started?u.PLAYING:e.value.battle_status===c.PLAYING_KEY&&m.value?u.RESULTS_IN:e.value.battle_status===c.PLAYING_KEY&&e.value.player_status===c.PLAYING_KEY?u.PLAYER_FINISHED:e.value.battle_status===c.FINISHED_KEY?u.FINISHED:e.value.battle_status===c.CANCELED_KEY||e.value.battle_status===c.DELETED_KEY?"":u.AVAILABLE:""),M=E(()=>!!($.isGameMenu&&o.value||$.isBattle&&o.value||a.meta.metaName!==L&&a.meta.metaName!==p&&o.value)),b=E(()=>!$.isGameMenu&&(o.value===u.AVAILABLE||o.value===u.PLAYER_FINISHED)),S=E(()=>!$.isGameMenu&&(o.value===u.START_PLAYING||o.value===u.PLAYING)),s=E(()=>o.value===u.FINISHED),t=E(()=>o.value===u.RESULTS_IN),n=E(()=>b.value?"pvp":S.value?"play":s.value?"time":t.value?"trophy":""),D=()=>{m.value=!0},I=()=>{e.value&&(S.value&&y.push(v({name:"battles-id",params:{id:e.value.battle_id}})),b.value&&y.push(v({name:"battles-lobby-id",params:{id:e.value.battle_link}})))};return(r,U)=>{const A=at,w=$t;return l(M)&&l(e)?(g(),T("div",{key:0,class:K(["ng-fixed-pvp-button",[l(o),{"ng-static-pvp-button":r.isStatic}]]),onClick:I},[l(n)?(g(),st(A,{key:0,name:l(n),size:14},null,8,["name"])):f("",!0),O(w,{id:"fixed-pvp-button","hidden-days":!0,"hidden-hours":!0,"end-time":l(e).timer*1e3,onCountdownFinished:D},null,8,["end-time"]),O(A,{name:"info",size:16})],2)):f("",!0)}}}),It=Object.freeze(Object.defineProperty({__proto__:null,default:yt},Symbol.toStringTag,{value:"Module"}));export{It as F,$t as _,yt as a};
