import{M as X,C as $,_ as Y}from"./D5X7BfX4.js";import{d as Z,ai as tt,a as et,L as st,j as ot,s as j,b5 as at,H as M,a0 as h,k as nt,l as it,o as c,c as D,e as t,b as l,g as o,C as n,B as p,t as a,n as V,f as U,i as lt,p as rt,h as ct,A as dt,at as _t,au as mt,a4 as ut,_ as pt}from"./7PQ9d4dP.js";import{_ as yt}from"./DUlDJf1u.js";import{_ as ft}from"./BjUcVok3.js";import"./DqC-nx6a.js";import"./BQWyzQZp.js";import"./DD170oM2.js";import"./C3H6epDl.js";import"./D0WEjs_T.js";import"./CXUEa_s4.js";import"./DPPwigSW.js";const gt={class:"tier-transactions"},ht={class:"tw-my-4"},wt={key:0},bt={class:"table-row"},vt={class:"table-row-wrapper"},Ct={class:"table-row-title"},kt={class:"table-row-value"},Tt={class:"table-row"},Nt={class:"table-row-wrapper"},Pt={class:"table-row-title"},It={class:"table-row-value"},St={class:"table-row"},$t={class:"table-row-wrapper"},jt={class:"table-row-title"},Mt={class:"table-row-value"},Dt={class:"table-row"},Vt={class:"table-row-wrapper"},Ut={class:"table-row-title"},Bt={class:"table-row-value"},Rt={class:"date"},xt={class:"tw-flex"},Et={class:"tw-ms-1"},Ft={class:"tw-flex tw-items-center"},Lt={class:"tw-ms-1"},At=Z({__name:"TierTransactions",setup(Ht){const B=tt(),{t:i}=et(),{platformCommasFormat:w}=st(),b=["695ca6bf-b1d6-43ea-a528-14880fc8b71c","fb08eca9-30ec-4ff2-88a1-6e8ba3a06df9"],R=ot(),{isDesktop:v}=j(R),C=at(),{getGamePagination:k,getTierTransactions:m}=j(C),{fetchTierTransactions:x,resetTiersProgramsStore:E}=C,T=M(()=>({limit:10,...B.query})),F=[{title:i("type"),justify:"left",key:"type"},{title:i("date"),justify:"left",key:"date"},{title:i("amount"),justify:"right",key:"sum"},{title:i("points"),justify:"right",key:"points"}],L=[{title:i("type"),justify:"left",key:"type"},{title:i("date"),justify:"left",key:"date"},{title:i("amount"),justify:"right",key:"sum"},{title:i("points"),justify:"right",key:"points"}],N=h([]),y=h({limit:T.value.limit}),f=h(!0),P=M(()=>v.value?L:F),g=async e=>{try{await x(e)}catch(r){console.error("getData tiers/TierTransactions",r)}finally{f.value=!1}},A=async e=>{var u,d,_;const r={type:(u=e.type)==null?void 0:u.toString(),date_from:(d=e.date)!=null&&d[0]?e.date[0]:"",date_to:(_=e.date)!=null&&_[1]?e.date[1]:"",search:e.search,limit:e.limit};f.value=!0,await g(r)},H=()=>{y.value.limit+=T.value.limit,g(y.value)},q={style:{accordionContainerClass:"tw-flex tw-flex-col tw-gap-4"},type:X.ACCORDION},z=()=>{N.value=[{componentName:$.SEARCH_INPUT,target:"search",props:{classes:"tw-col-span-3",placeholderText:i("search"),isRequired:!0,modelValue:""},mobile:{class:"tw-col-span-6"}},{target:"date",componentName:$.DATE_PICKER,props:{modelValue:"",modelType:"yyyy-MM-dd",format:"yyyy/MM/dd",isDisabled:!1,range:!0,inputName:"date",labelKey:"date",multiCalendar:!0},mobile:{redirect:!0}}]};return nt(async()=>{await g(y.value),z()}),it(()=>{E()}),(e,r)=>{const u=Y,d=rt,_=ct,G=yt,K=ft,O=dt,J=_t,Q=mt,W=ut;return c(),D("div",gt,[t("div",ht,[l(u,{"mobile-settings":q,"order-settings":{gridCols:6},list:o(N),class:"tw-my-4",onChange:A},null,8,["list"])]),l(W,{loading:o(f),class:"tw-mt-4"},{default:n(()=>{var I,S;return[(I=o(m))!=null&&I.length?(c(),D("section",wt,[o(v)?(c(),p(K,{key:1,header:o(P),list:o(m),class:"ng-table-tablet"},{type:n(({item:s})=>[t("div",null,a(e.$t(s.type.toString().toLowerCase())),1)]),date:n(({item:s})=>[t("div",Rt,a(s.date.split("-").join("/")),1)]),sum:n(({item:s})=>[t("div",xt,[l(d,{src:("getCurrencyIconUrl"in e?e.getCurrencyIconUrl:o(V))(s.currency),alt:s.currency},null,8,["src","alt"]),t("span",Et,a(o(w)(b,s.sum)),1)])]),points:n(({item:s})=>[t("div",Ft,[l(_,{"is-init-color":!0,size:16,name:"gem"}),t("span",Lt,a(o(w)(b,s.points)),1)])]),_:1},8,["header","list"])):(c(),p(G,{key:0,header:o(P),list:o(m)},{type:n(({item:s})=>[t("div",bt,[t("div",vt,[t("div",Ct,a(e.$t("type")),1),t("div",kt,a(e.$t(s.type.toString().toLowerCase())),1)])])]),date:n(({item:s})=>[t("div",Tt,[t("div",Nt,[t("div",Pt,a(e.$t("date")),1),t("div",It,a(s.date.split("-").join("/")),1)])])]),sum:n(({item:s})=>[t("div",St,[t("div",$t,[t("div",jt,a(e.$t("amount")),1),t("div",Mt,[l(d,{src:("getCurrencyIconUrl"in e?e.getCurrencyIconUrl:o(V))(s.currency),alt:s.currency},null,8,["src","alt"]),U(" "+a(s.sum),1)])])])]),points:n(({item:s})=>[t("div",Dt,[t("div",Vt,[t("div",Ut,a(e.$t("points")),1),t("div",Bt,[l(_,{"is-init-color":!0,size:16,name:"gem"}),U(" "+a(s.points),1)])])])]),_:1},8,["header","list"])),(S=o(k))!=null&&S.next_page?(c(),p(J,{key:2,"item-count":o(m).length,item:o(k),"class-list":"tw-mt-8"},{action:n(()=>[l(O,{"label-key":"show_more","color-type":"outline",class:"content-btn",onClick:r[0]||(r[0]=s=>H())})]),_:1},8,["item-count","item"])):lt("",!0)])):(c(),p(Q,{key:1}))]}),_:1},8,["loading"])])}}}),te=pt(At,[["__scopeId","data-v-c44663a2"]]);export{te as default};
